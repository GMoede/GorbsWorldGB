                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module samptest
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _cut_sample
                                     12 	.globl _play_sample
                                     13 	.globl _puts
                                     14 	.globl _joypad
                                     15 	.globl _vsync
                                     16 	.globl _joy
                                     17 	.globl _old_joy
                                     18 ;--------------------------------------------------------
                                     19 ; special function registers
                                     20 ;--------------------------------------------------------
                         00000000    21 _GG_STATE	=	0x0000
                         00000001    22 _GG_EXT_7BIT	=	0x0001
                         00000002    23 _GG_EXT_CTL	=	0x0002
                         00000003    24 _GG_SIO_SEND	=	0x0003
                         00000004    25 _GG_SIO_RECV	=	0x0004
                         00000005    26 _GG_SIO_CTL	=	0x0005
                         00000006    27 _GG_SOUND_PAN	=	0x0006
                         0000003E    28 _MEMORY_CTL	=	0x003e
                         0000003F    29 _JOY_CTL	=	0x003f
                         0000007E    30 _VCOUNTER	=	0x007e
                         0000007F    31 _PSG	=	0x007f
                         0000007F    32 _HCOUNTER	=	0x007f
                         000000BE    33 _VDP_DATA	=	0x00be
                         000000BF    34 _VDP_CMD	=	0x00bf
                         000000BF    35 _VDP_STATUS	=	0x00bf
                         000000DC    36 _JOY_PORT1	=	0x00dc
                         000000DD    37 _JOY_PORT2	=	0x00dd
                         000000F0    38 _FMADDRESS	=	0x00f0
                         000000F1    39 _FMDATA	=	0x00f1
                         000000F2    40 _AUDIOCTRL	=	0x00f2
                                     41 ;--------------------------------------------------------
                                     42 ; ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area _DATA
                         0000FFFC    45 _RAM_CONTROL	=	0xfffc
                         0000FFF8    46 _GLASSES_3D	=	0xfff8
                         0000FFFD    47 _MAP_FRAME0	=	0xfffd
                         0000FFFE    48 _MAP_FRAME1	=	0xfffe
                         0000FFFF    49 _MAP_FRAME2	=	0xffff
    00000000                         50 _old_joy::
    00000000                         51 	.ds 1
                                     52 ;--------------------------------------------------------
                                     53 ; ram data
                                     54 ;--------------------------------------------------------
                                     55 	.area _INITIALIZED
    00000000                         56 _joy::
    00000000                         57 	.ds 1
                                     58 ;--------------------------------------------------------
                                     59 ; absolute external ram data
                                     60 ;--------------------------------------------------------
                                     61 	.area _DABS (ABS)
                                     62 ;--------------------------------------------------------
                                     63 ; global & static initialisations
                                     64 ;--------------------------------------------------------
                                     65 	.area _HOME
                                     66 	.area _GSINIT
                                     67 	.area _GSFINAL
                                     68 	.area _GSINIT
                                     69 ;--------------------------------------------------------
                                     70 ; Home
                                     71 ;--------------------------------------------------------
                                     72 	.area _HOME
                                     73 	.area _HOME
                                     74 ;--------------------------------------------------------
                                     75 ; code
                                     76 ;--------------------------------------------------------
                                     77 	.area _CODE
                                     78 ;src/samptest.c:20: void main(void) {
                                     79 ;	---------------------------------
                                     80 ; Function main
                                     81 ; ---------------------------------
    00000000                         82 _main::
                                     83 ;src/samptest.c:21: puts("PRESS A/B TO PLAY\n");
    00000000 21r65r00         [10]   84 	ld	hl, #___str_0
    00000003 CDr00r00         [17]   85 	call	_puts
                                     86 ;src/samptest.c:23: while (true) {
    00000006                         87 00107$:
                                     88 ;src/samptest.c:14: old_joy = joy, joy = joypad();
    00000006 3Ar00r00         [13]   89 	ld	a, (_joy+0)
    00000009 32r00r00         [13]   90 	ld	(_old_joy+0), a
    0000000C CDr00r00         [17]   91 	call	_joypad
    0000000F 7D               [ 4]   92 	ld	a, l
    00000010 32r00r00         [13]   93 	ld	(_joy+0), a
                                     94 ;src/samptest.c:17: return ((joy & ~old_joy) & key);
    00000013 3Ar00r00         [13]   95 	ld	a, (_old_joy+0)
    00000016 2F               [ 4]   96 	cpl
    00000017 4F               [ 4]   97 	ld	c, a
    00000018 3Ar00r00         [13]   98 	ld	a, (_joy+0)
    0000001B A1               [ 4]   99 	and	a, c
    0000001C CB 6F            [ 8]  100 	bit	5, a
    0000001E 28 1F            [12]  101 	jr	Z, 00104$
                                    102 ;src/samptest.c:26: if (KEY_PRESSED(J_A)) {
                                    103 ;src/samptest.c:27: bank_save = CURRENT_BANK;
    00000020 3A FE FF         [13]  104 	ld	a, (_MAP_FRAME1)
    00000023 4F               [ 4]  105 	ld	c, a
                                    106 ;src/samptest.c:28: SWITCH_ROM(BANK(cowbell_8bit_pcm_unsigned));
    00000024 21 FE FF         [10]  107 	ld	hl, #_MAP_FRAME1
    00000027 36r00            [10]  108 	ld	(hl), #<(___bank_cowbell_8bit_pcm_unsigned)
                                    109 ;src/samptest.c:29: play_sample(cowbell_8bit_pcm_unsigned, sizeof(cowbell_8bit_pcm_unsigned));
    00000029 21r00r00         [10]  110 	ld	hl, #_cowbell_8bit_pcm_unsigned
    0000002C C5               [11]  111 	push	bc
    0000002D 11 80 1F         [10]  112 	ld	de, #0x1f80
    00000030 CDr00r00         [17]  113 	call	_play_sample
                                    114 ;src/samptest.c:30: cut_sample(SFX_CH_1 | SFX_CH_2 | SFX_CH_3);
    00000033 3E 07            [ 7]  115 	ld	a, #0x07
    00000035 CDr00r00         [17]  116 	call	_cut_sample
    00000038 C1               [10]  117 	pop	bc
                                    118 ;src/samptest.c:31: SWITCH_ROM(bank_save);
    00000039 21 FE FF         [10]  119 	ld	hl, #_MAP_FRAME1
    0000003C 71               [ 7]  120 	ld	(hl), c
    0000003D 18 21            [12]  121 	jr	00105$
    0000003F                        122 00104$:
                                    123 ;src/samptest.c:17: return ((joy & ~old_joy) & key);
    0000003F CB 67            [ 8]  124 	bit	4, a
    00000041 28 1D            [12]  125 	jr	Z, 00105$
                                    126 ;src/samptest.c:33: } else if (KEY_PRESSED(J_B)) {
                                    127 ;src/samptest.c:34: bank_save = CURRENT_BANK;
    00000043 3A FE FF         [13]  128 	ld	a, (_MAP_FRAME1)
    00000046 4F               [ 4]  129 	ld	c, a
                                    130 ;src/samptest.c:35: SWITCH_ROM(BANK(risset_drum_8bit_pcm_unsigned));
    00000047 21 FE FF         [10]  131 	ld	hl, #_MAP_FRAME1
    0000004A 36r00            [10]  132 	ld	(hl), #<(___bank_risset_drum_8bit_pcm_unsigned)
                                    133 ;src/samptest.c:36: play_sample(risset_drum_8bit_pcm_unsigned, sizeof(risset_drum_8bit_pcm_unsigned));
    0000004C C5               [11]  134 	push	bc
    0000004D 11 10 0E         [10]  135 	ld	de, #0x0e10
    00000050 21r00r00         [10]  136 	ld	hl, #_risset_drum_8bit_pcm_unsigned
    00000053 CDr00r00         [17]  137 	call	_play_sample
                                    138 ;src/samptest.c:37: cut_sample(SFX_CH_1 | SFX_CH_2 | SFX_CH_3);
    00000056 3E 07            [ 7]  139 	ld	a, #0x07
    00000058 CDr00r00         [17]  140 	call	_cut_sample
    0000005B C1               [10]  141 	pop	bc
                                    142 ;src/samptest.c:38: SWITCH_ROM(bank_save);
    0000005C 21 FE FF         [10]  143 	ld	hl, #_MAP_FRAME1
    0000005F 71               [ 7]  144 	ld	(hl), c
    00000060                        145 00105$:
                                    146 ;src/samptest.c:40: vsync();
    00000060 CDr00r00         [17]  147 	call	_vsync
                                    148 ;src/samptest.c:42: }
    00000063 18 A1            [12]  149 	jr	00107$
    00000065                        150 ___str_0:
    00000065 50 52 45 53 53 20 41   151 	.ascii "PRESS A/B TO PLAY"
             2F 42 20 54 4F 20 50
             4C 41 59
    00000076 0A                     152 	.db 0x0a
    00000077 00                     153 	.db 0x00
                                    154 	.area _CODE
                                    155 	.area _INITIALIZER
    00000000                        156 __xinit__joy:
    00000000 00                     157 	.db #0x00	; 0
                                    158 	.area _CABS (ABS)
