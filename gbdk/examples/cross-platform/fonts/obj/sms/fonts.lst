                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module fonts
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _font_color
                                     12 	.globl _font_set
                                     13 	.globl _font_load
                                     14 	.globl _font_init
                                     15 	.globl _get_mode
                                     16 	.globl _mode
                                     17 	.globl _puts
                                     18 	.globl _printf
                                     19 ;--------------------------------------------------------
                                     20 ; special function registers
                                     21 ;--------------------------------------------------------
                         00000000    22 _GG_STATE	=	0x0000
                         00000001    23 _GG_EXT_7BIT	=	0x0001
                         00000002    24 _GG_EXT_CTL	=	0x0002
                         00000003    25 _GG_SIO_SEND	=	0x0003
                         00000004    26 _GG_SIO_RECV	=	0x0004
                         00000005    27 _GG_SIO_CTL	=	0x0005
                         00000006    28 _GG_SOUND_PAN	=	0x0006
                         0000003E    29 _MEMORY_CTL	=	0x003e
                         0000003F    30 _JOY_CTL	=	0x003f
                         0000007E    31 _VCOUNTER	=	0x007e
                         0000007F    32 _PSG	=	0x007f
                         0000007F    33 _HCOUNTER	=	0x007f
                         000000BE    34 _VDP_DATA	=	0x00be
                         000000BF    35 _VDP_CMD	=	0x00bf
                         000000BF    36 _VDP_STATUS	=	0x00bf
                         000000DC    37 _JOY_PORT1	=	0x00dc
                         000000DD    38 _JOY_PORT2	=	0x00dd
                         000000F0    39 _FMADDRESS	=	0x00f0
                         000000F1    40 _FMDATA	=	0x00f1
                         000000F2    41 _AUDIOCTRL	=	0x00f2
                                     42 ;--------------------------------------------------------
                                     43 ; ram data
                                     44 ;--------------------------------------------------------
                                     45 	.area _DATA
                         0000FFFC    46 _RAM_CONTROL	=	0xfffc
                         0000FFF8    47 _GLASSES_3D	=	0xfff8
                         0000FFFD    48 _MAP_FRAME0	=	0xfffd
                         0000FFFE    49 _MAP_FRAME1	=	0xfffe
                         0000FFFF    50 _MAP_FRAME2	=	0xffff
                                     51 ;--------------------------------------------------------
                                     52 ; ram data
                                     53 ;--------------------------------------------------------
                                     54 	.area _INITIALIZED
                                     55 ;--------------------------------------------------------
                                     56 ; absolute external ram data
                                     57 ;--------------------------------------------------------
                                     58 	.area _DABS (ABS)
                                     59 ;--------------------------------------------------------
                                     60 ; global & static initialisations
                                     61 ;--------------------------------------------------------
                                     62 	.area _HOME
                                     63 	.area _GSINIT
                                     64 	.area _GSFINAL
                                     65 	.area _GSINIT
                                     66 ;--------------------------------------------------------
                                     67 ; Home
                                     68 ;--------------------------------------------------------
                                     69 	.area _HOME
                                     70 	.area _HOME
                                     71 ;--------------------------------------------------------
                                     72 ; code
                                     73 ;--------------------------------------------------------
                                     74 	.area _CODE
                                     75 ;src/fonts.c:17: void main(void)
                                     76 ;	---------------------------------
                                     77 ; Function main
                                     78 ; ---------------------------------
    00000000                         79 _main::
    00000000 DD E5            [15]   80 	push	ix
    00000002 DD 21 00 00      [14]   81 	ld	ix,#0
    00000006 DD 39            [15]   82 	add	ix,sp
    00000008 21 FA FF         [10]   83 	ld	hl, #-6
    0000000B 39               [11]   84 	add	hl, sp
    0000000C F9               [ 6]   85 	ld	sp, hl
                                     86 ;src/fonts.c:20: __WRITE_VDP_REG(VDP_R2, R2_MAP_0x3800);
    0000000D FD 21r00r00      [14]   87 	ld	iy, #_shadow_VDP_R2
    00000011 FD 36 00 FF      [19]   88 	ld	0 (iy), #0xff
    00000015 F3               [ 4]   89 	di
    00000016 3E FF            [ 7]   90 	ld	a, #0xff
    00000018 D3 BF            [11]   91 	out	(_VDP_CMD), a
    0000001A 3E 82            [ 7]   92 	ld	a, #0x82
    0000001C D3 BF            [11]   93 	out	(_VDP_CMD), a
    0000001E FB               [ 4]   94 	ei
                                     95 ;src/fonts.c:21: __WRITE_VDP_REG(VDP_R5, R5_SAT_0x3F00);
    0000001F FD 21r00r00      [14]   96 	ld	iy, #_shadow_VDP_R5
    00000023 FD 36 00 FF      [19]   97 	ld	0 (iy), #0xff
    00000027 F3               [ 4]   98 	di
    00000028 3E FF            [ 7]   99 	ld	a, #0xff
    0000002A D3 BF            [11]  100 	out	(_VDP_CMD), a
    0000002C 3E 85            [ 7]  101 	ld	a, #0x85
    0000002E D3 BF            [11]  102 	out	(_VDP_CMD), a
    00000030 FB               [ 4]  103 	ei
                                    104 ;src/fonts.c:28: font_init();
    00000031 CDr00r00         [17]  105 	call	_font_init
                                    106 ;src/fonts.c:31: ibm_font = font_load(font_ibm);  /* 96 tiles */
    00000034 21r00r00         [10]  107 	ld	hl, #_font_ibm
    00000037 E5               [11]  108 	push	hl
    00000038 CDr00r00         [17]  109 	call	_font_load
    0000003B F1               [10]  110 	pop	af
    0000003C E3               [19]  111 	ex	(sp), hl
                                    112 ;src/fonts.c:32: italic_font = font_load(font_italic);   /* 93 tiles */
    0000003D 21r00r00         [10]  113 	ld	hl, #_font_italic
    00000040 E5               [11]  114 	push	hl
    00000041 CDr00r00         [17]  115 	call	_font_load
    00000044 F1               [10]  116 	pop	af
    00000045 DD 75 FC         [19]  117 	ld	-4 (ix), l
    00000048 DD 74 FD         [19]  118 	ld	-3 (ix), h
                                    119 ;src/fonts.c:35: font_color(WHITE, DKGREY);
    0000004B 21 03 01         [10]  120 	ld	hl, #0x103
    0000004E E5               [11]  121 	push	hl
    0000004F CDr00r00         [17]  122 	call	_font_color
                                    123 ;src/fonts.c:37: min_font = font_load(font_min);
    00000052 21r00r00         [10]  124 	ld	hl, #_font_min
    00000055 E3               [19]  125 	ex	(sp),hl
    00000056 CDr00r00         [17]  126 	call	_font_load
    00000059 F1               [10]  127 	pop	af
    0000005A DD 75 FE         [19]  128 	ld	-2 (ix), l
    0000005D DD 74 FF         [19]  129 	ld	-1 (ix), h
                                    130 ;src/fonts.c:40: mode(get_mode() | M_NO_SCROLL);
    00000060 CDr00r00         [17]  131 	call	_get_mode
    00000063 7D               [ 4]  132 	ld	a, l
    00000064 F6 04            [ 7]  133 	or	a, #0x04
    00000066 F5               [11]  134 	push	af
    00000067 33               [ 6]  135 	inc	sp
    00000068 CDr00r00         [17]  136 	call	_mode
    0000006B 33               [ 6]  137 	inc	sp
                                    138 ;src/fonts.c:45: font_set(ibm_font);
    0000006C E1               [10]  139 	pop	hl
    0000006D E5               [11]  140 	push	hl
    0000006E E5               [11]  141 	push	hl
    0000006F CDr00r00         [17]  142 	call	_font_set
    00000072 F1               [10]  143 	pop	af
                                    144 ;src/fonts.c:48: printf("IBM Font #!?123\n");
    00000073 21rECr00         [10]  145 	ld	hl, #___str_8
    00000076 CDr00r00         [17]  146 	call	_puts
                                    147 ;src/fonts.c:51: font_set(italic_font);
    00000079 D1               [10]  148 	pop	de
    0000007A E1               [10]  149 	pop	hl
    0000007B E5               [11]  150 	push	hl
    0000007C D5               [11]  151 	push	de
    0000007D E5               [11]  152 	push	hl
    0000007E CDr00r00         [17]  153 	call	_font_set
    00000081 F1               [10]  154 	pop	af
                                    155 ;src/fonts.c:52: for (i=1; i!=5; i++) {
    00000082 01 01 00         [10]  156 	ld	bc, #0x0001
    00000085                        157 00102$:
                                    158 ;src/fonts.c:53: printf("In italics, line %u\n", i);
    00000085 C5               [11]  159 	push	bc
    00000086 C5               [11]  160 	push	bc
    00000087 21rBBr00         [10]  161 	ld	hl, #___str_4
    0000008A E5               [11]  162 	push	hl
    0000008B CDr00r00         [17]  163 	call	_printf
    0000008E F1               [10]  164 	pop	af
    0000008F F1               [10]  165 	pop	af
    00000090 C1               [10]  166 	pop	bc
                                    167 ;src/fonts.c:52: for (i=1; i!=5; i++) {
    00000091 03               [ 6]  168 	inc	bc
    00000092 79               [ 4]  169 	ld	a, c
    00000093 D6 05            [ 7]  170 	sub	a, #0x05
    00000095 B0               [ 4]  171 	or	a, b
    00000096 20 ED            [12]  172 	jr	NZ, 00102$
                                    173 ;src/fonts.c:57: font_set(min_font);
    00000098 DD 6E FE         [19]  174 	ld	l, -2 (ix)
    0000009B DD 66 FF         [19]  175 	ld	h, -1 (ix)
    0000009E E5               [11]  176 	push	hl
    0000009F CDr00r00         [17]  177 	call	_font_set
    000000A2 F1               [10]  178 	pop	af
                                    179 ;src/fonts.c:58: printf("Minimal 36 tile font\n");
    000000A3 21rD0r00         [10]  180 	ld	hl, #___str_6
    000000A6 CDr00r00         [17]  181 	call	_puts
                                    182 ;src/fonts.c:61: font_set(ibm_font);
    000000A9 E1               [10]  183 	pop	hl
    000000AA E5               [11]  184 	push	hl
    000000AB E5               [11]  185 	push	hl
    000000AC CDr00r00         [17]  186 	call	_font_set
                                    187 ;src/fonts.c:62: printf("\nDone!");
    000000AF 21rE5r00         [10]  188 	ld	hl, #___str_7
    000000B2 E3               [19]  189 	ex	(sp),hl
    000000B3 CDr00r00         [17]  190 	call	_printf
                                    191 ;src/fonts.c:63: }
    000000B6 DD F9            [10]  192 	ld	sp,ix
    000000B8 DD E1            [14]  193 	pop	ix
    000000BA C9               [10]  194 	ret
    000000BB                        195 ___str_4:
    000000BB 49 6E 20 69 74 61 6C   196 	.ascii "In italics, line %u"
             69 63 73 2C 20 6C 69
             6E 65 20 25 75
    000000CE 0A                     197 	.db 0x0a
    000000CF 00                     198 	.db 0x00
    000000D0                        199 ___str_6:
    000000D0 4D 69 6E 69 6D 61 6C   200 	.ascii "Minimal 36 tile font"
             20 33 36 20 74 69 6C
             65 20 66 6F 6E 74
    000000E4 00                     201 	.db 0x00
    000000E5                        202 ___str_7:
    000000E5 0A                     203 	.db 0x0a
    000000E6 44 6F 6E 65 21         204 	.ascii "Done!"
    000000EB 00                     205 	.db 0x00
    000000EC                        206 ___str_8:
    000000EC 46 6F 6E 74 20 64 65   207 	.ascii "Font demo."
             6D 6F 2E
    000000F6 0A                     208 	.db 0x0a
    000000F7 0A                     209 	.db 0x0a
    000000F8 49 42 4D 20 46 6F 6E   210 	.ascii "IBM Font #!?123"
             74 20 23 21 3F 31 32
             33
    00000107 00                     211 	.db 0x00
                                    212 	.area _CODE
                                    213 	.area _INITIALIZER
                                    214 	.area _CABS (ABS)
