                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module fonts
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _font_color
                                     12 	.globl _font_set
                                     13 	.globl _font_load
                                     14 	.globl _font_init
                                     15 	.globl _get_mode
                                     16 	.globl _mode
                                     17 	.globl _puts
                                     18 	.globl _printf
                                     19 ;--------------------------------------------------------
                                     20 ; special function registers
                                     21 ;--------------------------------------------------------
                                     22 ;--------------------------------------------------------
                                     23 ; ram data
                                     24 ;--------------------------------------------------------
                                     25 	.area _DATA
                                     26 ;--------------------------------------------------------
                                     27 ; ram data
                                     28 ;--------------------------------------------------------
                                     29 	.area _INITIALIZED
                                     30 ;--------------------------------------------------------
                                     31 ; absolute external ram data
                                     32 ;--------------------------------------------------------
                                     33 	.area _DABS (ABS)
                                     34 ;--------------------------------------------------------
                                     35 ; global & static initialisations
                                     36 ;--------------------------------------------------------
                                     37 	.area _HOME
                                     38 	.area _GSINIT
                                     39 	.area _GSFINAL
                                     40 	.area _GSINIT
                                     41 ;--------------------------------------------------------
                                     42 ; Home
                                     43 ;--------------------------------------------------------
                                     44 	.area _HOME
                                     45 	.area _HOME
                                     46 ;--------------------------------------------------------
                                     47 ; code
                                     48 ;--------------------------------------------------------
                                     49 	.area _CODE
                                     50 ;src/fonts.c:17: void main(void)
                                     51 ;	---------------------------------
                                     52 ; Function main
                                     53 ; ---------------------------------
    00000000                         54 _main::
    00000000 E8 FA            [16]   55 	add	sp, #-6
                                     56 ;src/fonts.c:28: font_init();
    00000002 CDr00r00         [24]   57 	call	_font_init
                                     58 ;src/fonts.c:31: ibm_font = font_load(font_ibm);  /* 96 tiles */
    00000005 11r00r00         [12]   59 	ld	de, #_font_ibm
    00000008 D5               [16]   60 	push	de
    00000009 CDr00r00         [24]   61 	call	_font_load
    0000000C E8 04            [16]   62 	add	sp, #4
    0000000E D5               [16]   63 	push	de
                                     64 ;src/fonts.c:32: italic_font = font_load(font_italic);   /* 93 tiles */
    0000000F 11r00r00         [12]   65 	ld	de, #_font_italic
    00000012 D5               [16]   66 	push	de
    00000013 CDr00r00         [24]   67 	call	_font_load
    00000016 E1               [12]   68 	pop	hl
    00000017 F8 02            [12]   69 	ldhl	sp,	#2
    00000019 7B               [ 4]   70 	ld	a, e
    0000001A 22               [ 8]   71 	ld	(hl+), a
    0000001B 72               [ 8]   72 	ld	(hl), d
                                     73 ;src/fonts.c:35: font_color(WHITE, DKGREY);
    0000001C 21 03 01         [12]   74 	ld	hl, #0x103
    0000001F E5               [16]   75 	push	hl
    00000020 CDr00r00         [24]   76 	call	_font_color
    00000023 E1               [12]   77 	pop	hl
                                     78 ;src/fonts.c:37: min_font = font_load(font_min);
    00000024 11r00r00         [12]   79 	ld	de, #_font_min
    00000027 D5               [16]   80 	push	de
    00000028 CDr00r00         [24]   81 	call	_font_load
    0000002B E1               [12]   82 	pop	hl
    0000002C F8 04            [12]   83 	ldhl	sp,	#4
    0000002E 7B               [ 4]   84 	ld	a, e
    0000002F 22               [ 8]   85 	ld	(hl+), a
    00000030 72               [ 8]   86 	ld	(hl), d
                                     87 ;src/fonts.c:40: mode(get_mode() | M_NO_SCROLL);
    00000031 CDr00r00         [24]   88 	call	_get_mode
    00000034 CB D7            [ 8]   89 	set	2, a
    00000036 CDr00r00         [24]   90 	call	_mode
                                     91 ;src/fonts.c:45: font_set(ibm_font);
    00000039 D1               [12]   92 	pop	de
    0000003A D5               [16]   93 	push	de
    0000003B D5               [16]   94 	push	de
    0000003C CDr00r00         [24]   95 	call	_font_set
    0000003F E1               [12]   96 	pop	hl
                                     97 ;src/fonts.c:48: printf("IBM Font #!?123\n");
    00000040 11rB9r00         [12]   98 	ld	de, #___str_8
    00000043 CDr00r00         [24]   99 	call	_puts
                                    100 ;src/fonts.c:51: font_set(italic_font);
    00000046 F8 02            [12]  101 	ldhl	sp,	#2
    00000048 2A               [ 8]  102 	ld	a, (hl+)
    00000049 5F               [ 4]  103 	ld	e, a
    0000004A 56               [ 8]  104 	ld	d, (hl)
    0000004B D5               [16]  105 	push	de
    0000004C CDr00r00         [24]  106 	call	_font_set
    0000004F E1               [12]  107 	pop	hl
                                    108 ;src/fonts.c:52: for (i=1; i!=5; i++) {
    00000050 01 01 00         [12]  109 	ld	bc, #0x0001
    00000053                        110 00102$:
                                    111 ;src/fonts.c:53: printf("In italics, line %u\n", i);
    00000053 C5               [16]  112 	push	bc
    00000054 C5               [16]  113 	push	bc
    00000055 11r88r00         [12]  114 	ld	de, #___str_4
    00000058 D5               [16]  115 	push	de
    00000059 CDr00r00         [24]  116 	call	_printf
    0000005C E8 04            [16]  117 	add	sp, #4
    0000005E C1               [12]  118 	pop	bc
                                    119 ;src/fonts.c:52: for (i=1; i!=5; i++) {
    0000005F 03               [ 8]  120 	inc	bc
    00000060 79               [ 4]  121 	ld	a, c
    00000061 D6 05            [ 8]  122 	sub	a, #0x05
    00000063 B0               [ 4]  123 	or	a, b
    00000064 20 ED            [12]  124 	jr	NZ, 00102$
                                    125 ;src/fonts.c:57: font_set(min_font);
    00000066 F8 04            [12]  126 	ldhl	sp,	#4
    00000068 2A               [ 8]  127 	ld	a, (hl+)
    00000069 5F               [ 4]  128 	ld	e, a
    0000006A 56               [ 8]  129 	ld	d, (hl)
    0000006B D5               [16]  130 	push	de
    0000006C CDr00r00         [24]  131 	call	_font_set
    0000006F E1               [12]  132 	pop	hl
                                    133 ;src/fonts.c:58: printf("Minimal 36 tile font\n");
    00000070 11r9Dr00         [12]  134 	ld	de, #___str_6
    00000073 CDr00r00         [24]  135 	call	_puts
                                    136 ;src/fonts.c:61: font_set(ibm_font);
    00000076 D1               [12]  137 	pop	de
    00000077 D5               [16]  138 	push	de
    00000078 D5               [16]  139 	push	de
    00000079 CDr00r00         [24]  140 	call	_font_set
    0000007C E1               [12]  141 	pop	hl
                                    142 ;src/fonts.c:62: printf("\nDone!");
    0000007D 11rB2r00         [12]  143 	ld	de, #___str_7
    00000080 D5               [16]  144 	push	de
    00000081 CDr00r00         [24]  145 	call	_printf
    00000084 E1               [12]  146 	pop	hl
                                    147 ;src/fonts.c:63: }
    00000085 E8 06            [16]  148 	add	sp, #6
    00000087 C9               [16]  149 	ret
    00000088                        150 ___str_4:
    00000088 49 6E 20 69 74 61 6C   151 	.ascii "In italics, line %u"
             69 63 73 2C 20 6C 69
             6E 65 20 25 75
    0000009B 0A                     152 	.db 0x0a
    0000009C 00                     153 	.db 0x00
    0000009D                        154 ___str_6:
    0000009D 4D 69 6E 69 6D 61 6C   155 	.ascii "Minimal 36 tile font"
             20 33 36 20 74 69 6C
             65 20 66 6F 6E 74
    000000B1 00                     156 	.db 0x00
    000000B2                        157 ___str_7:
    000000B2 0A                     158 	.db 0x0a
    000000B3 44 6F 6E 65 21         159 	.ascii "Done!"
    000000B8 00                     160 	.db 0x00
    000000B9                        161 ___str_8:
    000000B9 46 6F 6E 74 20 64 65   162 	.ascii "Font demo."
             6D 6F 2E
    000000C3 0A                     163 	.db 0x0a
    000000C4 0A                     164 	.db 0x0a
    000000C5 49 42 4D 20 46 6F 6E   165 	.ascii "IBM Font #!?123"
             74 20 23 21 3F 31 32
             33
    000000D4 00                     166 	.db 0x00
                                    167 	.area _CODE
                                    168 	.area _INITIALIZER
                                    169 	.area _CABS (ABS)
