                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module player
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl b_UpdatePlayer
                                     11 	.globl _UpdatePlayer
                                     12 	.globl _DrawPlayer
                                     13 	.globl b_SetupPlayer
                                     14 	.globl _SetupPlayer
                                     15 	.globl _SetPlayerPalettes
                                     16 	.globl _UpdatePlayerVRAMTiles
                                     17 	.globl _IsTileSolid
                                     18 	.globl _set_sprite_native_data
                                     19 	.globl _set_palette
                                     20 	.globl _threeFrameCounter
                                     21 	.globl _playerJumpIncrease
                                     22 	.globl _facingRight
                                     23 	.globl _playerYVelocity
                                     24 	.globl _playerXVelocity
                                     25 	.globl _playerY
                                     26 	.globl _playerX
                                     27 	.globl _PlayerPalettesGGSMS
                                     28 	.globl _baseProp
                                     29 ;--------------------------------------------------------
                                     30 ; special function registers
                                     31 ;--------------------------------------------------------
                         00000000    32 _GG_STATE	=	0x0000
                         00000001    33 _GG_EXT_7BIT	=	0x0001
                         00000002    34 _GG_EXT_CTL	=	0x0002
                         00000003    35 _GG_SIO_SEND	=	0x0003
                         00000004    36 _GG_SIO_RECV	=	0x0004
                         00000005    37 _GG_SIO_CTL	=	0x0005
                         00000006    38 _GG_SOUND_PAN	=	0x0006
                         0000003E    39 _MEMORY_CTL	=	0x003e
                         0000003F    40 _JOY_CTL	=	0x003f
                         0000007E    41 _VCOUNTER	=	0x007e
                         0000007F    42 _PSG	=	0x007f
                         0000007F    43 _HCOUNTER	=	0x007f
                         000000BE    44 _VDP_DATA	=	0x00be
                         000000BF    45 _VDP_CMD	=	0x00bf
                         000000BF    46 _VDP_STATUS	=	0x00bf
                         000000DC    47 _JOY_PORT1	=	0x00dc
                         000000DD    48 _JOY_PORT2	=	0x00dd
                         000000F0    49 _FMADDRESS	=	0x00f0
                         000000F1    50 _FMDATA	=	0x00f1
                         000000F2    51 _AUDIOCTRL	=	0x00f2
                                     52 ;--------------------------------------------------------
                                     53 ; ram data
                                     54 ;--------------------------------------------------------
                                     55 	.area _DATA
                         0000FFFC    56 _RAM_CONTROL	=	0xfffc
                         0000FFF8    57 _GLASSES_3D	=	0xfff8
                         0000FFFD    58 _MAP_FRAME0	=	0xfffd
                         0000FFFE    59 _MAP_FRAME1	=	0xfffe
                         0000FFFF    60 _MAP_FRAME2	=	0xffff
    00000000                         61 _playerX::
    00000000                         62 	.ds 2
    00000002                         63 _playerY::
    00000002                         64 	.ds 2
    00000004                         65 _playerXVelocity::
    00000004                         66 	.ds 2
    00000006                         67 _playerYVelocity::
    00000006                         68 	.ds 2
                                     69 ;--------------------------------------------------------
                                     70 ; ram data
                                     71 ;--------------------------------------------------------
                                     72 	.area _INITIALIZED
    00000000                         73 _facingRight::
    00000000                         74 	.ds 1
    00000001                         75 _playerJumpIncrease::
    00000001                         76 	.ds 1
    00000002                         77 _threeFrameCounter::
    00000002                         78 	.ds 1
                                     79 ;--------------------------------------------------------
                                     80 ; absolute external ram data
                                     81 ;--------------------------------------------------------
                                     82 	.area _DABS (ABS)
                                     83 ;--------------------------------------------------------
                                     84 ; global & static initialisations
                                     85 ;--------------------------------------------------------
                                     86 	.area _HOME
                                     87 	.area _GSINIT
                                     88 	.area _GSFINAL
                                     89 	.area _GSINIT
                                     90 ;--------------------------------------------------------
                                     91 ; Home
                                     92 ;--------------------------------------------------------
                                     93 	.area _HOME
                                     94 ;src/player.c:67: void UpdatePlayerVRAMTiles(void) NONBANKED{
                                     95 ;	---------------------------------
                                     96 ; Function UpdatePlayerVRAMTiles
                                     97 ; ---------------------------------
    00000000                         98 _UpdatePlayerVRAMTiles::
                                     99 ;src/player.c:68: uint8_t _previous_bank = CURRENT_BANK;
    00000000 3A FE FF         [13]  100 	ld	a, (_MAP_FRAME1)
    00000003 4F               [ 4]  101 	ld	c, a
                                    102 ;src/player.c:71: SWITCH_ROM(BANK(PlayerCharacterSprites));
    00000004 21 FE FF         [10]  103 	ld	hl, #_MAP_FRAME1
    00000007 36r00            [10]  104 	ld	(hl), #<(___bank_PlayerCharacterSprites)
                                    105 ;src/player.c:73: set_player_sprite_data (0,PlayerCharacterSprites_TILE_COUNT,PlayerCharacterSprites_tiles);
    00000009 C5               [11]  106 	push	bc
    0000000A 21r00r00         [10]  107 	ld	hl, #_PlayerCharacterSprites_tiles
    0000000D E5               [11]  108 	push	hl
    0000000E 11 7C 00         [10]  109 	ld	de, #0x007c
    00000011 AF               [ 4]  110 	xor	a, a
    00000012 CDr00r00         [17]  111 	call	_set_sprite_native_data
    00000015 C1               [10]  112 	pop	bc
                                    113 ;src/player.c:75: SWITCH_ROM(_previous_bank);
    00000016 21 FE FF         [10]  114 	ld	hl, #_MAP_FRAME1
    00000019 71               [ 7]  115 	ld	(hl), c
                                    116 ;src/player.c:76: }
    0000001A C9               [10]  117 	ret
    0000001B                        118 _baseProp:
    0000001B 00                     119 	.db #0x00	; 0
    0000001C                        120 _PlayerPalettesGGSMS:
    0000001C 8F 04                  121 	.dw #0x048f
    0000001E FF 0F                  122 	.dw #0x0fff
    00000020 AA 0A                  123 	.dw #0x0aaa
    00000022 00 00                  124 	.dw #0x0000
    00000024 08 00                  125 	.dw #0x0008
    00000026 70 00                  126 	.dw #0x0070
    00000028 10 0A                  127 	.dw #0x0a10
    0000002A 87 00                  128 	.dw #0x0087
    0000002C 80 06                  129 	.dw #0x0680
    0000002E 04 05                  130 	.dw #0x0504
    00000030 0F 00                  131 	.dw #0x000f
    00000032 F2 00                  132 	.dw #0x00f2
    00000034 20 0F                  133 	.dw #0x0f20
    00000036 EF 00                  134 	.dw #0x00ef
    00000038 E0 0F                  135 	.dw #0x0fe0
    0000003A 8F 0F                  136 	.dw #0x0f8f
                                    137 ;src/player.c:78: void SetPlayerPalettes(void) NONBANKED{
                                    138 ;	---------------------------------
                                    139 ; Function SetPlayerPalettes
                                    140 ; ---------------------------------
    0000003C                        141 _SetPlayerPalettes::
                                    142 ;src/player.c:79: uint8_t _previous_bank = CURRENT_BANK;
    0000003C 3A FE FF         [13]  143 	ld	a, (_MAP_FRAME1)
    0000003F 4F               [ 4]  144 	ld	c, a
                                    145 ;src/player.c:81: SWITCH_ROM(PLAYER_PALETTES_BANK);
                                    146 ;src/player.c:85: set_sprite_palette(baseProp, 1, PLAYER_PALETTES);
    00000040 C5               [11]  147 	push	bc
    00000041 21r1Cr00         [10]  148 	ld	hl, #_PlayerPalettesGGSMS
    00000044 E5               [11]  149 	push	hl
    00000045 21 01 01         [10]  150 	ld	hl, #0x101
    00000048 E5               [11]  151 	push	hl
    00000049 CDr00r00         [17]  152 	call	_set_palette
    0000004C C1               [10]  153 	pop	bc
                                    154 ;src/player.c:95: SWITCH_ROM(_previous_bank);
    0000004D 21 FE FF         [10]  155 	ld	hl, #_MAP_FRAME1
    00000050 71               [ 7]  156 	ld	(hl), c
                                    157 ;src/player.c:96: }
    00000051 C9               [10]  158 	ret
                                    159 ;src/player.c:116: uint8_t DrawPlayer(uint16_t playerRealX, uint16_t playerRealY, uint8_t frame) NONBANKED{
                                    160 ;	---------------------------------
                                    161 ; Function DrawPlayer
                                    162 ; ---------------------------------
    00000052                        163 _DrawPlayer::
    00000052 DD E5            [15]  164 	push	ix
    00000054 DD 21 00 00      [14]  165 	ld	ix,#0
    00000058 DD 39            [15]  166 	add	ix,sp
    0000005A 3B               [ 6]  167 	dec	sp
    0000005B 4D               [ 4]  168 	ld	c, l
    0000005C 44               [ 4]  169 	ld	b, h
                                    170 ;src/player.c:119: uint8_t _previous_bank = CURRENT_BANK;
    0000005D 3A FE FF         [13]  171 	ld	a, (_MAP_FRAME1+0)
    00000060 DD 77 FF         [19]  172 	ld	-1 (ix), a
                                    173 ;src/player.c:123: uint16_t playerCameraX = (playerRealX-camera_x)+DEVICE_SPRITE_PX_OFFSET_X;
    00000063 21r00r00         [10]  174 	ld	hl, #_camera_x
    00000066 79               [ 4]  175 	ld	a, c
    00000067 96               [ 7]  176 	sub	a, (hl)
    00000068 23               [ 6]  177 	inc	hl
    00000069 4F               [ 4]  178 	ld	c, a
    0000006A 78               [ 4]  179 	ld	a, b
    0000006B 9E               [ 7]  180 	sbc	a, (hl)
    0000006C 47               [ 4]  181 	ld	b, a
    0000006D 21 30 00         [10]  182 	ld	hl, #0x0030
    00000070 09               [11]  183 	add	hl, bc
    00000071 4D               [ 4]  184 	ld	c, l
    00000072 44               [ 4]  185 	ld	b, h
                                    186 ;src/player.c:124: uint16_t playerCameraY= (playerRealY)+DEVICE_SPRITE_PX_OFFSET_Y;
    00000073 21 17 00         [10]  187 	ld	hl, #0x0017
    00000076 19               [11]  188 	add	hl, de
    00000077 EB               [ 4]  189 	ex	de, hl
                                    190 ;src/player.c:126: SWITCH_ROM(BANK(PlayerCharacterSprites));
    00000078 21 FE FF         [10]  191 	ld	hl, #_MAP_FRAME1
    0000007B 36r00            [10]  192 	ld	(hl), #<(___bank_PlayerCharacterSprites)
                                    193 ;src/player.c:128: spritesUsed = move_metasprite_ex(PlayerCharacterSprites_metasprites[frame],0,baseProp,0,playerCameraX,playerCameraY);
    0000007D DD 6E 04         [19]  194 	ld	l, 4 (ix)
    00000080 26 00            [ 7]  195 	ld	h, #0x00
    00000082 29               [11]  196 	add	hl, hl
    00000083 D5               [11]  197 	push	de
    00000084 11r00r00         [10]  198 	ld	de, #_PlayerCharacterSprites_metasprites
    00000087 19               [11]  199 	add	hl, de
    00000088 D1               [10]  200 	pop	de
    00000089 7E               [ 7]  201 	ld	a, (hl)
    0000008A 23               [ 6]  202 	inc	hl
    0000008B 66               [ 7]  203 	ld	h, (hl)
    0000008C 6F               [ 4]  204 	ld	l, a
                                    205 ;../../../include/sms/metasprites.h:83: __current_metasprite = metasprite;
    0000008D 22r00r00         [16]  206 	ld	(___current_metasprite), hl
                                    207 ;../../../include/sms/metasprites.h:84: __current_base_tile = base_tile;
    00000090 AF               [ 4]  208 	xor	a, a
    00000091 32r00r00         [13]  209 	ld	(___current_base_tile+0), a
                                    210 ;../../../include/sms/metasprites.h:85: return __move_metasprite(base_sprite, x, y);
    00000094 D5               [11]  211 	push	de
    00000095 59               [ 4]  212 	ld	e, c
    00000096 50               [ 4]  213 	ld	d, b
    00000097 AF               [ 4]  214 	xor	a, a
    00000098 CDr00r00         [17]  215 	call	___move_metasprite
    0000009B 4F               [ 4]  216 	ld	c, a
                                    217 ;src/player.c:130: SWITCH_ROM(_previous_bank);
    0000009C DD 7E FF         [19]  218 	ld	a, -1 (ix)
    0000009F 32 FE FF         [13]  219 	ld	(_MAP_FRAME1+0), a
                                    220 ;src/player.c:132: return spritesUsed;
    000000A2 79               [ 4]  221 	ld	a, c
                                    222 ;src/player.c:133: }
    000000A3 33               [ 6]  223 	inc	sp
    000000A4 DD E1            [14]  224 	pop	ix
    000000A6 E1               [10]  225 	pop	hl
    000000A7 33               [ 6]  226 	inc	sp
    000000A8 E9               [ 4]  227 	jp	(hl)
                                    228 	.area _HOME
                                    229 ;--------------------------------------------------------
                                    230 ; code
                                    231 ;--------------------------------------------------------
                                    232 	.area _CODE_255
                                    233 ;src/player.c:98: void SetupPlayer(void) BANKED{
                                    234 ;	---------------------------------
                                    235 ; Function SetupPlayer
                                    236 ; ---------------------------------
                         000000FF   237 	b_SetupPlayer	= 255
    00000000                        238 _SetupPlayer::
                                    239 ;src/player.c:102: playerX=40<<4;
    00000000 21 80 02         [10]  240 	ld	hl, #0x0280
    00000003 22r00r00         [16]  241 	ld	(_playerX), hl
                                    242 ;src/player.c:103: playerY=40<<4;
    00000006 22r02r00         [16]  243 	ld	(_playerY), hl
                                    244 ;src/player.c:105: playerXVelocity=0;
    00000009 21 00 00         [10]  245 	ld	hl, #0x0000
    0000000C 22r04r00         [16]  246 	ld	(_playerXVelocity), hl
                                    247 ;src/player.c:106: playerYVelocity=0;
    0000000F 22r06r00         [16]  248 	ld	(_playerYVelocity), hl
                                    249 ;src/player.c:108: UpdatePlayerVRAMTiles();
    00000012 CDr00r00         [17]  250 	call	_UpdatePlayerVRAMTiles
                                    251 ;src/player.c:111: SetPlayerPalettes();
                                    252 ;src/player.c:114: }
    00000015 C3r3Cr00         [10]  253 	jp	_SetPlayerPalettes
                                    254 ;src/player.c:135: uint8_t UpdatePlayer(void) BANKED{
                                    255 ;	---------------------------------
                                    256 ; Function UpdatePlayer
                                    257 ; ---------------------------------
                         000000FF   258 	b_UpdatePlayer	= 255
    00000018                        259 _UpdatePlayer::
    00000018 DD E5            [15]  260 	push	ix
    0000001A DD 21 00 00      [14]  261 	ld	ix,#0
    0000001E DD 39            [15]  262 	add	ix,sp
    00000020 21 F5 FF         [10]  263 	ld	hl, #-11
    00000023 39               [11]  264 	add	hl, sp
    00000024 F9               [ 6]  265 	ld	sp, hl
                                    266 ;src/player.c:139: int16_t moveSpeed = (joypadCurrent & J_B) ?PLAYER_CHARACTER_RUN_VELOCITY:PLAYER_CHARACTER_WALK_VELOCITY;
    00000025 3Ar00r00         [13]  267 	ld	a, (_joypadCurrent+0)
    00000028 DD 77 FB         [19]  268 	ld	-5 (ix), a
    0000002B E6 10            [ 7]  269 	and	a, #0x10
    0000002D 28 05            [12]  270 	jr	Z, 00191$
    0000002F 11 A9 01         [10]  271 	ld	de, #0x01a9
    00000032 18 03            [12]  272 	jr	00192$
    00000034                        273 00191$:
    00000034 11 45 01         [10]  274 	ld	de, #0x0145
    00000037                        275 00192$:
                                    276 ;src/player.c:140: uint8_t threeFrameCounterSpeed = (joypadCurrent & J_B) ? PLAYER_CHARACTER_RUN_TWO_FRAME_COUNTER : PLAYER_CHARACTER_WALK_TWO_FRAME_COUNTER;
    00000037 B7               [ 4]  277 	or	a, a
    00000038 3E 05            [ 7]  278 	ld	a, #0x05
    0000003A 20 02            [12]  279 	jr	NZ, 00194$
    0000003C 3E 03            [ 7]  280 	ld	a, #0x03
    0000003E                        281 00194$:
                                    282 ;src/player.c:142: threeFrameCounter+=threeFrameCounterSpeed;
    0000003E 21r02r00         [10]  283 	ld	hl, #_threeFrameCounter
    00000041 86               [ 7]  284 	add	a, (hl)
    00000042 77               [ 7]  285 	ld	(hl), a
                                    286 ;src/player.c:143: uint8_t threeFrameCounterValue = threeFrameCounter>>4;
    00000043 3Ar02r00         [13]  287 	ld	a, (_threeFrameCounter+0)
    00000046 07               [ 4]  288 	rlca
    00000047 07               [ 4]  289 	rlca
    00000048 07               [ 4]  290 	rlca
    00000049 07               [ 4]  291 	rlca
    0000004A E6 0F            [ 7]  292 	and	a, #0x0f
                                    293 ;src/player.c:144: if(threeFrameCounterValue>=3){
    0000004C DD 77 F5         [19]  294 	ld	-11 (ix), a
    0000004F D6 03            [ 7]  295 	sub	a, #0x03
    00000051 38 08            [12]  296 	jr	C, 00102$
                                    297 ;src/player.c:145: threeFrameCounter=0;
    00000053 AF               [ 4]  298 	xor	a, a
    00000054 32r02r00         [13]  299 	ld	(_threeFrameCounter+0), a
                                    300 ;src/player.c:146: threeFrameCounterValue=0;
    00000057 DD 36 F5 00      [19]  301 	ld	-11 (ix), #0x00
    0000005B                        302 00102$:
                                    303 ;src/player.c:149: uint8_t turning = FALSE;
    0000005B DD 36 F6 00      [19]  304 	ld	-10 (ix), #0x00
                                    305 ;src/player.c:154: if(playerXVelocity<0){
    0000005F ED 4Br04r00      [20]  306 	ld	bc, (_playerXVelocity)
    00000063 78               [ 4]  307 	ld	a, b
    00000064 07               [ 4]  308 	rlca
    00000065 E6 01            [ 7]  309 	and	a,#0x01
    00000067 DD 77 FC         [19]  310 	ld	-4 (ix), a
                                    311 ;src/player.c:157: playerXVelocity+=GROUND_FRICTION;
    0000006A 21 0F 00         [10]  312 	ld	hl, #0x000f
    0000006D 09               [11]  313 	add	hl, bc
    0000006E DD 75 FD         [19]  314 	ld	-3 (ix), l
    00000071 DD 74 FE         [19]  315 	ld	-2 (ix), h
                                    316 ;src/player.c:151: if(joypadCurrent &J_RIGHT){
    00000074 DD CB FB 5E      [20]  317 	bit	3, -5 (ix)
    00000078 28 34            [12]  318 	jr	Z, 00134$
                                    319 ;src/player.c:154: if(playerXVelocity<0){
    0000007A DD 7E FC         [19]  320 	ld	a, -4 (ix)
    0000007D B7               [ 4]  321 	or	a, a
    0000007E 28 1C            [12]  322 	jr	Z, 00109$
                                    323 ;src/player.c:157: playerXVelocity+=GROUND_FRICTION;
    00000080 DD 6E FD         [19]  324 	ld	l, -3 (ix)
    00000083 DD 66 FE         [19]  325 	ld	h, -2 (ix)
                                    326 ;src/player.c:160: if(playerXVelocity<0)turning=TRUE;
    00000086 22r04r00         [16]  327 	ld	(_playerXVelocity), hl
    00000089 CB 7C            [ 8]  328 	bit	7, h
    0000008B 28 07            [12]  329 	jr	Z, 00104$
    0000008D DD 36 F6 01      [19]  330 	ld	-10 (ix), #0x01
    00000091 C3r2Ar01         [10]  331 	jp	00135$
    00000094                        332 00104$:
                                    333 ;src/player.c:163: facingRight=TRUE;
    00000094 21r00r00         [10]  334 	ld	hl, #_facingRight
    00000097 36 01            [10]  335 	ld	(hl), #0x01
    00000099 C3r2Ar01         [10]  336 	jp	00135$
    0000009C                        337 00109$:
                                    338 ;src/player.c:166: playerXVelocity=moveSpeed;
    0000009C ED 53r04r00      [20]  339 	ld	(_playerXVelocity), de
                                    340 ;src/player.c:169: if(!facingRight){
    000000A0 3Ar00r00         [13]  341 	ld	a, (_facingRight+0)
    000000A3 B7               [ 4]  342 	or	a, a
    000000A4 C2r2Ar01         [10]  343 	jp	NZ, 00135$
                                    344 ;src/player.c:170: facingRight=TRUE;
    000000A7 21r00r00         [10]  345 	ld	hl, #_facingRight
    000000AA 36 01            [10]  346 	ld	(hl), #0x01
    000000AC 18 7C            [12]  347 	jr	00135$
    000000AE                        348 00134$:
                                    349 ;src/player.c:177: if(playerXVelocity>0){
    000000AE AF               [ 4]  350 	xor	a, a
    000000AF B9               [ 4]  351 	cp	a, c
    000000B0 98               [ 4]  352 	sbc	a, b
    000000B1 E2rB6r00         [10]  353 	jp	PO, 00532$
    000000B4 EE 80            [ 7]  354 	xor	a, #0x80
    000000B6                        355 00532$:
    000000B6 07               [ 4]  356 	rlca
    000000B7 E6 01            [ 7]  357 	and	a,#0x01
    000000B9 DD 77 FF         [19]  358 	ld	-1 (ix), a
                                    359 ;src/player.c:180: playerXVelocity-=GROUND_FRICTION;
    000000BC 79               [ 4]  360 	ld	a, c
    000000BD C6 F1            [ 7]  361 	add	a, #0xf1
    000000BF 6F               [ 4]  362 	ld	l, a
    000000C0 78               [ 4]  363 	ld	a, b
    000000C1 CE FF            [ 7]  364 	adc	a, #0xff
    000000C3 67               [ 4]  365 	ld	h, a
                                    366 ;src/player.c:174: }else if(joypadCurrent &J_LEFT){
    000000C4 DD CB FB 56      [20]  367 	bit	2, -5 (ix)
    000000C8 28 36            [12]  368 	jr	Z, 00131$
                                    369 ;src/player.c:177: if(playerXVelocity>0){
    000000CA DD 7E FF         [19]  370 	ld	a, -1 (ix)
    000000CD B7               [ 4]  371 	or	a, a
    000000CE 28 1A            [12]  372 	jr	Z, 00117$
                                    373 ;src/player.c:180: playerXVelocity-=GROUND_FRICTION;
                                    374 ;src/player.c:183: if(playerXVelocity>0)turning=TRUE;
    000000D0 22r04r00         [16]  375 	ld	(_playerXVelocity), hl
    000000D3 AF               [ 4]  376 	xor	a, a
    000000D4 BD               [ 4]  377 	cp	a, l
    000000D5 9C               [ 4]  378 	sbc	a, h
    000000D6 E2rDBr00         [10]  379 	jp	PO, 00534$
    000000D9 EE 80            [ 7]  380 	xor	a, #0x80
    000000DB                        381 00534$:
    000000DB F2rE4r00         [10]  382 	jp	P, 00112$
    000000DE DD 36 F6 01      [19]  383 	ld	-10 (ix), #0x01
    000000E2 18 46            [12]  384 	jr	00135$
    000000E4                        385 00112$:
                                    386 ;src/player.c:186: facingRight=FALSE;
    000000E4 AF               [ 4]  387 	xor	a, a
    000000E5 32r00r00         [13]  388 	ld	(_facingRight+0), a
    000000E8 18 40            [12]  389 	jr	00135$
    000000EA                        390 00117$:
                                    391 ;src/player.c:190: playerXVelocity=-moveSpeed;
    000000EA 21r04r00         [10]  392 	ld	hl, #_playerXVelocity
    000000ED AF               [ 4]  393 	xor	a, a
    000000EE 93               [ 4]  394 	sub	a, e
    000000EF 77               [ 7]  395 	ld	(hl), a
    000000F0 23               [ 6]  396 	inc	hl
    000000F1 9F               [ 4]  397 	sbc	a, a
    000000F2 92               [ 4]  398 	sub	a, d
    000000F3 77               [ 7]  399 	ld	(hl), a
                                    400 ;src/player.c:193: if(facingRight){
    000000F4 3Ar00r00         [13]  401 	ld	a, (_facingRight+0)
    000000F7 B7               [ 4]  402 	or	a, a
    000000F8 28 30            [12]  403 	jr	Z, 00135$
                                    404 ;src/player.c:194: facingRight=FALSE;
    000000FA AF               [ 4]  405 	xor	a, a
    000000FB 32r00r00         [13]  406 	ld	(_facingRight+0), a
    000000FE 18 2A            [12]  407 	jr	00135$
    00000100                        408 00131$:
                                    409 ;src/player.c:203: if (playerXVelocity > 0) {
    00000100 DD 7E FF         [19]  410 	ld	a, -1 (ix)
    00000103 B7               [ 4]  411 	or	a, a
    00000104 28 15            [12]  412 	jr	Z, 00128$
                                    413 ;src/player.c:204: if (playerXVelocity >= GROUND_FRICTION) playerXVelocity -= GROUND_FRICTION;
    00000106 79               [ 4]  414 	ld	a, c
    00000107 D6 0F            [ 7]  415 	sub	a, #0x0f
    00000109 78               [ 4]  416 	ld	a, b
    0000010A DE 00            [ 7]  417 	sbc	a, #0x00
    0000010C 38 05            [12]  418 	jr	C, 00120$
    0000010E 22r04r00         [16]  419 	ld	(_playerXVelocity), hl
    00000111 18 17            [12]  420 	jr	00135$
    00000113                        421 00120$:
                                    422 ;src/player.c:205: else playerXVelocity=0;
    00000113 21 00 00         [10]  423 	ld	hl, #0x0000
    00000116 22r04r00         [16]  424 	ld	(_playerXVelocity), hl
    00000119 18 0F            [12]  425 	jr	00135$
    0000011B                        426 00128$:
                                    427 ;src/player.c:207: else if (playerXVelocity < 0) {
    0000011B DD 7E FC         [19]  428 	ld	a, -4 (ix)
    0000011E B7               [ 4]  429 	or	a, a
    0000011F 28 09            [12]  430 	jr	Z, 00135$
                                    431 ;src/player.c:208: if (playerXVelocity <= GROUND_FRICTION) playerXVelocity += GROUND_FRICTION;
    00000121 DD 6E FD         [19]  432 	ld	l, -3 (ix)
    00000124 DD 66 FE         [19]  433 	ld	h, -2 (ix)
    00000127 22r04r00         [16]  434 	ld	(_playerXVelocity), hl
                                    435 ;src/player.c:209: else playerXVelocity=0;
    0000012A                        436 00135$:
                                    437 ;src/player.c:213: uint16_t playerRealX = playerX>>4;
    0000012A 2Ar00r00         [16]  438 	ld	hl, (_playerX)
    0000012D CB 3C            [ 8]  439 	srl	h
    0000012F CB 1D            [ 8]  440 	rr	l
    00000131 CB 3C            [ 8]  441 	srl	h
    00000133 CB 1D            [ 8]  442 	rr	l
    00000135 CB 3C            [ 8]  443 	srl	h
    00000137 CB 1D            [ 8]  444 	rr	l
    00000139 CB 3C            [ 8]  445 	srl	h
    0000013B CB 1D            [ 8]  446 	rr	l
                                    447 ;src/player.c:214: uint16_t playerRealY = playerY>>4;
    0000013D ED 4Br02r00      [20]  448 	ld	bc, (_playerY)
    00000141 CB 38            [ 8]  449 	srl	b
    00000143 CB 19            [ 8]  450 	rr	c
    00000145 CB 38            [ 8]  451 	srl	b
    00000147 CB 19            [ 8]  452 	rr	c
    00000149 CB 38            [ 8]  453 	srl	b
    0000014B CB 19            [ 8]  454 	rr	c
    0000014D CB 38            [ 8]  455 	srl	b
    0000014F CB 19            [ 8]  456 	rr	c
                                    457 ;src/player.c:216: uint8_t grounded = FALSE;
    00000151 DD 36 F7 00      [19]  458 	ld	-9 (ix), #0x00
                                    459 ;src/player.c:223: if(playerRealY<DEVICE_SCREEN_PX_HEIGHT){
    00000155 79               [ 4]  460 	ld	a, c
    00000156 D6 90            [ 7]  461 	sub	a, #0x90
    00000158 78               [ 4]  462 	ld	a, b
    00000159 DE 00            [ 7]  463 	sbc	a, #0x00
    0000015B 30 34            [12]  464 	jr	NC, 00140$
                                    465 ;src/player.c:226: while(IsTileSolid(playerRealX,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-1)){
    0000015D                        466 00136$:
    0000015D 79               [ 4]  467 	ld	a, c
    0000015E 50               [ 4]  468 	ld	d, b
    0000015F C6 17            [ 7]  469 	add	a, #0x17
    00000161 5F               [ 4]  470 	ld	e, a
    00000162 30 01            [12]  471 	jr	NC, 00535$
    00000164 14               [ 4]  472 	inc	d
    00000165                        473 00535$:
    00000165 E5               [11]  474 	push	hl
    00000166 C5               [11]  475 	push	bc
    00000167 CDr00r00         [17]  476 	call	_IsTileSolid
    0000016A C1               [10]  477 	pop	bc
    0000016B E1               [10]  478 	pop	hl
    0000016C B7               [ 4]  479 	or	a, a
    0000016D 28 22            [12]  480 	jr	Z, 00140$
                                    481 ;src/player.c:227: playerY-=16;
    0000016F ED 4Br02r00      [20]  482 	ld	bc, (_playerY)
    00000173 79               [ 4]  483 	ld	a, c
    00000174 C6 F0            [ 7]  484 	add	a, #0xf0
    00000176 4F               [ 4]  485 	ld	c, a
    00000177 78               [ 4]  486 	ld	a, b
    00000178 CE FF            [ 7]  487 	adc	a, #0xff
    0000017A 47               [ 4]  488 	ld	b, a
                                    489 ;src/player.c:228: playerRealY = playerY>>4;
    0000017B ED 43r02r00      [20]  490 	ld	(_playerY),bc
    0000017F CB 38            [ 8]  491 	srl	b
    00000181 CB 19            [ 8]  492 	rr	c
    00000183 CB 38            [ 8]  493 	srl	b
    00000185 CB 19            [ 8]  494 	rr	c
    00000187 CB 38            [ 8]  495 	srl	b
    00000189 CB 19            [ 8]  496 	rr	c
    0000018B CB 38            [ 8]  497 	srl	b
    0000018D CB 19            [ 8]  498 	rr	c
    0000018F 18 CC            [12]  499 	jr	00136$
    00000191                        500 00140$:
                                    501 ;src/player.c:226: while(IsTileSolid(playerRealX,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-1)){
    00000191 DD 71 FA         [19]  502 	ld	-6 (ix), c
    00000194 DD 70 FB         [19]  503 	ld	-5 (ix), b
                                    504 ;src/player.c:249: if(IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    00000197 DD 75 FC         [19]  505 	ld	-4 (ix), l
    0000019A DD 74 FD         [19]  506 	ld	-3 (ix), h
                                    507 ;src/player.c:242: if(playerXVelocity!=0){
    0000019D 3Ar05r00         [13]  508 	ld	a, (_playerXVelocity+1)
    000001A0 21r04r00         [10]  509 	ld	hl, #_playerXVelocity
    000001A3 B6               [ 7]  510 	or	a, (hl)
    000001A4 CAr57r02         [10]  511 	jp	Z, 00155$
                                    512 ;src/player.c:245: if(playerXVelocity>0){
    000001A7 2Ar04r00         [16]  513 	ld	hl, (_playerXVelocity)
                                    514 ;src/player.c:249: if(IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    000001AA DD 5E FA         [19]  515 	ld	e, -6 (ix)
    000001AD DD 56 FB         [19]  516 	ld	d, -5 (ix)
    000001B0 13               [ 6]  517 	inc	de
    000001B1 13               [ 6]  518 	inc	de
    000001B2 FD 21 0C 00      [14]  519 	ld	iy, #0x000c
    000001B6 C5               [11]  520 	push	bc
    000001B7 DD 4E FA         [19]  521 	ld	c, -6 (ix)
    000001BA DD 46 FB         [19]  522 	ld	b, -5 (ix)
    000001BD FD 09            [15]  523 	add	iy, bc
    000001BF C1               [10]  524 	pop	bc
    000001C0 DD 7E FA         [19]  525 	ld	a, -6 (ix)
    000001C3 C6 16            [ 7]  526 	add	a, #0x16
    000001C5 DD 77 FE         [19]  527 	ld	-2 (ix), a
    000001C8 DD 7E FB         [19]  528 	ld	a, -5 (ix)
    000001CB CE 00            [ 7]  529 	adc	a, #0x00
    000001CD DD 77 FF         [19]  530 	ld	-1 (ix), a
                                    531 ;src/player.c:245: if(playerXVelocity>0){
    000001D0 AF               [ 4]  532 	xor	a, a
    000001D1 BD               [ 4]  533 	cp	a, l
    000001D2 9C               [ 4]  534 	sbc	a, h
    000001D3 E2rD8r01         [10]  535 	jp	PO, 00536$
    000001D6 EE 80            [ 7]  536 	xor	a, #0x80
    000001D8                        537 00536$:
    000001D8 F2r18r02         [10]  538 	jp	P, 00152$
                                    539 ;src/player.c:249: if(IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    000001DB DD 7E FC         [19]  540 	ld	a, -4 (ix)
    000001DE C6 05            [ 7]  541 	add	a, #0x05
    000001E0 6F               [ 4]  542 	ld	l, a
    000001E1 DD 7E FD         [19]  543 	ld	a, -3 (ix)
    000001E4 CE 00            [ 7]  544 	adc	a, #0x00
    000001E6 67               [ 4]  545 	ld	h, a
    000001E7 E5               [11]  546 	push	hl
    000001E8 C5               [11]  547 	push	bc
    000001E9 FD E5            [15]  548 	push	iy
    000001EB CDr00r00         [17]  549 	call	_IsTileSolid
    000001EE FD E1            [14]  550 	pop	iy
    000001F0 C1               [10]  551 	pop	bc
    000001F1 E1               [10]  552 	pop	hl
    000001F2 B7               [ 4]  553 	or	a, a
    000001F3 20 1B            [12]  554 	jr	NZ, 00141$
    000001F5 E5               [11]  555 	push	hl
    000001F6 C5               [11]  556 	push	bc
    000001F7 FD E5            [15]  557 	push	iy
    000001F9 D1               [10]  558 	pop	de
    000001FA CDr00r00         [17]  559 	call	_IsTileSolid
    000001FD C1               [10]  560 	pop	bc
    000001FE E1               [10]  561 	pop	hl
    000001FF B7               [ 4]  562 	or	a, a
    00000200 20 0E            [12]  563 	jr	NZ, 00141$
    00000202 C5               [11]  564 	push	bc
    00000203 DD 5E FE         [19]  565 	ld	e, -2 (ix)
    00000206 DD 56 FF         [19]  566 	ld	d, -1 (ix)
    00000209 CDr00r00         [17]  567 	call	_IsTileSolid
    0000020C C1               [10]  568 	pop	bc
    0000020D B7               [ 4]  569 	or	a, a
    0000020E 28 47            [12]  570 	jr	Z, 00155$
    00000210                        571 00141$:
    00000210 21 00 00         [10]  572 	ld	hl, #0x0000
    00000213 22r04r00         [16]  573 	ld	(_playerXVelocity), hl
    00000216 18 3F            [12]  574 	jr	00155$
    00000218                        575 00152$:
                                    576 ;src/player.c:252: }else if(playerXVelocity<0){
    00000218 CB 7C            [ 8]  577 	bit	7, h
    0000021A 28 3B            [12]  578 	jr	Z, 00155$
                                    579 ;src/player.c:256: if(IsTileSolid(playerRealX-PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX-PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX-PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    0000021C DD 7E FC         [19]  580 	ld	a, -4 (ix)
    0000021F C6 FB            [ 7]  581 	add	a, #0xfb
    00000221 6F               [ 4]  582 	ld	l, a
    00000222 DD 7E FD         [19]  583 	ld	a, -3 (ix)
    00000225 CE FF            [ 7]  584 	adc	a, #0xff
    00000227 67               [ 4]  585 	ld	h, a
    00000228 E5               [11]  586 	push	hl
    00000229 C5               [11]  587 	push	bc
    0000022A FD E5            [15]  588 	push	iy
    0000022C CDr00r00         [17]  589 	call	_IsTileSolid
    0000022F FD E1            [14]  590 	pop	iy
    00000231 C1               [10]  591 	pop	bc
    00000232 E1               [10]  592 	pop	hl
    00000233 B7               [ 4]  593 	or	a, a
    00000234 20 1B            [12]  594 	jr	NZ, 00145$
    00000236 E5               [11]  595 	push	hl
    00000237 C5               [11]  596 	push	bc
    00000238 FD E5            [15]  597 	push	iy
    0000023A D1               [10]  598 	pop	de
    0000023B CDr00r00         [17]  599 	call	_IsTileSolid
    0000023E C1               [10]  600 	pop	bc
    0000023F E1               [10]  601 	pop	hl
    00000240 B7               [ 4]  602 	or	a, a
    00000241 20 0E            [12]  603 	jr	NZ, 00145$
    00000243 C5               [11]  604 	push	bc
    00000244 DD 5E FE         [19]  605 	ld	e, -2 (ix)
    00000247 DD 56 FF         [19]  606 	ld	d, -1 (ix)
    0000024A CDr00r00         [17]  607 	call	_IsTileSolid
    0000024D C1               [10]  608 	pop	bc
    0000024E B7               [ 4]  609 	or	a, a
    0000024F 28 06            [12]  610 	jr	Z, 00155$
    00000251                        611 00145$:
    00000251 21 00 00         [10]  612 	ld	hl, #0x0000
    00000254 22r04r00         [16]  613 	ld	(_playerXVelocity), hl
    00000257                        614 00155$:
                                    615 ;src/player.c:261: if(playerYVelocity>=0){
    00000257 2Ar06r00         [16]  616 	ld	hl, (_playerYVelocity)
    0000025A DD 75 FE         [19]  617 	ld	-2 (ix), l
    0000025D DD 74 FF         [19]  618 	ld	-1 (ix), h
                                    619 ;src/player.c:265: if(IsTileSolid(playerRealX+(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT)||IsTileSolid(playerRealX-(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT)){
    00000260 DD 6E FC         [19]  620 	ld	l, -4 (ix)
    00000263 DD 66 FD         [19]  621 	ld	h, -3 (ix)
    00000266 23               [ 6]  622 	inc	hl
    00000267 23               [ 6]  623 	inc	hl
    00000268 23               [ 6]  624 	inc	hl
    00000269 DD 7E FC         [19]  625 	ld	a, -4 (ix)
    0000026C C6 FD            [ 7]  626 	add	a, #0xfd
    0000026E 5F               [ 4]  627 	ld	e, a
    0000026F DD 7E FD         [19]  628 	ld	a, -3 (ix)
    00000272 CE FF            [ 7]  629 	adc	a, #0xff
    00000274 DD 73 FC         [19]  630 	ld	-4 (ix), e
    00000277 DD 77 FD         [19]  631 	ld	-3 (ix), a
                                    632 ;src/player.c:261: if(playerYVelocity>=0){
    0000027A DD CB FF 7E      [20]  633 	bit	7, -1 (ix)
    0000027E 20 2C            [12]  634 	jr	NZ, 00160$
                                    635 ;src/player.c:265: if(IsTileSolid(playerRealX+(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT)||IsTileSolid(playerRealX-(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT)){
    00000280 DD 7E FA         [19]  636 	ld	a, -6 (ix)
    00000283 C6 18            [ 7]  637 	add	a, #0x18
    00000285 5F               [ 4]  638 	ld	e, a
    00000286 DD 7E FB         [19]  639 	ld	a, -5 (ix)
    00000289 CE 00            [ 7]  640 	adc	a, #0x00
    0000028B 57               [ 4]  641 	ld	d, a
    0000028C D5               [11]  642 	push	de
    0000028D CDr00r00         [17]  643 	call	_IsTileSolid
    00000290 D1               [10]  644 	pop	de
    00000291 B7               [ 4]  645 	or	a, a
    00000292 20 0C            [12]  646 	jr	NZ, 00156$
    00000294 DD 6E FC         [19]  647 	ld	l, -4 (ix)
    00000297 DD 66 FD         [19]  648 	ld	h, -3 (ix)
    0000029A CDr00r00         [17]  649 	call	_IsTileSolid
    0000029D B7               [ 4]  650 	or	a, a
    0000029E 28 52            [12]  651 	jr	Z, 00167$
    000002A0                        652 00156$:
                                    653 ;src/player.c:266: playerYVelocity=0;
    000002A0 21 00 00         [10]  654 	ld	hl, #0x0000
    000002A3 22r06r00         [16]  655 	ld	(_playerYVelocity), hl
                                    656 ;src/player.c:267: grounded=TRUE;
    000002A6 DD 36 F7 01      [19]  657 	ld	-9 (ix), #0x01
    000002AA 18 46            [12]  658 	jr	00167$
                                    659 ;src/player.c:277: while(IsTileSolid(playerRealX+(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY)||IsTileSolid(playerRealX-(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY)){
    000002AC                        660 00160$:
    000002AC E5               [11]  661 	push	hl
    000002AD C5               [11]  662 	push	bc
    000002AE 59               [ 4]  663 	ld	e, c
    000002AF 50               [ 4]  664 	ld	d, b
    000002B0 CDr00r00         [17]  665 	call	_IsTileSolid
    000002B3 C1               [10]  666 	pop	bc
    000002B4 E1               [10]  667 	pop	hl
    000002B5 B7               [ 4]  668 	or	a, a
    000002B6 20 10            [12]  669 	jr	NZ, 00161$
    000002B8 E5               [11]  670 	push	hl
    000002B9 59               [ 4]  671 	ld	e, c
    000002BA 50               [ 4]  672 	ld	d, b
    000002BB DD 6E FC         [19]  673 	ld	l, -4 (ix)
    000002BE DD 66 FD         [19]  674 	ld	h, -3 (ix)
    000002C1 CDr00r00         [17]  675 	call	_IsTileSolid
    000002C4 E1               [10]  676 	pop	hl
    000002C5 B7               [ 4]  677 	or	a, a
    000002C6 28 2A            [12]  678 	jr	Z, 00167$
    000002C8                        679 00161$:
                                    680 ;src/player.c:278: playerYVelocity=0;
    000002C8 AF               [ 4]  681 	xor	a, a
    000002C9 32r06r00         [13]  682 	ld	(_playerYVelocity+0), a
    000002CC 32r07r00         [13]  683 	ld	(_playerYVelocity+1), a
                                    684 ;src/player.c:279: playerY+=16;
    000002CF FD 2Ar02r00      [20]  685 	ld	iy, (_playerY)
    000002D3 11 10 00         [10]  686 	ld	de, #0x0010
    000002D6 FD 19            [15]  687 	add	iy, de
    000002D8 FD 22r02r00      [20]  688 	ld	(_playerY), iy
                                    689 ;src/player.c:280: playerRealY = playerY>>4;
    000002DC ED 4Br02r00      [20]  690 	ld	bc, (_playerY)
    000002E0 CB 38            [ 8]  691 	srl	b
    000002E2 CB 19            [ 8]  692 	rr	c
    000002E4 CB 38            [ 8]  693 	srl	b
    000002E6 CB 19            [ 8]  694 	rr	c
    000002E8 CB 38            [ 8]  695 	srl	b
    000002EA CB 19            [ 8]  696 	rr	c
    000002EC CB 38            [ 8]  697 	srl	b
    000002EE CB 19            [ 8]  698 	rr	c
    000002F0 18 BA            [12]  699 	jr	00160$
    000002F2                        700 00167$:
                                    701 ;src/player.c:286: uint8_t pressedA = (joypadCurrent & J_A && !(joypadPrevious & J_A));
    000002F2 3Ar00r00         [13]  702 	ld	a, (_joypadCurrent+0)
    000002F5 07               [ 4]  703 	rlca
    000002F6 07               [ 4]  704 	rlca
    000002F7 07               [ 4]  705 	rlca
    000002F8 30 08            [12]  706 	jr	NC, 00195$
    000002FA 3Ar00r00         [13]  707 	ld	a, (_joypadPrevious+0)
    000002FD 07               [ 4]  708 	rlca
    000002FE 07               [ 4]  709 	rlca
    000002FF 07               [ 4]  710 	rlca
    00000300 30 04            [12]  711 	jr	NC, 00196$
    00000302                        712 00195$:
    00000302 0E 00            [ 7]  713 	ld	c, #0x00
    00000304 18 02            [12]  714 	jr	00197$
    00000306                        715 00196$:
    00000306 0E 01            [ 7]  716 	ld	c, #0x01
    00000308                        717 00197$:
                                    718 ;src/player.c:287: uint8_t pressedUp = (joypadCurrent & J_UP && !(joypadPrevious & J_UP));
    00000308 3Ar00r00         [13]  719 	ld	a, (_joypadCurrent+0)
    0000030B E6 01            [ 7]  720 	and	a, #0x01
    0000030D 28 07            [12]  721 	jr	Z, 00198$
    0000030F 3Ar00r00         [13]  722 	ld	a, (_joypadPrevious+0)
    00000312 E6 01            [ 7]  723 	and	a, #0x01
    00000314 28 03            [12]  724 	jr	Z, 00199$
    00000316                        725 00198$:
    00000316 AF               [ 4]  726 	xor	a, a
    00000317 18 02            [12]  727 	jr	00200$
    00000319                        728 00199$:
    00000319 3E 01            [ 7]  729 	ld	a, #0x01
    0000031B                        730 00200$:
                                    731 ;src/player.c:288: uint8_t pressedAOrUp = pressedA||pressedUp;
    0000031B 0C               [ 4]  732 	inc	c
    0000031C 0D               [ 4]  733 	dec	c
    0000031D 20 06            [12]  734 	jr	NZ, 00202$
    0000031F B7               [ 4]  735 	or	a, a
    00000320 20 03            [12]  736 	jr	NZ, 00202$
    00000322 4F               [ 4]  737 	ld	c, a
    00000323 18 02            [12]  738 	jr	00203$
    00000325                        739 00202$:
    00000325 0E 01            [ 7]  740 	ld	c, #0x01
    00000327                        741 00203$:
                                    742 ;src/player.c:291: if(grounded && pressedAOrUp){
    00000327 DD 7E F7         [19]  743 	ld	a, -9 (ix)
    0000032A B7               [ 4]  744 	or	a, a
    0000032B 28 0F            [12]  745 	jr	Z, 00169$
    0000032D 79               [ 4]  746 	ld	a, c
    0000032E B7               [ 4]  747 	or	a, a
    0000032F 28 0B            [12]  748 	jr	Z, 00169$
                                    749 ;src/player.c:292: playerYVelocity=-PLAYER_CHARACTER_JUMP_VELOCITY;
    00000331 21 DA FD         [10]  750 	ld	hl, #0xfdda
    00000334 22r06r00         [16]  751 	ld	(_playerYVelocity), hl
                                    752 ;src/player.c:293: playerJumpIncrease=PLAYER_CHARACTER_INCREASE_JUMP_TIMER_MAX;
    00000337 21r01r00         [10]  753 	ld	hl, #_playerJumpIncrease
    0000033A 36 14            [10]  754 	ld	(hl), #0x14
    0000033C                        755 00169$:
                                    756 ;src/player.c:261: if(playerYVelocity>=0){
    0000033C ED 4Br06r00      [20]  757 	ld	bc, (_playerYVelocity)
                                    758 ;src/player.c:297: if(!grounded){
    00000340 DD 7E F7         [19]  759 	ld	a, -9 (ix)
    00000343 B7               [ 4]  760 	or	a, a
    00000344 20 27            [12]  761 	jr	NZ, 00180$
                                    762 ;src/player.c:300: if(playerJumpIncrease>0)playerJumpIncrease--;
    00000346 3Ar01r00         [13]  763 	ld	a, (_playerJumpIncrease+0)
    00000349 B7               [ 4]  764 	or	a, a
    0000034A 28 04            [12]  765 	jr	Z, 00172$
    0000034C 21r01r00         [10]  766 	ld	hl, #_playerJumpIncrease
    0000034F 35               [11]  767 	dec	(hl)
    00000350                        768 00172$:
                                    769 ;src/player.c:139: int16_t moveSpeed = (joypadCurrent & J_B) ?PLAYER_CHARACTER_RUN_VELOCITY:PLAYER_CHARACTER_WALK_VELOCITY;
    00000350 3Ar00r00         [13]  770 	ld	a, (_joypadCurrent)
                                    771 ;src/player.c:303: if(!((joypadCurrent & J_A||joypadCurrent & J_UP))||playerJumpIncrease==0){
    00000353 CB 6F            [ 8]  772 	bit	5, a
    00000355 20 03            [12]  773 	jr	NZ, 00176$
    00000357 0F               [ 4]  774 	rrca
    00000358 30 06            [12]  775 	jr	NC, 00173$
    0000035A                        776 00176$:
    0000035A 3Ar01r00         [13]  777 	ld	a, (_playerJumpIncrease+0)
    0000035D B7               [ 4]  778 	or	a, a
    0000035E 20 17            [12]  779 	jr	NZ, 00181$
    00000360                        780 00173$:
                                    781 ;src/player.c:306: playerYVelocity+=GRAVTY;
    00000360 21 2D 00         [10]  782 	ld	hl, #0x002d
    00000363 09               [11]  783 	add	hl, bc
    00000364 22r06r00         [16]  784 	ld	(_playerYVelocity), hl
                                    785 ;src/player.c:309: playerJumpIncrease=0;
    00000367 AF               [ 4]  786 	xor	a, a
    00000368 32r01r00         [13]  787 	ld	(_playerJumpIncrease+0), a
    0000036B 18 0A            [12]  788 	jr	00181$
    0000036D                        789 00180$:
                                    790 ;src/player.c:313: }else if(playerYVelocity>=0){
    0000036D CB 78            [ 8]  791 	bit	7, b
    0000036F 20 06            [12]  792 	jr	NZ, 00181$
                                    793 ;src/player.c:316: playerYVelocity=0;
    00000371 21 00 00         [10]  794 	ld	hl, #0x0000
    00000374 22r06r00         [16]  795 	ld	(_playerYVelocity), hl
    00000377                        796 00181$:
                                    797 ;src/player.c:320: playerX+=playerXVelocity>>4;
    00000377 3Ar04r00         [13]  798 	ld	a, (_playerXVelocity+0)
    0000037A DD 77 F8         [19]  799 	ld	-8 (ix), a
    0000037D 3Ar05r00         [13]  800 	ld	a, (_playerXVelocity+1)
    00000380 DD 77 F9         [19]  801 	ld	-7 (ix), a
    00000383 DD CB F9 2E      [23]  802 	sra	-7 (ix)
    00000387 DD CB F8 1E      [23]  803 	rr	-8 (ix)
    0000038B DD CB F9 2E      [23]  804 	sra	-7 (ix)
    0000038F DD CB F8 1E      [23]  805 	rr	-8 (ix)
    00000393 DD CB F9 2E      [23]  806 	sra	-7 (ix)
    00000397 DD CB F8 1E      [23]  807 	rr	-8 (ix)
    0000039B DD CB F9 2E      [23]  808 	sra	-7 (ix)
    0000039F DD CB F8 1E      [23]  809 	rr	-8 (ix)
    000003A3 DD 7E F8         [19]  810 	ld	a, -8 (ix)
    000003A6 DD 5E F9         [19]  811 	ld	e, -7 (ix)
    000003A9 21r00r00         [10]  812 	ld	hl, #_playerX
    000003AC 86               [ 7]  813 	add	a, (hl)
    000003AD 77               [ 7]  814 	ld	(hl), a
    000003AE 23               [ 6]  815 	inc	hl
    000003AF 7B               [ 4]  816 	ld	a, e
    000003B0 8E               [ 7]  817 	adc	a, (hl)
    000003B1 77               [ 7]  818 	ld	(hl), a
                                    819 ;src/player.c:321: playerY+=playerYVelocity>>4;
    000003B2 2Ar06r00         [16]  820 	ld	hl, (_playerYVelocity)
    000003B5 CB 2C            [ 8]  821 	sra	h
    000003B7 CB 1D            [ 8]  822 	rr	l
    000003B9 CB 2C            [ 8]  823 	sra	h
    000003BB CB 1D            [ 8]  824 	rr	l
    000003BD CB 2C            [ 8]  825 	sra	h
    000003BF CB 1D            [ 8]  826 	rr	l
    000003C1 CB 2C            [ 8]  827 	sra	h
    000003C3 CB 1D            [ 8]  828 	rr	l
    000003C5 7D               [ 4]  829 	ld	a, l
    000003C6 5C               [ 4]  830 	ld	e, h
    000003C7 21r02r00         [10]  831 	ld	hl, #_playerY
    000003CA 86               [ 7]  832 	add	a, (hl)
    000003CB 77               [ 7]  833 	ld	(hl), a
    000003CC 23               [ 6]  834 	inc	hl
    000003CD 7B               [ 4]  835 	ld	a, e
    000003CE 8E               [ 7]  836 	adc	a, (hl)
    000003CF 77               [ 7]  837 	ld	(hl), a
                                    838 ;src/player.c:324: playerRealX = playerX>>4;
    000003D0 3Ar00r00         [13]  839 	ld	a, (_playerX+0)
    000003D3 DD 77 FA         [19]  840 	ld	-6 (ix), a
    000003D6 3Ar01r00         [13]  841 	ld	a, (_playerX+1)
    000003D9 DD 77 FB         [19]  842 	ld	-5 (ix), a
    000003DC DD CB FB 3E      [23]  843 	srl	-5 (ix)
    000003E0 DD CB FA 1E      [23]  844 	rr	-6 (ix)
    000003E4 DD CB FB 3E      [23]  845 	srl	-5 (ix)
    000003E8 DD CB FA 1E      [23]  846 	rr	-6 (ix)
    000003EC DD CB FB 3E      [23]  847 	srl	-5 (ix)
    000003F0 DD CB FA 1E      [23]  848 	rr	-6 (ix)
    000003F4 DD CB FB 3E      [23]  849 	srl	-5 (ix)
    000003F8 DD CB FA 1E      [23]  850 	rr	-6 (ix)
                                    851 ;src/player.c:325: playerRealY = playerY>>4;
    000003FC 3Ar02r00         [13]  852 	ld	a, (_playerY+0)
    000003FF DD 77 FC         [19]  853 	ld	-4 (ix), a
    00000402 3Ar03r00         [13]  854 	ld	a, (_playerY+1)
    00000405 DD 77 FD         [19]  855 	ld	-3 (ix), a
    00000408 DD CB FD 3E      [23]  856 	srl	-3 (ix)
    0000040C DD CB FC 1E      [23]  857 	rr	-4 (ix)
    00000410 DD CB FD 3E      [23]  858 	srl	-3 (ix)
    00000414 DD CB FC 1E      [23]  859 	rr	-4 (ix)
    00000418 DD CB FD 3E      [23]  860 	srl	-3 (ix)
    0000041C DD CB FC 1E      [23]  861 	rr	-4 (ix)
    00000420 DD CB FD 3E      [23]  862 	srl	-3 (ix)
    00000424 DD CB FC 1E      [23]  863 	rr	-4 (ix)
                                    864 ;src/player.c:249: if(IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    00000428 DD 7E FA         [19]  865 	ld	a, -6 (ix)
    0000042B DD 77 FE         [19]  866 	ld	-2 (ix), a
    0000042E DD 7E FB         [19]  867 	ld	a, -5 (ix)
    00000431 DD 77 FF         [19]  868 	ld	-1 (ix), a
                                    869 ;src/player.c:328: if(playerRealX>=(DEVICE_SCREEN_PX_WIDTH>>1)){
    00000434 DD 7E FA         [19]  870 	ld	a, -6 (ix)
    00000437 D6 50            [ 7]  871 	sub	a, #0x50
    00000439 DD 7E FB         [19]  872 	ld	a, -5 (ix)
    0000043C DE 00            [ 7]  873 	sbc	a, #0x00
    0000043E 38 2C            [12]  874 	jr	C, 00185$
                                    875 ;src/player.c:329: uint16_t max = currentLevelWidth-DEVICE_SCREEN_PX_WIDTH;
    00000440 2Ar00r00         [16]  876 	ld	hl, (_currentLevelWidth)
    00000443 01 60 FF         [10]  877 	ld	bc, #0xff60
    00000446 09               [11]  878 	add	hl,bc
    00000447 4D               [ 4]  879 	ld	c, l
    00000448 44               [ 4]  880 	ld	b, h
                                    881 ;src/player.c:330: camera_x=playerRealX-(DEVICE_SCREEN_PX_WIDTH>>1);
    00000449 DD 7E FE         [19]  882 	ld	a, -2 (ix)
    0000044C C6 B0            [ 7]  883 	add	a, #0xb0
    0000044E 6F               [ 4]  884 	ld	l, a
    0000044F DD 7E FF         [19]  885 	ld	a, -1 (ix)
    00000452 CE FF            [ 7]  886 	adc	a, #0xff
    00000454 67               [ 4]  887 	ld	h, a
    00000455 22r00r00         [16]  888 	ld	(_camera_x), hl
                                    889 ;src/player.c:333: if(camera_x>max)camera_x=max;
    00000458 79               [ 4]  890 	ld	a, c
    00000459 FD 21r00r00      [14]  891 	ld	iy, #_camera_x
    0000045D FD 96 00         [19]  892 	sub	a, 0 (iy)
    00000460 78               [ 4]  893 	ld	a, b
    00000461 FD 9E 01         [19]  894 	sbc	a, 1 (iy)
    00000464 30 0C            [12]  895 	jr	NC, 00186$
    00000466 ED 43r00r00      [20]  896 	ld	(_camera_x), bc
    0000046A 18 06            [12]  897 	jr	00186$
    0000046C                        898 00185$:
                                    899 ;src/player.c:335: else camera_x=0;
    0000046C 21 00 00         [10]  900 	ld	hl, #0x0000
    0000046F 22r00r00         [16]  901 	ld	(_camera_x), hl
    00000472                        902 00186$:
                                    903 ;src/player.c:345: uint8_t frame = grounded ? (turning ? 5 :((playerXVelocity>>4)==0 ? 0 : threeFrameCounterValue)) : (playerYVelocity<0 ? 3 : 4);
    00000472 DD 7E F7         [19]  904 	ld	a, -9 (ix)
    00000475 B7               [ 4]  905 	or	a, a
    00000476 28 22            [12]  906 	jr	Z, 00204$
    00000478 DD 7E F6         [19]  907 	ld	a, -10 (ix)
    0000047B B7               [ 4]  908 	or	a, a
    0000047C 28 06            [12]  909 	jr	Z, 00206$
    0000047E DD 36 F9 05      [19]  910 	ld	-7 (ix), #0x05
    00000482 18 11            [12]  911 	jr	00207$
    00000484                        912 00206$:
    00000484 DD 7E F9         [19]  913 	ld	a, -7 (ix)
    00000487 DD B6 F8         [19]  914 	or	a, -8 (ix)
    0000048A 20 03            [12]  915 	jr	NZ, 00208$
    0000048C AF               [ 4]  916 	xor	a, a
    0000048D 18 03            [12]  917 	jr	00209$
    0000048F                        918 00208$:
    0000048F DD 7E F5         [19]  919 	ld	a, -11 (ix)
    00000492                        920 00209$:
    00000492 DD 77 F9         [19]  921 	ld	-7 (ix), a
    00000495                        922 00207$:
    00000495 DD 7E F9         [19]  923 	ld	a, -7 (ix)
    00000498 18 1C            [12]  924 	jr	00205$
    0000049A                        925 00204$:
    0000049A 2Ar06r00         [16]  926 	ld	hl, (_playerYVelocity)
    0000049D DD 75 F8         [19]  927 	ld	-8 (ix), l
    000004A0 DD 74 F9         [19]  928 	ld	-7 (ix), h
    000004A3 DD CB F9 7E      [20]  929 	bit	7, -7 (ix)
    000004A7 28 06            [12]  930 	jr	Z, 00210$
    000004A9 DD 36 F9 03      [19]  931 	ld	-7 (ix), #0x03
    000004AD 18 04            [12]  932 	jr	00211$
    000004AF                        933 00210$:
    000004AF DD 36 F9 04      [19]  934 	ld	-7 (ix), #0x04
    000004B3                        935 00211$:
    000004B3 DD 7E F9         [19]  936 	ld	a, -7 (ix)
    000004B6                        937 00205$:
    000004B6 DD 77 F7         [19]  938 	ld	-9 (ix), a
                                    939 ;src/player.c:346: uint8_t directionOffset = facingRight ? 0 : 6;
    000004B9 3Ar00r00         [13]  940 	ld	a, (_facingRight+0)
    000004BC B7               [ 4]  941 	or	a, a
    000004BD 28 03            [12]  942 	jr	Z, 00212$
    000004BF AF               [ 4]  943 	xor	a, a
    000004C0 18 02            [12]  944 	jr	00213$
    000004C2                        945 00212$:
    000004C2 3E 06            [ 7]  946 	ld	a, #0x06
    000004C4                        947 00213$:
                                    948 ;src/player.c:348: uint8_t spritesUsed = DrawPlayer(playerRealX,playerRealY,frame+directionOffset);
    000004C4 DD 77 F9         [19]  949 	ld	-7 (ix), a
    000004C7 DD 86 F7         [19]  950 	add	a, -9 (ix)
    000004CA DD 77 F9         [19]  951 	ld	-7 (ix), a
    000004CD F5               [11]  952 	push	af
    000004CE 33               [ 6]  953 	inc	sp
    000004CF DD 5E FC         [19]  954 	ld	e, -4 (ix)
    000004D2 DD 56 FD         [19]  955 	ld	d, -3 (ix)
    000004D5 DD 6E FA         [19]  956 	ld	l, -6 (ix)
    000004D8 DD 66 FB         [19]  957 	ld	h, -5 (ix)
    000004DB CDr52r00         [17]  958 	call	_DrawPlayer
    000004DE 4F               [ 4]  959 	ld	c, a
                                    960 ;src/player.c:351: if(playerRealX>currentLevelWidth-32){
    000004DF 2Ar00r00         [16]  961 	ld	hl, (_currentLevelWidth)
    000004E2 7D               [ 4]  962 	ld	a, l
    000004E3 C6 E0            [ 7]  963 	add	a, #0xe0
    000004E5 47               [ 4]  964 	ld	b, a
    000004E6 7C               [ 4]  965 	ld	a, h
    000004E7 CE FF            [ 7]  966 	adc	a, #0xff
    000004E9 5F               [ 4]  967 	ld	e, a
    000004EA 78               [ 4]  968 	ld	a, b
    000004EB DD 96 FE         [19]  969 	sub	a, -2 (ix)
    000004EE 7B               [ 4]  970 	ld	a, e
    000004EF DD 9E FF         [19]  971 	sbc	a, -1 (ix)
    000004F2 30 04            [12]  972 	jr	NC, 00188$
                                    973 ;src/player.c:352: nextLevel++;
    000004F4 21r00r00         [10]  974 	ld	hl, #_nextLevel
    000004F7 34               [11]  975 	inc	(hl)
    000004F8                        976 00188$:
                                    977 ;src/player.c:355: return spritesUsed;
    000004F8 79               [ 4]  978 	ld	a, c
                                    979 ;src/player.c:356: }
    000004F9 DD F9            [10]  980 	ld	sp, ix
    000004FB DD E1            [14]  981 	pop	ix
    000004FD C9               [10]  982 	ret
                                    983 	.area _CODE_255
                                    984 	.area _INITIALIZER
    00000000                        985 __xinit__facingRight:
    00000000 01                     986 	.db #0x01	; 1
    00000001                        987 __xinit__playerJumpIncrease:
    00000001 00                     988 	.db #0x00	; 0
    00000002                        989 __xinit__threeFrameCounter:
    00000002 00                     990 	.db #0x00	; 0
                                    991 	.area _CABS (ABS)
