                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module player
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl b_UpdatePlayer
                                     11 	.globl _UpdatePlayer
                                     12 	.globl _DrawPlayer
                                     13 	.globl b_SetupPlayer
                                     14 	.globl _SetupPlayer
                                     15 	.globl _SetPlayerPalettes
                                     16 	.globl _UpdatePlayerVRAMTiles
                                     17 	.globl _IsTileSolid
                                     18 	.globl _set_sprite_native_data
                                     19 	.globl _set_palette
                                     20 	.globl _threeFrameCounter
                                     21 	.globl _playerJumpIncrease
                                     22 	.globl _facingRight
                                     23 	.globl _playerYVelocity
                                     24 	.globl _playerXVelocity
                                     25 	.globl _playerY
                                     26 	.globl _playerX
                                     27 	.globl _PlayerPalettesGGSMS
                                     28 	.globl _baseProp
                                     29 ;--------------------------------------------------------
                                     30 ; special function registers
                                     31 ;--------------------------------------------------------
                         00000000    32 _GG_STATE	=	0x0000
                         00000001    33 _GG_EXT_7BIT	=	0x0001
                         00000002    34 _GG_EXT_CTL	=	0x0002
                         00000003    35 _GG_SIO_SEND	=	0x0003
                         00000004    36 _GG_SIO_RECV	=	0x0004
                         00000005    37 _GG_SIO_CTL	=	0x0005
                         00000006    38 _GG_SOUND_PAN	=	0x0006
                         0000003E    39 _MEMORY_CTL	=	0x003e
                         0000003F    40 _JOY_CTL	=	0x003f
                         0000007E    41 _VCOUNTER	=	0x007e
                         0000007F    42 _PSG	=	0x007f
                         0000007F    43 _HCOUNTER	=	0x007f
                         000000BE    44 _VDP_DATA	=	0x00be
                         000000BF    45 _VDP_CMD	=	0x00bf
                         000000BF    46 _VDP_STATUS	=	0x00bf
                         000000DC    47 _JOY_PORT1	=	0x00dc
                         000000DD    48 _JOY_PORT2	=	0x00dd
                         000000F0    49 _FMADDRESS	=	0x00f0
                         000000F1    50 _FMDATA	=	0x00f1
                         000000F2    51 _AUDIOCTRL	=	0x00f2
                                     52 ;--------------------------------------------------------
                                     53 ; ram data
                                     54 ;--------------------------------------------------------
                                     55 	.area _DATA
                         0000FFFC    56 _RAM_CONTROL	=	0xfffc
                         0000FFF8    57 _GLASSES_3D	=	0xfff8
                         0000FFFD    58 _MAP_FRAME0	=	0xfffd
                         0000FFFE    59 _MAP_FRAME1	=	0xfffe
                         0000FFFF    60 _MAP_FRAME2	=	0xffff
    00000000                         61 _playerX::
    00000000                         62 	.ds 2
    00000002                         63 _playerY::
    00000002                         64 	.ds 2
    00000004                         65 _playerXVelocity::
    00000004                         66 	.ds 2
    00000006                         67 _playerYVelocity::
    00000006                         68 	.ds 2
                                     69 ;--------------------------------------------------------
                                     70 ; ram data
                                     71 ;--------------------------------------------------------
                                     72 	.area _INITIALIZED
    00000000                         73 _facingRight::
    00000000                         74 	.ds 1
    00000001                         75 _playerJumpIncrease::
    00000001                         76 	.ds 1
    00000002                         77 _threeFrameCounter::
    00000002                         78 	.ds 1
                                     79 ;--------------------------------------------------------
                                     80 ; absolute external ram data
                                     81 ;--------------------------------------------------------
                                     82 	.area _DABS (ABS)
                                     83 ;--------------------------------------------------------
                                     84 ; global & static initialisations
                                     85 ;--------------------------------------------------------
                                     86 	.area _HOME
                                     87 	.area _GSINIT
                                     88 	.area _GSFINAL
                                     89 	.area _GSINIT
                                     90 ;--------------------------------------------------------
                                     91 ; Home
                                     92 ;--------------------------------------------------------
                                     93 	.area _HOME
                                     94 ;src/player.c:67: void UpdatePlayerVRAMTiles(void) NONBANKED{
                                     95 ;	---------------------------------
                                     96 ; Function UpdatePlayerVRAMTiles
                                     97 ; ---------------------------------
    00000000                         98 _UpdatePlayerVRAMTiles::
                                     99 ;src/player.c:68: uint8_t _previous_bank = CURRENT_BANK;
    00000000 3A FE FF         [13]  100 	ld	a, (_MAP_FRAME1)
    00000003 4F               [ 4]  101 	ld	c, a
                                    102 ;src/player.c:71: SWITCH_ROM(BANK(PlayerCharacterSprites));
    00000004 21 FE FF         [10]  103 	ld	hl, #_MAP_FRAME1
    00000007 36r00            [10]  104 	ld	(hl), #<(___bank_PlayerCharacterSprites)
                                    105 ;src/player.c:73: set_player_sprite_data (0,PlayerCharacterSprites_TILE_COUNT,PlayerCharacterSprites_tiles);
    00000009 C5               [11]  106 	push	bc
    0000000A 21r00r00         [10]  107 	ld	hl, #_PlayerCharacterSprites_tiles
    0000000D E5               [11]  108 	push	hl
    0000000E 11 7C 00         [10]  109 	ld	de, #0x007c
    00000011 AF               [ 4]  110 	xor	a, a
    00000012 CDr00r00         [17]  111 	call	_set_sprite_native_data
    00000015 C1               [10]  112 	pop	bc
                                    113 ;src/player.c:75: SWITCH_ROM(_previous_bank);
    00000016 21 FE FF         [10]  114 	ld	hl, #_MAP_FRAME1
    00000019 71               [ 7]  115 	ld	(hl), c
                                    116 ;src/player.c:76: }
    0000001A C9               [10]  117 	ret
    0000001B                        118 _baseProp:
    0000001B 00                     119 	.db #0x00	; 0
    0000001C                        120 _PlayerPalettesGGSMS:
    0000001C 1B                     121 	.db #0x1b	; 27
    0000001D 3F                     122 	.db #0x3f	; 63
    0000001E 2A                     123 	.db #0x2a	; 42
    0000001F 00                     124 	.db #0x00	; 0
    00000020 02                     125 	.db #0x02	; 2
    00000021 04                     126 	.db #0x04	; 4
    00000022 20                     127 	.db #0x20	; 32
    00000023 09                     128 	.db #0x09	; 9
    00000024 18                     129 	.db #0x18	; 24
    00000025 11                     130 	.db #0x11	; 17
    00000026 03                     131 	.db #0x03	; 3
    00000027 0C                     132 	.db #0x0c	; 12
    00000028 30                     133 	.db #0x30	; 48	'0'
    00000029 0F                     134 	.db #0x0f	; 15
    0000002A 3C                     135 	.db #0x3c	; 60
    0000002B 3B                     136 	.db #0x3b	; 59
                                    137 ;src/player.c:78: void SetPlayerPalettes(void) NONBANKED{
                                    138 ;	---------------------------------
                                    139 ; Function SetPlayerPalettes
                                    140 ; ---------------------------------
    0000002C                        141 _SetPlayerPalettes::
                                    142 ;src/player.c:79: uint8_t _previous_bank = CURRENT_BANK;
    0000002C 3A FE FF         [13]  143 	ld	a, (_MAP_FRAME1)
    0000002F 4F               [ 4]  144 	ld	c, a
                                    145 ;src/player.c:81: SWITCH_ROM(PLAYER_PALETTES_BANK);
                                    146 ;src/player.c:85: set_sprite_palette(baseProp, 1, PLAYER_PALETTES);
    00000030 C5               [11]  147 	push	bc
    00000031 21r1Cr00         [10]  148 	ld	hl, #_PlayerPalettesGGSMS
    00000034 E5               [11]  149 	push	hl
    00000035 21 01 01         [10]  150 	ld	hl, #0x101
    00000038 E5               [11]  151 	push	hl
    00000039 CDr00r00         [17]  152 	call	_set_palette
    0000003C C1               [10]  153 	pop	bc
                                    154 ;src/player.c:95: SWITCH_ROM(_previous_bank);
    0000003D 21 FE FF         [10]  155 	ld	hl, #_MAP_FRAME1
    00000040 71               [ 7]  156 	ld	(hl), c
                                    157 ;src/player.c:96: }
    00000041 C9               [10]  158 	ret
                                    159 ;src/player.c:116: uint8_t DrawPlayer(uint16_t playerRealX, uint16_t playerRealY, uint8_t frame) NONBANKED{
                                    160 ;	---------------------------------
                                    161 ; Function DrawPlayer
                                    162 ; ---------------------------------
    00000042                        163 _DrawPlayer::
    00000042 DD E5            [15]  164 	push	ix
    00000044 DD 21 00 00      [14]  165 	ld	ix,#0
    00000048 DD 39            [15]  166 	add	ix,sp
    0000004A 3B               [ 6]  167 	dec	sp
    0000004B 4D               [ 4]  168 	ld	c, l
    0000004C 44               [ 4]  169 	ld	b, h
                                    170 ;src/player.c:119: uint8_t _previous_bank = CURRENT_BANK;
    0000004D 3A FE FF         [13]  171 	ld	a, (_MAP_FRAME1+0)
    00000050 DD 77 FF         [19]  172 	ld	-1 (ix), a
                                    173 ;src/player.c:123: uint16_t playerCameraX = (playerRealX-camera_x)+DEVICE_SPRITE_PX_OFFSET_X;
    00000053 21r00r00         [10]  174 	ld	hl, #_camera_x
    00000056 79               [ 4]  175 	ld	a, c
    00000057 96               [ 7]  176 	sub	a, (hl)
    00000058 23               [ 6]  177 	inc	hl
    00000059 4F               [ 4]  178 	ld	c, a
    0000005A 78               [ 4]  179 	ld	a, b
    0000005B 9E               [ 7]  180 	sbc	a, (hl)
    0000005C 47               [ 4]  181 	ld	b, a
                                    182 ;src/player.c:124: uint16_t playerCameraY= (playerRealY)+DEVICE_SPRITE_PX_OFFSET_Y;
    0000005D 21 FF FF         [10]  183 	ld	hl, #0xffff
    00000060 19               [11]  184 	add	hl, de
    00000061 EB               [ 4]  185 	ex	de, hl
                                    186 ;src/player.c:126: SWITCH_ROM(BANK(PlayerCharacterSprites));
    00000062 21 FE FF         [10]  187 	ld	hl, #_MAP_FRAME1
    00000065 36r00            [10]  188 	ld	(hl), #<(___bank_PlayerCharacterSprites)
                                    189 ;src/player.c:128: spritesUsed = move_metasprite_ex(PlayerCharacterSprites_metasprites[frame],0,baseProp,0,playerCameraX,playerCameraY);
    00000067 DD 6E 04         [19]  190 	ld	l, 4 (ix)
    0000006A 26 00            [ 7]  191 	ld	h, #0x00
    0000006C 29               [11]  192 	add	hl, hl
    0000006D D5               [11]  193 	push	de
    0000006E 11r00r00         [10]  194 	ld	de, #_PlayerCharacterSprites_metasprites
    00000071 19               [11]  195 	add	hl, de
    00000072 D1               [10]  196 	pop	de
    00000073 7E               [ 7]  197 	ld	a, (hl)
    00000074 23               [ 6]  198 	inc	hl
    00000075 66               [ 7]  199 	ld	h, (hl)
    00000076 6F               [ 4]  200 	ld	l, a
                                    201 ;../../../include/sms/metasprites.h:83: __current_metasprite = metasprite;
    00000077 22r00r00         [16]  202 	ld	(___current_metasprite), hl
                                    203 ;../../../include/sms/metasprites.h:84: __current_base_tile = base_tile;
    0000007A AF               [ 4]  204 	xor	a, a
    0000007B 32r00r00         [13]  205 	ld	(___current_base_tile+0), a
                                    206 ;../../../include/sms/metasprites.h:85: return __move_metasprite(base_sprite, x, y);
    0000007E D5               [11]  207 	push	de
    0000007F 59               [ 4]  208 	ld	e, c
    00000080 50               [ 4]  209 	ld	d, b
    00000081 AF               [ 4]  210 	xor	a, a
    00000082 CDr00r00         [17]  211 	call	___move_metasprite
    00000085 4F               [ 4]  212 	ld	c, a
                                    213 ;src/player.c:130: SWITCH_ROM(_previous_bank);
    00000086 DD 7E FF         [19]  214 	ld	a, -1 (ix)
    00000089 32 FE FF         [13]  215 	ld	(_MAP_FRAME1+0), a
                                    216 ;src/player.c:132: return spritesUsed;
    0000008C 79               [ 4]  217 	ld	a, c
                                    218 ;src/player.c:133: }
    0000008D 33               [ 6]  219 	inc	sp
    0000008E DD E1            [14]  220 	pop	ix
    00000090 E1               [10]  221 	pop	hl
    00000091 33               [ 6]  222 	inc	sp
    00000092 E9               [ 4]  223 	jp	(hl)
                                    224 	.area _HOME
                                    225 ;--------------------------------------------------------
                                    226 ; code
                                    227 ;--------------------------------------------------------
                                    228 	.area _CODE_255
                                    229 ;src/player.c:98: void SetupPlayer(void) BANKED{
                                    230 ;	---------------------------------
                                    231 ; Function SetupPlayer
                                    232 ; ---------------------------------
                         000000FF   233 	b_SetupPlayer	= 255
    00000000                        234 _SetupPlayer::
                                    235 ;src/player.c:102: playerX=40<<4;
    00000000 21 80 02         [10]  236 	ld	hl, #0x0280
    00000003 22r00r00         [16]  237 	ld	(_playerX), hl
                                    238 ;src/player.c:103: playerY=40<<4;
    00000006 22r02r00         [16]  239 	ld	(_playerY), hl
                                    240 ;src/player.c:105: playerXVelocity=0;
    00000009 21 00 00         [10]  241 	ld	hl, #0x0000
    0000000C 22r04r00         [16]  242 	ld	(_playerXVelocity), hl
                                    243 ;src/player.c:106: playerYVelocity=0;
    0000000F 22r06r00         [16]  244 	ld	(_playerYVelocity), hl
                                    245 ;src/player.c:108: UpdatePlayerVRAMTiles();
    00000012 CDr00r00         [17]  246 	call	_UpdatePlayerVRAMTiles
                                    247 ;src/player.c:111: SetPlayerPalettes();
                                    248 ;src/player.c:114: }
    00000015 C3r2Cr00         [10]  249 	jp	_SetPlayerPalettes
                                    250 ;src/player.c:135: uint8_t UpdatePlayer(void) BANKED{
                                    251 ;	---------------------------------
                                    252 ; Function UpdatePlayer
                                    253 ; ---------------------------------
                         000000FF   254 	b_UpdatePlayer	= 255
    00000018                        255 _UpdatePlayer::
    00000018 DD E5            [15]  256 	push	ix
    0000001A DD 21 00 00      [14]  257 	ld	ix,#0
    0000001E DD 39            [15]  258 	add	ix,sp
    00000020 21 F5 FF         [10]  259 	ld	hl, #-11
    00000023 39               [11]  260 	add	hl, sp
    00000024 F9               [ 6]  261 	ld	sp, hl
                                    262 ;src/player.c:139: int16_t moveSpeed = (joypadCurrent & J_B) ?PLAYER_CHARACTER_RUN_VELOCITY:PLAYER_CHARACTER_WALK_VELOCITY;
    00000025 3Ar00r00         [13]  263 	ld	a, (_joypadCurrent+0)
    00000028 DD 77 FB         [19]  264 	ld	-5 (ix), a
    0000002B E6 10            [ 7]  265 	and	a, #0x10
    0000002D 28 05            [12]  266 	jr	Z, 00191$
    0000002F 11 A9 01         [10]  267 	ld	de, #0x01a9
    00000032 18 03            [12]  268 	jr	00192$
    00000034                        269 00191$:
    00000034 11 45 01         [10]  270 	ld	de, #0x0145
    00000037                        271 00192$:
                                    272 ;src/player.c:140: uint8_t threeFrameCounterSpeed = (joypadCurrent & J_B) ? PLAYER_CHARACTER_RUN_TWO_FRAME_COUNTER : PLAYER_CHARACTER_WALK_TWO_FRAME_COUNTER;
    00000037 B7               [ 4]  273 	or	a, a
    00000038 3E 05            [ 7]  274 	ld	a, #0x05
    0000003A 20 02            [12]  275 	jr	NZ, 00194$
    0000003C 3E 03            [ 7]  276 	ld	a, #0x03
    0000003E                        277 00194$:
                                    278 ;src/player.c:142: threeFrameCounter+=threeFrameCounterSpeed;
    0000003E 21r02r00         [10]  279 	ld	hl, #_threeFrameCounter
    00000041 86               [ 7]  280 	add	a, (hl)
    00000042 77               [ 7]  281 	ld	(hl), a
                                    282 ;src/player.c:143: uint8_t threeFrameCounterValue = threeFrameCounter>>4;
    00000043 3Ar02r00         [13]  283 	ld	a, (_threeFrameCounter+0)
    00000046 07               [ 4]  284 	rlca
    00000047 07               [ 4]  285 	rlca
    00000048 07               [ 4]  286 	rlca
    00000049 07               [ 4]  287 	rlca
    0000004A E6 0F            [ 7]  288 	and	a, #0x0f
                                    289 ;src/player.c:144: if(threeFrameCounterValue>=3){
    0000004C DD 77 F5         [19]  290 	ld	-11 (ix), a
    0000004F D6 03            [ 7]  291 	sub	a, #0x03
    00000051 38 08            [12]  292 	jr	C, 00102$
                                    293 ;src/player.c:145: threeFrameCounter=0;
    00000053 AF               [ 4]  294 	xor	a, a
    00000054 32r02r00         [13]  295 	ld	(_threeFrameCounter+0), a
                                    296 ;src/player.c:146: threeFrameCounterValue=0;
    00000057 DD 36 F5 00      [19]  297 	ld	-11 (ix), #0x00
    0000005B                        298 00102$:
                                    299 ;src/player.c:149: uint8_t turning = FALSE;
    0000005B DD 36 F6 00      [19]  300 	ld	-10 (ix), #0x00
                                    301 ;src/player.c:154: if(playerXVelocity<0){
    0000005F ED 4Br04r00      [20]  302 	ld	bc, (_playerXVelocity)
    00000063 78               [ 4]  303 	ld	a, b
    00000064 07               [ 4]  304 	rlca
    00000065 E6 01            [ 7]  305 	and	a,#0x01
    00000067 DD 77 FC         [19]  306 	ld	-4 (ix), a
                                    307 ;src/player.c:157: playerXVelocity+=GROUND_FRICTION;
    0000006A 21 0F 00         [10]  308 	ld	hl, #0x000f
    0000006D 09               [11]  309 	add	hl, bc
    0000006E DD 75 FD         [19]  310 	ld	-3 (ix), l
    00000071 DD 74 FE         [19]  311 	ld	-2 (ix), h
                                    312 ;src/player.c:151: if(joypadCurrent &J_RIGHT){
    00000074 DD CB FB 5E      [20]  313 	bit	3, -5 (ix)
    00000078 28 34            [12]  314 	jr	Z, 00134$
                                    315 ;src/player.c:154: if(playerXVelocity<0){
    0000007A DD 7E FC         [19]  316 	ld	a, -4 (ix)
    0000007D B7               [ 4]  317 	or	a, a
    0000007E 28 1C            [12]  318 	jr	Z, 00109$
                                    319 ;src/player.c:157: playerXVelocity+=GROUND_FRICTION;
    00000080 DD 6E FD         [19]  320 	ld	l, -3 (ix)
    00000083 DD 66 FE         [19]  321 	ld	h, -2 (ix)
                                    322 ;src/player.c:160: if(playerXVelocity<0)turning=TRUE;
    00000086 22r04r00         [16]  323 	ld	(_playerXVelocity), hl
    00000089 CB 7C            [ 8]  324 	bit	7, h
    0000008B 28 07            [12]  325 	jr	Z, 00104$
    0000008D DD 36 F6 01      [19]  326 	ld	-10 (ix), #0x01
    00000091 C3r2Ar01         [10]  327 	jp	00135$
    00000094                        328 00104$:
                                    329 ;src/player.c:163: facingRight=TRUE;
    00000094 21r00r00         [10]  330 	ld	hl, #_facingRight
    00000097 36 01            [10]  331 	ld	(hl), #0x01
    00000099 C3r2Ar01         [10]  332 	jp	00135$
    0000009C                        333 00109$:
                                    334 ;src/player.c:166: playerXVelocity=moveSpeed;
    0000009C ED 53r04r00      [20]  335 	ld	(_playerXVelocity), de
                                    336 ;src/player.c:169: if(!facingRight){
    000000A0 3Ar00r00         [13]  337 	ld	a, (_facingRight+0)
    000000A3 B7               [ 4]  338 	or	a, a
    000000A4 C2r2Ar01         [10]  339 	jp	NZ, 00135$
                                    340 ;src/player.c:170: facingRight=TRUE;
    000000A7 21r00r00         [10]  341 	ld	hl, #_facingRight
    000000AA 36 01            [10]  342 	ld	(hl), #0x01
    000000AC 18 7C            [12]  343 	jr	00135$
    000000AE                        344 00134$:
                                    345 ;src/player.c:177: if(playerXVelocity>0){
    000000AE AF               [ 4]  346 	xor	a, a
    000000AF B9               [ 4]  347 	cp	a, c
    000000B0 98               [ 4]  348 	sbc	a, b
    000000B1 E2rB6r00         [10]  349 	jp	PO, 00532$
    000000B4 EE 80            [ 7]  350 	xor	a, #0x80
    000000B6                        351 00532$:
    000000B6 07               [ 4]  352 	rlca
    000000B7 E6 01            [ 7]  353 	and	a,#0x01
    000000B9 DD 77 FF         [19]  354 	ld	-1 (ix), a
                                    355 ;src/player.c:180: playerXVelocity-=GROUND_FRICTION;
    000000BC 79               [ 4]  356 	ld	a, c
    000000BD C6 F1            [ 7]  357 	add	a, #0xf1
    000000BF 6F               [ 4]  358 	ld	l, a
    000000C0 78               [ 4]  359 	ld	a, b
    000000C1 CE FF            [ 7]  360 	adc	a, #0xff
    000000C3 67               [ 4]  361 	ld	h, a
                                    362 ;src/player.c:174: }else if(joypadCurrent &J_LEFT){
    000000C4 DD CB FB 56      [20]  363 	bit	2, -5 (ix)
    000000C8 28 36            [12]  364 	jr	Z, 00131$
                                    365 ;src/player.c:177: if(playerXVelocity>0){
    000000CA DD 7E FF         [19]  366 	ld	a, -1 (ix)
    000000CD B7               [ 4]  367 	or	a, a
    000000CE 28 1A            [12]  368 	jr	Z, 00117$
                                    369 ;src/player.c:180: playerXVelocity-=GROUND_FRICTION;
                                    370 ;src/player.c:183: if(playerXVelocity>0)turning=TRUE;
    000000D0 22r04r00         [16]  371 	ld	(_playerXVelocity), hl
    000000D3 AF               [ 4]  372 	xor	a, a
    000000D4 BD               [ 4]  373 	cp	a, l
    000000D5 9C               [ 4]  374 	sbc	a, h
    000000D6 E2rDBr00         [10]  375 	jp	PO, 00534$
    000000D9 EE 80            [ 7]  376 	xor	a, #0x80
    000000DB                        377 00534$:
    000000DB F2rE4r00         [10]  378 	jp	P, 00112$
    000000DE DD 36 F6 01      [19]  379 	ld	-10 (ix), #0x01
    000000E2 18 46            [12]  380 	jr	00135$
    000000E4                        381 00112$:
                                    382 ;src/player.c:186: facingRight=FALSE;
    000000E4 AF               [ 4]  383 	xor	a, a
    000000E5 32r00r00         [13]  384 	ld	(_facingRight+0), a
    000000E8 18 40            [12]  385 	jr	00135$
    000000EA                        386 00117$:
                                    387 ;src/player.c:190: playerXVelocity=-moveSpeed;
    000000EA 21r04r00         [10]  388 	ld	hl, #_playerXVelocity
    000000ED AF               [ 4]  389 	xor	a, a
    000000EE 93               [ 4]  390 	sub	a, e
    000000EF 77               [ 7]  391 	ld	(hl), a
    000000F0 23               [ 6]  392 	inc	hl
    000000F1 9F               [ 4]  393 	sbc	a, a
    000000F2 92               [ 4]  394 	sub	a, d
    000000F3 77               [ 7]  395 	ld	(hl), a
                                    396 ;src/player.c:193: if(facingRight){
    000000F4 3Ar00r00         [13]  397 	ld	a, (_facingRight+0)
    000000F7 B7               [ 4]  398 	or	a, a
    000000F8 28 30            [12]  399 	jr	Z, 00135$
                                    400 ;src/player.c:194: facingRight=FALSE;
    000000FA AF               [ 4]  401 	xor	a, a
    000000FB 32r00r00         [13]  402 	ld	(_facingRight+0), a
    000000FE 18 2A            [12]  403 	jr	00135$
    00000100                        404 00131$:
                                    405 ;src/player.c:203: if (playerXVelocity > 0) {
    00000100 DD 7E FF         [19]  406 	ld	a, -1 (ix)
    00000103 B7               [ 4]  407 	or	a, a
    00000104 28 15            [12]  408 	jr	Z, 00128$
                                    409 ;src/player.c:204: if (playerXVelocity >= GROUND_FRICTION) playerXVelocity -= GROUND_FRICTION;
    00000106 79               [ 4]  410 	ld	a, c
    00000107 D6 0F            [ 7]  411 	sub	a, #0x0f
    00000109 78               [ 4]  412 	ld	a, b
    0000010A DE 00            [ 7]  413 	sbc	a, #0x00
    0000010C 38 05            [12]  414 	jr	C, 00120$
    0000010E 22r04r00         [16]  415 	ld	(_playerXVelocity), hl
    00000111 18 17            [12]  416 	jr	00135$
    00000113                        417 00120$:
                                    418 ;src/player.c:205: else playerXVelocity=0;
    00000113 21 00 00         [10]  419 	ld	hl, #0x0000
    00000116 22r04r00         [16]  420 	ld	(_playerXVelocity), hl
    00000119 18 0F            [12]  421 	jr	00135$
    0000011B                        422 00128$:
                                    423 ;src/player.c:207: else if (playerXVelocity < 0) {
    0000011B DD 7E FC         [19]  424 	ld	a, -4 (ix)
    0000011E B7               [ 4]  425 	or	a, a
    0000011F 28 09            [12]  426 	jr	Z, 00135$
                                    427 ;src/player.c:208: if (playerXVelocity <= GROUND_FRICTION) playerXVelocity += GROUND_FRICTION;
    00000121 DD 6E FD         [19]  428 	ld	l, -3 (ix)
    00000124 DD 66 FE         [19]  429 	ld	h, -2 (ix)
    00000127 22r04r00         [16]  430 	ld	(_playerXVelocity), hl
                                    431 ;src/player.c:209: else playerXVelocity=0;
    0000012A                        432 00135$:
                                    433 ;src/player.c:213: uint16_t playerRealX = playerX>>4;
    0000012A 2Ar00r00         [16]  434 	ld	hl, (_playerX)
    0000012D CB 3C            [ 8]  435 	srl	h
    0000012F CB 1D            [ 8]  436 	rr	l
    00000131 CB 3C            [ 8]  437 	srl	h
    00000133 CB 1D            [ 8]  438 	rr	l
    00000135 CB 3C            [ 8]  439 	srl	h
    00000137 CB 1D            [ 8]  440 	rr	l
    00000139 CB 3C            [ 8]  441 	srl	h
    0000013B CB 1D            [ 8]  442 	rr	l
                                    443 ;src/player.c:214: uint16_t playerRealY = playerY>>4;
    0000013D ED 4Br02r00      [20]  444 	ld	bc, (_playerY)
    00000141 CB 38            [ 8]  445 	srl	b
    00000143 CB 19            [ 8]  446 	rr	c
    00000145 CB 38            [ 8]  447 	srl	b
    00000147 CB 19            [ 8]  448 	rr	c
    00000149 CB 38            [ 8]  449 	srl	b
    0000014B CB 19            [ 8]  450 	rr	c
    0000014D CB 38            [ 8]  451 	srl	b
    0000014F CB 19            [ 8]  452 	rr	c
                                    453 ;src/player.c:216: uint8_t grounded = FALSE;
    00000151 DD 36 F7 00      [19]  454 	ld	-9 (ix), #0x00
                                    455 ;src/player.c:223: if(playerRealY<DEVICE_SCREEN_PX_HEIGHT){
    00000155 79               [ 4]  456 	ld	a, c
    00000156 D6 C0            [ 7]  457 	sub	a, #0xc0
    00000158 78               [ 4]  458 	ld	a, b
    00000159 DE 00            [ 7]  459 	sbc	a, #0x00
    0000015B 30 34            [12]  460 	jr	NC, 00140$
                                    461 ;src/player.c:226: while(IsTileSolid(playerRealX,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-1)){
    0000015D                        462 00136$:
    0000015D 79               [ 4]  463 	ld	a, c
    0000015E 50               [ 4]  464 	ld	d, b
    0000015F C6 17            [ 7]  465 	add	a, #0x17
    00000161 5F               [ 4]  466 	ld	e, a
    00000162 30 01            [12]  467 	jr	NC, 00535$
    00000164 14               [ 4]  468 	inc	d
    00000165                        469 00535$:
    00000165 E5               [11]  470 	push	hl
    00000166 C5               [11]  471 	push	bc
    00000167 CDr00r00         [17]  472 	call	_IsTileSolid
    0000016A C1               [10]  473 	pop	bc
    0000016B E1               [10]  474 	pop	hl
    0000016C B7               [ 4]  475 	or	a, a
    0000016D 28 22            [12]  476 	jr	Z, 00140$
                                    477 ;src/player.c:227: playerY-=16;
    0000016F ED 4Br02r00      [20]  478 	ld	bc, (_playerY)
    00000173 79               [ 4]  479 	ld	a, c
    00000174 C6 F0            [ 7]  480 	add	a, #0xf0
    00000176 4F               [ 4]  481 	ld	c, a
    00000177 78               [ 4]  482 	ld	a, b
    00000178 CE FF            [ 7]  483 	adc	a, #0xff
    0000017A 47               [ 4]  484 	ld	b, a
                                    485 ;src/player.c:228: playerRealY = playerY>>4;
    0000017B ED 43r02r00      [20]  486 	ld	(_playerY),bc
    0000017F CB 38            [ 8]  487 	srl	b
    00000181 CB 19            [ 8]  488 	rr	c
    00000183 CB 38            [ 8]  489 	srl	b
    00000185 CB 19            [ 8]  490 	rr	c
    00000187 CB 38            [ 8]  491 	srl	b
    00000189 CB 19            [ 8]  492 	rr	c
    0000018B CB 38            [ 8]  493 	srl	b
    0000018D CB 19            [ 8]  494 	rr	c
    0000018F 18 CC            [12]  495 	jr	00136$
    00000191                        496 00140$:
                                    497 ;src/player.c:226: while(IsTileSolid(playerRealX,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-1)){
    00000191 DD 71 FA         [19]  498 	ld	-6 (ix), c
    00000194 DD 70 FB         [19]  499 	ld	-5 (ix), b
                                    500 ;src/player.c:249: if(IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    00000197 DD 75 FC         [19]  501 	ld	-4 (ix), l
    0000019A DD 74 FD         [19]  502 	ld	-3 (ix), h
                                    503 ;src/player.c:242: if(playerXVelocity!=0){
    0000019D 3Ar05r00         [13]  504 	ld	a, (_playerXVelocity+1)
    000001A0 21r04r00         [10]  505 	ld	hl, #_playerXVelocity
    000001A3 B6               [ 7]  506 	or	a, (hl)
    000001A4 CAr57r02         [10]  507 	jp	Z, 00155$
                                    508 ;src/player.c:245: if(playerXVelocity>0){
    000001A7 2Ar04r00         [16]  509 	ld	hl, (_playerXVelocity)
                                    510 ;src/player.c:249: if(IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    000001AA DD 5E FA         [19]  511 	ld	e, -6 (ix)
    000001AD DD 56 FB         [19]  512 	ld	d, -5 (ix)
    000001B0 13               [ 6]  513 	inc	de
    000001B1 13               [ 6]  514 	inc	de
    000001B2 FD 21 0C 00      [14]  515 	ld	iy, #0x000c
    000001B6 C5               [11]  516 	push	bc
    000001B7 DD 4E FA         [19]  517 	ld	c, -6 (ix)
    000001BA DD 46 FB         [19]  518 	ld	b, -5 (ix)
    000001BD FD 09            [15]  519 	add	iy, bc
    000001BF C1               [10]  520 	pop	bc
    000001C0 DD 7E FA         [19]  521 	ld	a, -6 (ix)
    000001C3 C6 16            [ 7]  522 	add	a, #0x16
    000001C5 DD 77 FE         [19]  523 	ld	-2 (ix), a
    000001C8 DD 7E FB         [19]  524 	ld	a, -5 (ix)
    000001CB CE 00            [ 7]  525 	adc	a, #0x00
    000001CD DD 77 FF         [19]  526 	ld	-1 (ix), a
                                    527 ;src/player.c:245: if(playerXVelocity>0){
    000001D0 AF               [ 4]  528 	xor	a, a
    000001D1 BD               [ 4]  529 	cp	a, l
    000001D2 9C               [ 4]  530 	sbc	a, h
    000001D3 E2rD8r01         [10]  531 	jp	PO, 00536$
    000001D6 EE 80            [ 7]  532 	xor	a, #0x80
    000001D8                        533 00536$:
    000001D8 F2r18r02         [10]  534 	jp	P, 00152$
                                    535 ;src/player.c:249: if(IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    000001DB DD 7E FC         [19]  536 	ld	a, -4 (ix)
    000001DE C6 05            [ 7]  537 	add	a, #0x05
    000001E0 6F               [ 4]  538 	ld	l, a
    000001E1 DD 7E FD         [19]  539 	ld	a, -3 (ix)
    000001E4 CE 00            [ 7]  540 	adc	a, #0x00
    000001E6 67               [ 4]  541 	ld	h, a
    000001E7 E5               [11]  542 	push	hl
    000001E8 C5               [11]  543 	push	bc
    000001E9 FD E5            [15]  544 	push	iy
    000001EB CDr00r00         [17]  545 	call	_IsTileSolid
    000001EE FD E1            [14]  546 	pop	iy
    000001F0 C1               [10]  547 	pop	bc
    000001F1 E1               [10]  548 	pop	hl
    000001F2 B7               [ 4]  549 	or	a, a
    000001F3 20 1B            [12]  550 	jr	NZ, 00141$
    000001F5 E5               [11]  551 	push	hl
    000001F6 C5               [11]  552 	push	bc
    000001F7 FD E5            [15]  553 	push	iy
    000001F9 D1               [10]  554 	pop	de
    000001FA CDr00r00         [17]  555 	call	_IsTileSolid
    000001FD C1               [10]  556 	pop	bc
    000001FE E1               [10]  557 	pop	hl
    000001FF B7               [ 4]  558 	or	a, a
    00000200 20 0E            [12]  559 	jr	NZ, 00141$
    00000202 C5               [11]  560 	push	bc
    00000203 DD 5E FE         [19]  561 	ld	e, -2 (ix)
    00000206 DD 56 FF         [19]  562 	ld	d, -1 (ix)
    00000209 CDr00r00         [17]  563 	call	_IsTileSolid
    0000020C C1               [10]  564 	pop	bc
    0000020D B7               [ 4]  565 	or	a, a
    0000020E 28 47            [12]  566 	jr	Z, 00155$
    00000210                        567 00141$:
    00000210 21 00 00         [10]  568 	ld	hl, #0x0000
    00000213 22r04r00         [16]  569 	ld	(_playerXVelocity), hl
    00000216 18 3F            [12]  570 	jr	00155$
    00000218                        571 00152$:
                                    572 ;src/player.c:252: }else if(playerXVelocity<0){
    00000218 CB 7C            [ 8]  573 	bit	7, h
    0000021A 28 3B            [12]  574 	jr	Z, 00155$
                                    575 ;src/player.c:256: if(IsTileSolid(playerRealX-PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX-PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX-PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    0000021C DD 7E FC         [19]  576 	ld	a, -4 (ix)
    0000021F C6 FB            [ 7]  577 	add	a, #0xfb
    00000221 6F               [ 4]  578 	ld	l, a
    00000222 DD 7E FD         [19]  579 	ld	a, -3 (ix)
    00000225 CE FF            [ 7]  580 	adc	a, #0xff
    00000227 67               [ 4]  581 	ld	h, a
    00000228 E5               [11]  582 	push	hl
    00000229 C5               [11]  583 	push	bc
    0000022A FD E5            [15]  584 	push	iy
    0000022C CDr00r00         [17]  585 	call	_IsTileSolid
    0000022F FD E1            [14]  586 	pop	iy
    00000231 C1               [10]  587 	pop	bc
    00000232 E1               [10]  588 	pop	hl
    00000233 B7               [ 4]  589 	or	a, a
    00000234 20 1B            [12]  590 	jr	NZ, 00145$
    00000236 E5               [11]  591 	push	hl
    00000237 C5               [11]  592 	push	bc
    00000238 FD E5            [15]  593 	push	iy
    0000023A D1               [10]  594 	pop	de
    0000023B CDr00r00         [17]  595 	call	_IsTileSolid
    0000023E C1               [10]  596 	pop	bc
    0000023F E1               [10]  597 	pop	hl
    00000240 B7               [ 4]  598 	or	a, a
    00000241 20 0E            [12]  599 	jr	NZ, 00145$
    00000243 C5               [11]  600 	push	bc
    00000244 DD 5E FE         [19]  601 	ld	e, -2 (ix)
    00000247 DD 56 FF         [19]  602 	ld	d, -1 (ix)
    0000024A CDr00r00         [17]  603 	call	_IsTileSolid
    0000024D C1               [10]  604 	pop	bc
    0000024E B7               [ 4]  605 	or	a, a
    0000024F 28 06            [12]  606 	jr	Z, 00155$
    00000251                        607 00145$:
    00000251 21 00 00         [10]  608 	ld	hl, #0x0000
    00000254 22r04r00         [16]  609 	ld	(_playerXVelocity), hl
    00000257                        610 00155$:
                                    611 ;src/player.c:261: if(playerYVelocity>=0){
    00000257 2Ar06r00         [16]  612 	ld	hl, (_playerYVelocity)
    0000025A DD 75 FE         [19]  613 	ld	-2 (ix), l
    0000025D DD 74 FF         [19]  614 	ld	-1 (ix), h
                                    615 ;src/player.c:265: if(IsTileSolid(playerRealX+(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT)||IsTileSolid(playerRealX-(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT)){
    00000260 DD 6E FC         [19]  616 	ld	l, -4 (ix)
    00000263 DD 66 FD         [19]  617 	ld	h, -3 (ix)
    00000266 23               [ 6]  618 	inc	hl
    00000267 23               [ 6]  619 	inc	hl
    00000268 23               [ 6]  620 	inc	hl
    00000269 DD 7E FC         [19]  621 	ld	a, -4 (ix)
    0000026C C6 FD            [ 7]  622 	add	a, #0xfd
    0000026E 5F               [ 4]  623 	ld	e, a
    0000026F DD 7E FD         [19]  624 	ld	a, -3 (ix)
    00000272 CE FF            [ 7]  625 	adc	a, #0xff
    00000274 DD 73 FC         [19]  626 	ld	-4 (ix), e
    00000277 DD 77 FD         [19]  627 	ld	-3 (ix), a
                                    628 ;src/player.c:261: if(playerYVelocity>=0){
    0000027A DD CB FF 7E      [20]  629 	bit	7, -1 (ix)
    0000027E 20 2C            [12]  630 	jr	NZ, 00160$
                                    631 ;src/player.c:265: if(IsTileSolid(playerRealX+(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT)||IsTileSolid(playerRealX-(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT)){
    00000280 DD 7E FA         [19]  632 	ld	a, -6 (ix)
    00000283 C6 18            [ 7]  633 	add	a, #0x18
    00000285 5F               [ 4]  634 	ld	e, a
    00000286 DD 7E FB         [19]  635 	ld	a, -5 (ix)
    00000289 CE 00            [ 7]  636 	adc	a, #0x00
    0000028B 57               [ 4]  637 	ld	d, a
    0000028C D5               [11]  638 	push	de
    0000028D CDr00r00         [17]  639 	call	_IsTileSolid
    00000290 D1               [10]  640 	pop	de
    00000291 B7               [ 4]  641 	or	a, a
    00000292 20 0C            [12]  642 	jr	NZ, 00156$
    00000294 DD 6E FC         [19]  643 	ld	l, -4 (ix)
    00000297 DD 66 FD         [19]  644 	ld	h, -3 (ix)
    0000029A CDr00r00         [17]  645 	call	_IsTileSolid
    0000029D B7               [ 4]  646 	or	a, a
    0000029E 28 52            [12]  647 	jr	Z, 00167$
    000002A0                        648 00156$:
                                    649 ;src/player.c:266: playerYVelocity=0;
    000002A0 21 00 00         [10]  650 	ld	hl, #0x0000
    000002A3 22r06r00         [16]  651 	ld	(_playerYVelocity), hl
                                    652 ;src/player.c:267: grounded=TRUE;
    000002A6 DD 36 F7 01      [19]  653 	ld	-9 (ix), #0x01
    000002AA 18 46            [12]  654 	jr	00167$
                                    655 ;src/player.c:277: while(IsTileSolid(playerRealX+(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY)||IsTileSolid(playerRealX-(PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH-2),playerRealY)){
    000002AC                        656 00160$:
    000002AC E5               [11]  657 	push	hl
    000002AD C5               [11]  658 	push	bc
    000002AE 59               [ 4]  659 	ld	e, c
    000002AF 50               [ 4]  660 	ld	d, b
    000002B0 CDr00r00         [17]  661 	call	_IsTileSolid
    000002B3 C1               [10]  662 	pop	bc
    000002B4 E1               [10]  663 	pop	hl
    000002B5 B7               [ 4]  664 	or	a, a
    000002B6 20 10            [12]  665 	jr	NZ, 00161$
    000002B8 E5               [11]  666 	push	hl
    000002B9 59               [ 4]  667 	ld	e, c
    000002BA 50               [ 4]  668 	ld	d, b
    000002BB DD 6E FC         [19]  669 	ld	l, -4 (ix)
    000002BE DD 66 FD         [19]  670 	ld	h, -3 (ix)
    000002C1 CDr00r00         [17]  671 	call	_IsTileSolid
    000002C4 E1               [10]  672 	pop	hl
    000002C5 B7               [ 4]  673 	or	a, a
    000002C6 28 2A            [12]  674 	jr	Z, 00167$
    000002C8                        675 00161$:
                                    676 ;src/player.c:278: playerYVelocity=0;
    000002C8 AF               [ 4]  677 	xor	a, a
    000002C9 32r06r00         [13]  678 	ld	(_playerYVelocity+0), a
    000002CC 32r07r00         [13]  679 	ld	(_playerYVelocity+1), a
                                    680 ;src/player.c:279: playerY+=16;
    000002CF FD 2Ar02r00      [20]  681 	ld	iy, (_playerY)
    000002D3 11 10 00         [10]  682 	ld	de, #0x0010
    000002D6 FD 19            [15]  683 	add	iy, de
    000002D8 FD 22r02r00      [20]  684 	ld	(_playerY), iy
                                    685 ;src/player.c:280: playerRealY = playerY>>4;
    000002DC ED 4Br02r00      [20]  686 	ld	bc, (_playerY)
    000002E0 CB 38            [ 8]  687 	srl	b
    000002E2 CB 19            [ 8]  688 	rr	c
    000002E4 CB 38            [ 8]  689 	srl	b
    000002E6 CB 19            [ 8]  690 	rr	c
    000002E8 CB 38            [ 8]  691 	srl	b
    000002EA CB 19            [ 8]  692 	rr	c
    000002EC CB 38            [ 8]  693 	srl	b
    000002EE CB 19            [ 8]  694 	rr	c
    000002F0 18 BA            [12]  695 	jr	00160$
    000002F2                        696 00167$:
                                    697 ;src/player.c:286: uint8_t pressedA = (joypadCurrent & J_A && !(joypadPrevious & J_A));
    000002F2 3Ar00r00         [13]  698 	ld	a, (_joypadCurrent+0)
    000002F5 07               [ 4]  699 	rlca
    000002F6 07               [ 4]  700 	rlca
    000002F7 07               [ 4]  701 	rlca
    000002F8 30 08            [12]  702 	jr	NC, 00195$
    000002FA 3Ar00r00         [13]  703 	ld	a, (_joypadPrevious+0)
    000002FD 07               [ 4]  704 	rlca
    000002FE 07               [ 4]  705 	rlca
    000002FF 07               [ 4]  706 	rlca
    00000300 30 04            [12]  707 	jr	NC, 00196$
    00000302                        708 00195$:
    00000302 0E 00            [ 7]  709 	ld	c, #0x00
    00000304 18 02            [12]  710 	jr	00197$
    00000306                        711 00196$:
    00000306 0E 01            [ 7]  712 	ld	c, #0x01
    00000308                        713 00197$:
                                    714 ;src/player.c:287: uint8_t pressedUp = (joypadCurrent & J_UP && !(joypadPrevious & J_UP));
    00000308 3Ar00r00         [13]  715 	ld	a, (_joypadCurrent+0)
    0000030B E6 01            [ 7]  716 	and	a, #0x01
    0000030D 28 07            [12]  717 	jr	Z, 00198$
    0000030F 3Ar00r00         [13]  718 	ld	a, (_joypadPrevious+0)
    00000312 E6 01            [ 7]  719 	and	a, #0x01
    00000314 28 03            [12]  720 	jr	Z, 00199$
    00000316                        721 00198$:
    00000316 AF               [ 4]  722 	xor	a, a
    00000317 18 02            [12]  723 	jr	00200$
    00000319                        724 00199$:
    00000319 3E 01            [ 7]  725 	ld	a, #0x01
    0000031B                        726 00200$:
                                    727 ;src/player.c:288: uint8_t pressedAOrUp = pressedA||pressedUp;
    0000031B 0C               [ 4]  728 	inc	c
    0000031C 0D               [ 4]  729 	dec	c
    0000031D 20 06            [12]  730 	jr	NZ, 00202$
    0000031F B7               [ 4]  731 	or	a, a
    00000320 20 03            [12]  732 	jr	NZ, 00202$
    00000322 4F               [ 4]  733 	ld	c, a
    00000323 18 02            [12]  734 	jr	00203$
    00000325                        735 00202$:
    00000325 0E 01            [ 7]  736 	ld	c, #0x01
    00000327                        737 00203$:
                                    738 ;src/player.c:291: if(grounded && pressedAOrUp){
    00000327 DD 7E F7         [19]  739 	ld	a, -9 (ix)
    0000032A B7               [ 4]  740 	or	a, a
    0000032B 28 0F            [12]  741 	jr	Z, 00169$
    0000032D 79               [ 4]  742 	ld	a, c
    0000032E B7               [ 4]  743 	or	a, a
    0000032F 28 0B            [12]  744 	jr	Z, 00169$
                                    745 ;src/player.c:292: playerYVelocity=-PLAYER_CHARACTER_JUMP_VELOCITY;
    00000331 21 DA FD         [10]  746 	ld	hl, #0xfdda
    00000334 22r06r00         [16]  747 	ld	(_playerYVelocity), hl
                                    748 ;src/player.c:293: playerJumpIncrease=PLAYER_CHARACTER_INCREASE_JUMP_TIMER_MAX;
    00000337 21r01r00         [10]  749 	ld	hl, #_playerJumpIncrease
    0000033A 36 14            [10]  750 	ld	(hl), #0x14
    0000033C                        751 00169$:
                                    752 ;src/player.c:261: if(playerYVelocity>=0){
    0000033C ED 4Br06r00      [20]  753 	ld	bc, (_playerYVelocity)
                                    754 ;src/player.c:297: if(!grounded){
    00000340 DD 7E F7         [19]  755 	ld	a, -9 (ix)
    00000343 B7               [ 4]  756 	or	a, a
    00000344 20 27            [12]  757 	jr	NZ, 00180$
                                    758 ;src/player.c:300: if(playerJumpIncrease>0)playerJumpIncrease--;
    00000346 3Ar01r00         [13]  759 	ld	a, (_playerJumpIncrease+0)
    00000349 B7               [ 4]  760 	or	a, a
    0000034A 28 04            [12]  761 	jr	Z, 00172$
    0000034C 21r01r00         [10]  762 	ld	hl, #_playerJumpIncrease
    0000034F 35               [11]  763 	dec	(hl)
    00000350                        764 00172$:
                                    765 ;src/player.c:139: int16_t moveSpeed = (joypadCurrent & J_B) ?PLAYER_CHARACTER_RUN_VELOCITY:PLAYER_CHARACTER_WALK_VELOCITY;
    00000350 3Ar00r00         [13]  766 	ld	a, (_joypadCurrent)
                                    767 ;src/player.c:303: if(!((joypadCurrent & J_A||joypadCurrent & J_UP))||playerJumpIncrease==0){
    00000353 CB 6F            [ 8]  768 	bit	5, a
    00000355 20 03            [12]  769 	jr	NZ, 00176$
    00000357 0F               [ 4]  770 	rrca
    00000358 30 06            [12]  771 	jr	NC, 00173$
    0000035A                        772 00176$:
    0000035A 3Ar01r00         [13]  773 	ld	a, (_playerJumpIncrease+0)
    0000035D B7               [ 4]  774 	or	a, a
    0000035E 20 17            [12]  775 	jr	NZ, 00181$
    00000360                        776 00173$:
                                    777 ;src/player.c:306: playerYVelocity+=GRAVTY;
    00000360 21 2D 00         [10]  778 	ld	hl, #0x002d
    00000363 09               [11]  779 	add	hl, bc
    00000364 22r06r00         [16]  780 	ld	(_playerYVelocity), hl
                                    781 ;src/player.c:309: playerJumpIncrease=0;
    00000367 AF               [ 4]  782 	xor	a, a
    00000368 32r01r00         [13]  783 	ld	(_playerJumpIncrease+0), a
    0000036B 18 0A            [12]  784 	jr	00181$
    0000036D                        785 00180$:
                                    786 ;src/player.c:313: }else if(playerYVelocity>=0){
    0000036D CB 78            [ 8]  787 	bit	7, b
    0000036F 20 06            [12]  788 	jr	NZ, 00181$
                                    789 ;src/player.c:316: playerYVelocity=0;
    00000371 21 00 00         [10]  790 	ld	hl, #0x0000
    00000374 22r06r00         [16]  791 	ld	(_playerYVelocity), hl
    00000377                        792 00181$:
                                    793 ;src/player.c:320: playerX+=playerXVelocity>>4;
    00000377 3Ar04r00         [13]  794 	ld	a, (_playerXVelocity+0)
    0000037A DD 77 F8         [19]  795 	ld	-8 (ix), a
    0000037D 3Ar05r00         [13]  796 	ld	a, (_playerXVelocity+1)
    00000380 DD 77 F9         [19]  797 	ld	-7 (ix), a
    00000383 DD CB F9 2E      [23]  798 	sra	-7 (ix)
    00000387 DD CB F8 1E      [23]  799 	rr	-8 (ix)
    0000038B DD CB F9 2E      [23]  800 	sra	-7 (ix)
    0000038F DD CB F8 1E      [23]  801 	rr	-8 (ix)
    00000393 DD CB F9 2E      [23]  802 	sra	-7 (ix)
    00000397 DD CB F8 1E      [23]  803 	rr	-8 (ix)
    0000039B DD CB F9 2E      [23]  804 	sra	-7 (ix)
    0000039F DD CB F8 1E      [23]  805 	rr	-8 (ix)
    000003A3 DD 7E F8         [19]  806 	ld	a, -8 (ix)
    000003A6 DD 5E F9         [19]  807 	ld	e, -7 (ix)
    000003A9 21r00r00         [10]  808 	ld	hl, #_playerX
    000003AC 86               [ 7]  809 	add	a, (hl)
    000003AD 77               [ 7]  810 	ld	(hl), a
    000003AE 23               [ 6]  811 	inc	hl
    000003AF 7B               [ 4]  812 	ld	a, e
    000003B0 8E               [ 7]  813 	adc	a, (hl)
    000003B1 77               [ 7]  814 	ld	(hl), a
                                    815 ;src/player.c:321: playerY+=playerYVelocity>>4;
    000003B2 2Ar06r00         [16]  816 	ld	hl, (_playerYVelocity)
    000003B5 CB 2C            [ 8]  817 	sra	h
    000003B7 CB 1D            [ 8]  818 	rr	l
    000003B9 CB 2C            [ 8]  819 	sra	h
    000003BB CB 1D            [ 8]  820 	rr	l
    000003BD CB 2C            [ 8]  821 	sra	h
    000003BF CB 1D            [ 8]  822 	rr	l
    000003C1 CB 2C            [ 8]  823 	sra	h
    000003C3 CB 1D            [ 8]  824 	rr	l
    000003C5 7D               [ 4]  825 	ld	a, l
    000003C6 5C               [ 4]  826 	ld	e, h
    000003C7 21r02r00         [10]  827 	ld	hl, #_playerY
    000003CA 86               [ 7]  828 	add	a, (hl)
    000003CB 77               [ 7]  829 	ld	(hl), a
    000003CC 23               [ 6]  830 	inc	hl
    000003CD 7B               [ 4]  831 	ld	a, e
    000003CE 8E               [ 7]  832 	adc	a, (hl)
    000003CF 77               [ 7]  833 	ld	(hl), a
                                    834 ;src/player.c:324: playerRealX = playerX>>4;
    000003D0 3Ar00r00         [13]  835 	ld	a, (_playerX+0)
    000003D3 DD 77 FA         [19]  836 	ld	-6 (ix), a
    000003D6 3Ar01r00         [13]  837 	ld	a, (_playerX+1)
    000003D9 DD 77 FB         [19]  838 	ld	-5 (ix), a
    000003DC DD CB FB 3E      [23]  839 	srl	-5 (ix)
    000003E0 DD CB FA 1E      [23]  840 	rr	-6 (ix)
    000003E4 DD CB FB 3E      [23]  841 	srl	-5 (ix)
    000003E8 DD CB FA 1E      [23]  842 	rr	-6 (ix)
    000003EC DD CB FB 3E      [23]  843 	srl	-5 (ix)
    000003F0 DD CB FA 1E      [23]  844 	rr	-6 (ix)
    000003F4 DD CB FB 3E      [23]  845 	srl	-5 (ix)
    000003F8 DD CB FA 1E      [23]  846 	rr	-6 (ix)
                                    847 ;src/player.c:325: playerRealY = playerY>>4;
    000003FC 3Ar02r00         [13]  848 	ld	a, (_playerY+0)
    000003FF DD 77 FC         [19]  849 	ld	-4 (ix), a
    00000402 3Ar03r00         [13]  850 	ld	a, (_playerY+1)
    00000405 DD 77 FD         [19]  851 	ld	-3 (ix), a
    00000408 DD CB FD 3E      [23]  852 	srl	-3 (ix)
    0000040C DD CB FC 1E      [23]  853 	rr	-4 (ix)
    00000410 DD CB FD 3E      [23]  854 	srl	-3 (ix)
    00000414 DD CB FC 1E      [23]  855 	rr	-4 (ix)
    00000418 DD CB FD 3E      [23]  856 	srl	-3 (ix)
    0000041C DD CB FC 1E      [23]  857 	rr	-4 (ix)
    00000420 DD CB FD 3E      [23]  858 	srl	-3 (ix)
    00000424 DD CB FC 1E      [23]  859 	rr	-4 (ix)
                                    860 ;src/player.c:249: if(IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+2)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+PLAYER_CHARACTER_BOUNDING_BOX_HALF_HEIGHT)||IsTileSolid(playerRealX+PLAYER_CHARACTER_BOUNDING_BOX_HALF_WIDTH,playerRealY+(PLAYER_CHARACTER_BOUNDING_BOX_HEIGHT-2)))playerXVelocity=0;
    00000428 DD 7E FA         [19]  861 	ld	a, -6 (ix)
    0000042B DD 77 FE         [19]  862 	ld	-2 (ix), a
    0000042E DD 7E FB         [19]  863 	ld	a, -5 (ix)
    00000431 DD 77 FF         [19]  864 	ld	-1 (ix), a
                                    865 ;src/player.c:328: if(playerRealX>=(DEVICE_SCREEN_PX_WIDTH>>1)){
    00000434 DD 7E FA         [19]  866 	ld	a, -6 (ix)
    00000437 D6 80            [ 7]  867 	sub	a, #0x80
    00000439 DD 7E FB         [19]  868 	ld	a, -5 (ix)
    0000043C DE 00            [ 7]  869 	sbc	a, #0x00
    0000043E 38 2A            [12]  870 	jr	C, 00185$
                                    871 ;src/player.c:329: uint16_t max = currentLevelWidth-DEVICE_SCREEN_PX_WIDTH;
    00000440 2Ar00r00         [16]  872 	ld	hl, (_currentLevelWidth)
    00000443 4D               [ 4]  873 	ld	c, l
    00000444 7C               [ 4]  874 	ld	a,h
    00000445 3D               [ 4]  875 	dec	a
    00000446 47               [ 4]  876 	ld	b, a
                                    877 ;src/player.c:330: camera_x=playerRealX-(DEVICE_SCREEN_PX_WIDTH>>1);
    00000447 DD 7E FE         [19]  878 	ld	a, -2 (ix)
    0000044A C6 80            [ 7]  879 	add	a, #0x80
    0000044C 6F               [ 4]  880 	ld	l, a
    0000044D DD 7E FF         [19]  881 	ld	a, -1 (ix)
    00000450 CE FF            [ 7]  882 	adc	a, #0xff
    00000452 67               [ 4]  883 	ld	h, a
    00000453 22r00r00         [16]  884 	ld	(_camera_x), hl
                                    885 ;src/player.c:333: if(camera_x>max)camera_x=max;
    00000456 79               [ 4]  886 	ld	a, c
    00000457 FD 21r00r00      [14]  887 	ld	iy, #_camera_x
    0000045B FD 96 00         [19]  888 	sub	a, 0 (iy)
    0000045E 78               [ 4]  889 	ld	a, b
    0000045F FD 9E 01         [19]  890 	sbc	a, 1 (iy)
    00000462 30 0C            [12]  891 	jr	NC, 00186$
    00000464 ED 43r00r00      [20]  892 	ld	(_camera_x), bc
    00000468 18 06            [12]  893 	jr	00186$
    0000046A                        894 00185$:
                                    895 ;src/player.c:335: else camera_x=0;
    0000046A 21 00 00         [10]  896 	ld	hl, #0x0000
    0000046D 22r00r00         [16]  897 	ld	(_camera_x), hl
    00000470                        898 00186$:
                                    899 ;src/player.c:345: uint8_t frame = grounded ? (turning ? 5 :((playerXVelocity>>4)==0 ? 0 : threeFrameCounterValue)) : (playerYVelocity<0 ? 3 : 4);
    00000470 DD 7E F7         [19]  900 	ld	a, -9 (ix)
    00000473 B7               [ 4]  901 	or	a, a
    00000474 28 22            [12]  902 	jr	Z, 00204$
    00000476 DD 7E F6         [19]  903 	ld	a, -10 (ix)
    00000479 B7               [ 4]  904 	or	a, a
    0000047A 28 06            [12]  905 	jr	Z, 00206$
    0000047C DD 36 F9 05      [19]  906 	ld	-7 (ix), #0x05
    00000480 18 11            [12]  907 	jr	00207$
    00000482                        908 00206$:
    00000482 DD 7E F9         [19]  909 	ld	a, -7 (ix)
    00000485 DD B6 F8         [19]  910 	or	a, -8 (ix)
    00000488 20 03            [12]  911 	jr	NZ, 00208$
    0000048A AF               [ 4]  912 	xor	a, a
    0000048B 18 03            [12]  913 	jr	00209$
    0000048D                        914 00208$:
    0000048D DD 7E F5         [19]  915 	ld	a, -11 (ix)
    00000490                        916 00209$:
    00000490 DD 77 F9         [19]  917 	ld	-7 (ix), a
    00000493                        918 00207$:
    00000493 DD 7E F9         [19]  919 	ld	a, -7 (ix)
    00000496 18 1C            [12]  920 	jr	00205$
    00000498                        921 00204$:
    00000498 2Ar06r00         [16]  922 	ld	hl, (_playerYVelocity)
    0000049B DD 75 F8         [19]  923 	ld	-8 (ix), l
    0000049E DD 74 F9         [19]  924 	ld	-7 (ix), h
    000004A1 DD CB F9 7E      [20]  925 	bit	7, -7 (ix)
    000004A5 28 06            [12]  926 	jr	Z, 00210$
    000004A7 DD 36 F9 03      [19]  927 	ld	-7 (ix), #0x03
    000004AB 18 04            [12]  928 	jr	00211$
    000004AD                        929 00210$:
    000004AD DD 36 F9 04      [19]  930 	ld	-7 (ix), #0x04
    000004B1                        931 00211$:
    000004B1 DD 7E F9         [19]  932 	ld	a, -7 (ix)
    000004B4                        933 00205$:
    000004B4 DD 77 F7         [19]  934 	ld	-9 (ix), a
                                    935 ;src/player.c:346: uint8_t directionOffset = facingRight ? 0 : 6;
    000004B7 3Ar00r00         [13]  936 	ld	a, (_facingRight+0)
    000004BA B7               [ 4]  937 	or	a, a
    000004BB 28 03            [12]  938 	jr	Z, 00212$
    000004BD AF               [ 4]  939 	xor	a, a
    000004BE 18 02            [12]  940 	jr	00213$
    000004C0                        941 00212$:
    000004C0 3E 06            [ 7]  942 	ld	a, #0x06
    000004C2                        943 00213$:
                                    944 ;src/player.c:348: uint8_t spritesUsed = DrawPlayer(playerRealX,playerRealY,frame+directionOffset);
    000004C2 DD 77 F9         [19]  945 	ld	-7 (ix), a
    000004C5 DD 86 F7         [19]  946 	add	a, -9 (ix)
    000004C8 DD 77 F9         [19]  947 	ld	-7 (ix), a
    000004CB F5               [11]  948 	push	af
    000004CC 33               [ 6]  949 	inc	sp
    000004CD DD 5E FC         [19]  950 	ld	e, -4 (ix)
    000004D0 DD 56 FD         [19]  951 	ld	d, -3 (ix)
    000004D3 DD 6E FA         [19]  952 	ld	l, -6 (ix)
    000004D6 DD 66 FB         [19]  953 	ld	h, -5 (ix)
    000004D9 CDr42r00         [17]  954 	call	_DrawPlayer
    000004DC 4F               [ 4]  955 	ld	c, a
                                    956 ;src/player.c:351: if(playerRealX>currentLevelWidth-32){
    000004DD 2Ar00r00         [16]  957 	ld	hl, (_currentLevelWidth)
    000004E0 7D               [ 4]  958 	ld	a, l
    000004E1 C6 E0            [ 7]  959 	add	a, #0xe0
    000004E3 47               [ 4]  960 	ld	b, a
    000004E4 7C               [ 4]  961 	ld	a, h
    000004E5 CE FF            [ 7]  962 	adc	a, #0xff
    000004E7 5F               [ 4]  963 	ld	e, a
    000004E8 78               [ 4]  964 	ld	a, b
    000004E9 DD 96 FE         [19]  965 	sub	a, -2 (ix)
    000004EC 7B               [ 4]  966 	ld	a, e
    000004ED DD 9E FF         [19]  967 	sbc	a, -1 (ix)
    000004F0 30 04            [12]  968 	jr	NC, 00188$
                                    969 ;src/player.c:352: nextLevel++;
    000004F2 21r00r00         [10]  970 	ld	hl, #_nextLevel
    000004F5 34               [11]  971 	inc	(hl)
    000004F6                        972 00188$:
                                    973 ;src/player.c:355: return spritesUsed;
    000004F6 79               [ 4]  974 	ld	a, c
                                    975 ;src/player.c:356: }
    000004F7 DD F9            [10]  976 	ld	sp, ix
    000004F9 DD E1            [14]  977 	pop	ix
    000004FB C9               [10]  978 	ret
                                    979 	.area _CODE_255
                                    980 	.area _INITIALIZER
    00000000                        981 __xinit__facingRight:
    00000000 01                     982 	.db #0x01	; 1
    00000001                        983 __xinit__playerJumpIncrease:
    00000001 00                     984 	.db #0x00	; 0
    00000002                        985 __xinit__threeFrameCounter:
    00000002 00                     986 	.db #0x00	; 0
                                    987 	.area _CABS (ABS)
