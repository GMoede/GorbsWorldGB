                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _SetCurrentLevelSubmap
                                     12 	.globl b_UpdateCamera
                                     13 	.globl _UpdateCamera
                                     14 	.globl _SetupCurrentLevel
                                     15 	.globl _ShowCentered
                                     16 	.globl _WaitForStartOrA
                                     17 	.globl _hide_sprites_range
                                     18 	.globl b_UpdatePlayer
                                     19 	.globl _UpdatePlayer
                                     20 	.globl b_SetupPlayer
                                     21 	.globl _SetupPlayer
                                     22 	.globl _display_off
                                     23 	.globl _vsync
                                     24 	.globl _joypad
                                     25 ;--------------------------------------------------------
                                     26 ; special function registers
                                     27 ;--------------------------------------------------------
                                     28 ;--------------------------------------------------------
                                     29 ; ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area _DATA
                                     32 ;--------------------------------------------------------
                                     33 ; ram data
                                     34 ;--------------------------------------------------------
                                     35 	.area _INITIALIZED
                                     36 ;--------------------------------------------------------
                                     37 ; absolute external ram data
                                     38 ;--------------------------------------------------------
                                     39 	.area _DABS (ABS)
                                     40 ;--------------------------------------------------------
                                     41 ; global & static initialisations
                                     42 ;--------------------------------------------------------
                                     43 	.area _HOME
                                     44 	.area _GSINIT
                                     45 	.area _GSFINAL
                                     46 	.area _GSINIT
                                     47 ;--------------------------------------------------------
                                     48 ; Home
                                     49 ;--------------------------------------------------------
                                     50 	.area _HOME
                                     51 	.area _HOME
                                     52 ;--------------------------------------------------------
                                     53 ; code
                                     54 ;--------------------------------------------------------
                                     55 	.area _CODE
                                     56 ;src/main.c:14: void main(void)
                                     57 ;	---------------------------------
                                     58 ; Function main
                                     59 ; ---------------------------------
    00000000                         60 _main::
    00000000 3B               [ 8]   61 	dec	sp
                                     62 ;src/main.c:20: BGP_REG = DMG_PALETTE(DMG_BLACK, DMG_WHITE, DMG_LITE_GRAY, DMG_DARK_GRAY);
    00000001 3E 93            [ 8]   63 	ld	a, #0x93
    00000003 E0r00            [12]   64 	ldh	(_BGP_REG + 0), a
                                     65 ;src/main.c:21: OBP0_REG =OBP1_REG =DMG_PALETTE(DMG_DARK_GRAY, DMG_BLACK, DMG_WHITE,  DMG_LITE_GRAY );
    00000005 3E 4E            [ 8]   66 	ld	a, #0x4e
    00000007 E0r00            [12]   67 	ldh	(_OBP1_REG + 0), a
    00000009 3E 4E            [ 8]   68 	ld	a, #0x4e
    0000000B E0r00            [12]   69 	ldh	(_OBP0_REG + 0), a
                                     70 ;src/main.c:25: SHOW_BKG;
    0000000D F0r00            [12]   71 	ldh	a, (_LCDC_REG + 0)
    0000000F F6 80            [ 8]   72 	or	a, #0x80
    00000011 E0r00            [12]   73 	ldh	(_LCDC_REG + 0), a
                                     74 ;src/main.c:26: SHOW_SPRITES;
    00000013 F0r00            [12]   75 	ldh	a, (_LCDC_REG + 0)
    00000015 F6 40            [ 8]   76 	or	a, #0x40
    00000017 E0r00            [12]   77 	ldh	(_LCDC_REG + 0), a
                                     78 ;src/main.c:27: SPRITES_8x16;
    00000019 F0r00            [12]   79 	ldh	a, (_LCDC_REG + 0)
    0000001B F6 20            [ 8]   80 	or	a, #0x20
    0000001D E0r00            [12]   81 	ldh	(_LCDC_REG + 0), a
                                     82 ;src/main.c:29: ShowCentered(TitleScreen_WIDTH,TitleScreen_HEIGHT,BANK(TitleScreen),TitleScreen_tiles,TitleScreen_TILE_COUNT,TitleScreen_map,TitleScreen_palettes);
    0000001F 11r00r00         [12]   83 	ld	de, #_TitleScreen_map+0
    00000022 01r00r00         [12]   84 	ld	bc, #_TitleScreen_tiles+0
    00000025 3Er00            [ 8]   85 	ld	a, #<(___bank_TitleScreen)
    00000027 21r00r00         [12]   86 	ld	hl, #_TitleScreen_palettes
    0000002A E5               [16]   87 	push	hl
    0000002B D5               [16]   88 	push	de
    0000002C 26 76            [ 8]   89 	ld	h, #0x76
    0000002E E5               [16]   90 	push	hl
    0000002F 33               [ 8]   91 	inc	sp
    00000030 C5               [16]   92 	push	bc
    00000031 F5               [16]   93 	push	af
    00000032 33               [ 8]   94 	inc	sp
    00000033 1E 48            [ 8]   95 	ld	e, #0x48
    00000035 3E A0            [ 8]   96 	ld	a, #0xa0
    00000037 CDr00r00         [24]   97 	call	_ShowCentered
                                     98 ;src/main.c:31: WaitForStartOrA();
    0000003A CDr00r00         [24]   99 	call	_WaitForStartOrA
                                    100 ;src/main.c:34: currentLevel=255;
    0000003D 21r00r00         [12]  101 	ld	hl, #_currentLevel
    00000040 36 FF            [12]  102 	ld	(hl), #0xff
                                    103 ;src/main.c:35: nextLevel=0;
    00000042 AF               [ 4]  104 	xor	a, a
    00000043 EAr00r00         [16]  105 	ld	(#_nextLevel),a
                                    106 ;src/main.c:38: while(1) {
    00000046                        107 00106$:
                                    108 ;src/main.c:41: vsync();
    00000046 CDr00r00         [24]  109 	call	_vsync
                                    110 ;src/main.c:44: if(nextLevel!=currentLevel){
    00000049 FAr00r00         [16]  111 	ld	a, (#_nextLevel)
    0000004C 21r00r00         [12]  112 	ld	hl, #_currentLevel
    0000004F 96               [ 8]  113 	sub	a, (hl)
    00000050 28 50            [12]  114 	jr	Z, 00104$
                                    115 ;src/main.c:48: if(currentLevel!=255){
    00000052 FAr00r00         [16]  116 	ld	a, (#_currentLevel)
    00000055 3C               [ 4]  117 	inc	a
    00000056 28 21            [12]  118 	jr	Z, 00102$
                                    119 ;src/main.c:50: ShowCentered(NextLevel_WIDTH,NextLevel_HEIGHT,BANK(NextLevel),NextLevel_tiles,NextLevel_TILE_COUNT,NextLevel_map,NextLevel_palettes);
    00000058 F8 00            [12]  120 	ldhl	sp,	#0
    0000005A 36r00            [12]  121 	ld	(hl), #<(___bank_NextLevel)
    0000005C 11r00r00         [12]  122 	ld	de, #_NextLevel_palettes
    0000005F D5               [16]  123 	push	de
    00000060 11r00r00         [12]  124 	ld	de, #_NextLevel_map
    00000063 D5               [16]  125 	push	de
    00000064 3E 1C            [ 8]  126 	ld	a, #0x1c
    00000066 F5               [16]  127 	push	af
    00000067 33               [ 8]  128 	inc	sp
    00000068 11r00r00         [12]  129 	ld	de, #_NextLevel_tiles
    0000006B D5               [16]  130 	push	de
    0000006C 7E               [ 8]  131 	ld	a, (hl)
    0000006D F5               [16]  132 	push	af
    0000006E 33               [ 8]  133 	inc	sp
    0000006F 1E 48            [ 8]  134 	ld	e, #0x48
    00000071 3E A0            [ 8]  135 	ld	a, #0xa0
    00000073 CDr00r00         [24]  136 	call	_ShowCentered
                                    137 ;src/main.c:52: WaitForStartOrA();
    00000076 CDr00r00         [24]  138 	call	_WaitForStartOrA
    00000079                        139 00102$:
                                    140 ;src/main.c:56: currentLevel=nextLevel;
    00000079 FAr00r00         [16]  141 	ld	a, (#_nextLevel)
    0000007C EAr00r00         [16]  142 	ld	(#_currentLevel),a
                                    143 ;src/main.c:58: DISPLAY_OFF;
    0000007F CDr00r00         [24]  144 	call	_display_off
                                    145 ;src/main.c:61: SetupCurrentLevel();
    00000082 CDr00r00         [24]  146 	call	_SetupCurrentLevel
                                    147 ;src/main.c:63: camera_x=0;
    00000085 AF               [ 4]  148 	xor	a, a
    00000086 21r00r00         [12]  149 	ld	hl, #_camera_x
    00000089 22               [ 8]  150 	ld	(hl+), a
    0000008A 77               [ 8]  151 	ld	(hl), a
                                    152 ;src/main.c:69: SetCurrentLevelSubmap(0,0,DEVICE_SCREEN_WIDTH+1,DEVICE_SCREEN_HEIGHT);
    0000008B 21 15 12         [12]  153 	ld	hl, #0x1215
    0000008E E5               [16]  154 	push	hl
    0000008F AF               [ 4]  155 	xor	a, a
    00000090 5F               [ 4]  156 	ld	e, a
    00000091 CDr00r00         [24]  157 	call	_SetCurrentLevelSubmap
                                    158 ;src/main.c:71: DISPLAY_ON;
    00000094 F0r00            [12]  159 	ldh	a, (_LCDC_REG + 0)
    00000096 F6 01            [ 8]  160 	or	a, #0x01
    00000098 E0r00            [12]  161 	ldh	(_LCDC_REG + 0), a
                                    162 ;src/main.c:81: SetupPlayer();
    0000009A 1Er00            [ 8]  163 	ld	e, #b_SetupPlayer
    0000009C 21r00r00         [12]  164 	ld	hl, #_SetupPlayer
    0000009F CDr00r00         [24]  165 	call	___sdcc_bcall_ehl
    000000A2                        166 00104$:
                                    167 ;src/main.c:85: joypadPrevious = joypadCurrent;
    000000A2 FAr00r00         [16]  168 	ld	a, (#_joypadCurrent)
    000000A5 EAr00r00         [16]  169 	ld	(#_joypadPrevious),a
                                    170 ;src/main.c:86: joypadCurrent = joypad();
    000000A8 CDr00r00         [24]  171 	call	_joypad
    000000AB EAr00r00         [16]  172 	ld	(#_joypadCurrent),a
                                    173 ;src/main.c:88: uint8_t spritesUsed = UpdatePlayer();
    000000AE 1Er00            [ 8]  174 	ld	e, #b_UpdatePlayer
    000000B0 21r00r00         [12]  175 	ld	hl, #_UpdatePlayer
    000000B3 CDr00r00         [24]  176 	call	___sdcc_bcall_ehl
                                    177 ;src/main.c:89: hide_sprites_range(spritesUsed,MAX_HARDWARE_SPRITES);
    000000B6 1E 28            [ 8]  178 	ld	e, #0x28
    000000B8 CDr00r00         [24]  179 	call	_hide_sprites_range
                                    180 ;src/main.c:91: UpdateCamera();
    000000BB 1Er00            [ 8]  181 	ld	e, #b_UpdateCamera
    000000BD 21r00r00         [12]  182 	ld	hl, #_UpdateCamera
    000000C0 CDr00r00         [24]  183 	call	___sdcc_bcall_ehl
    000000C3 C3r46r00         [16]  184 	jp	00106$
                                    185 ;src/main.c:93: }
    000000C6 33               [ 8]  186 	inc	sp
    000000C7 C9               [16]  187 	ret
                                    188 	.area _CODE
                                    189 	.area _INITIALIZER
                                    190 	.area _CABS (ABS)
