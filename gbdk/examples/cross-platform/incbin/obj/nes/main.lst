                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;; Ordering of segments for the linker.
                                      8 	.area _ZP      (PAG)
                                      9 	.area _OSEG    (PAG, OVR)
                                     10 	.area _HOME
                                     11 	.area _GSINIT
                                     12 	.area _GSFINAL
                                     13 	.area _CODE
                                     14 	.area _XINIT
                                     15 	.area _DATA
                                     16 	.area _DATA
                                     17 	.area _BSS
                                     18 ;--------------------------------------------------------
                                     19 ; Public variables in this module
                                     20 ;--------------------------------------------------------
                                     21 	.globl _main
                                     22 	.globl _init_gfx
                                     23 	.globl b___func_blank_tile_data
                                     24 	.globl ___func_blank_tile_data
                                     25 	.globl b___func_logo_map
                                     26 	.globl ___func_logo_map
                                     27 	.globl b___func_logo_tiles_data
                                     28 	.globl ___func_logo_tiles_data
                                     29 	.globl _fill_bkg_rect
                                     30 	.globl _set_bkg_tiles
                                     31 	.globl _set_bkg_data
                                     32 	.globl _vsync
                                     33 	.globl _OAMDMA
                                     34 	.globl _PPUDATA
                                     35 	.globl _PPUADDR
                                     36 	.globl _PPUSCROLL
                                     37 	.globl _OAMDATA
                                     38 	.globl _OAMADDR
                                     39 	.globl _PPUSTATUS
                                     40 	.globl _PPUMASK
                                     41 	.globl _PPUCTRL
                                     42 ;--------------------------------------------------------
                                     43 ; ZP ram data
                                     44 ;--------------------------------------------------------
                                     45 	.area _ZP      (PAG)
                                     46 ;--------------------------------------------------------
                                     47 ; overlayable items in ram
                                     48 ;--------------------------------------------------------
                                     49 ;--------------------------------------------------------
                                     50 ; uninitialized external ram data
                                     51 ;--------------------------------------------------------
                                     52 	.area _BSS
                         00002000    53 _PPUCTRL	=	0x2000
                         00002001    54 _PPUMASK	=	0x2001
                         00002002    55 _PPUSTATUS	=	0x2002
                         00002003    56 _OAMADDR	=	0x2003
                         00002004    57 _OAMDATA	=	0x2004
                         00002005    58 _PPUSCROLL	=	0x2005
                         00002006    59 _PPUADDR	=	0x2006
                         00002007    60 _PPUDATA	=	0x2007
                         00004014    61 _OAMDMA	=	0x4014
                                     62 ;--------------------------------------------------------
                                     63 ; absolute external ram data
                                     64 ;--------------------------------------------------------
                                     65 	.area _DABS    (ABS)
                                     66 ;--------------------------------------------------------
                                     67 ; initialized external ram data
                                     68 ;--------------------------------------------------------
                                     69 	.area _DATA
                                     70 ;--------------------------------------------------------
                                     71 ; global & static initialisations
                                     72 ;--------------------------------------------------------
                                     73 	.area _HOME
                                     74 	.area _GSINIT
                                     75 	.area _GSFINAL
                                     76 	.area _GSINIT
                                     77 ;--------------------------------------------------------
                                     78 ; Home
                                     79 ;--------------------------------------------------------
                                     80 	.area _HOME
                                     81 	.area _HOME
                                     82 ;--------------------------------------------------------
                                     83 ; code
                                     84 ;--------------------------------------------------------
                                     85 	.area _CODE
                                     86 ;------------------------------------------------------------
                                     87 ;Allocation info for local variables in function '__func_logo_tiles_data'
                                     88 ;------------------------------------------------------------
                                     89 ;	src/main.c: 6: INCBIN(logo_tiles_data, "res/gbdk2020.bin") // Variable name to use, Path to file
                                     90 ;	genLabel
                                     91 ;	Raw cost for generated ic 0 : (0, 0.000000) count=1.000000
                                     92 ;	-----------------------------------------
                                     93 ;	 function __func_logo_tiles_data
                                     94 ;	-----------------------------------------
                                     95 ;	Register assignment is optimal.
                                     96 ;	Stack space usage: 0 bytes.
                         00000000    97 	b___func_logo_tiles_data	= 0
    00000000                         98 ___func_logo_tiles_data:
                                     99 ;	naked function: no prologue.
                                    100 ;	Raw cost for generated ic 1 : (0, 0.000000) count=1.000000
                                    101 ;	m6502_genInline
    00000000                        102 		_logo_tiles_data::
    00000000                        103 	 1$:
    00000000 3F 3F 60 7F C0 C0 80   104 	 .incbin "res/gbdk2020.bin" 
             C0 80 C0 80 C0 80 C0
             80 C0 FF FF 00 FF 00
             00 00 00 00 00 00 00
             00 00 00 00 FC FC 06
             FE 03 03 01 03 01 03
             01 03 01 03 01 03 80
             C0 83 C3 83 C7 83 C7
             83 C7 83 C7 83 C7 83
             C7 00 00 FF FF FF FF
             FF FF FF FF F8 FF FF
             F8 FF F8 00 00 FF FF
             FF FF FF FF FF FF 00
             FF FF 00 FF 00 00 00
             FF FF FF FF FF FF FF
             FF 0F FF EF 1F EF 1F
             01 03 C1 C3 C1 C3 C1
             C3 C1 C3 C1 C3 C1 C3
             C1 C3
    00000320                        105 	 2$:
                         00000320   106 	 ___size_logo_tiles_data = (2$-1$) 
                                    107 	 .globl ___size_logo_tiles_data 
                                    108 	 .local b___func_logo_tiles_data 
                         00000000   109 	 ___bank_logo_tiles_data = b___func_logo_tiles_data 
                                    110 	 .globl ___bank_logo_tiles_data 
                                    111 ;	Raw cost for generated ic 2 : (0, 0.000000) count=1.000000
                                    112 ;	genLabel
                                    113 ;	Raw cost for generated ic 3 : (0, 0.000000) count=1.000000
                                    114 ;	genEndFunction
                                    115 ;	naked function: no epilogue.
                                    116 ;	Raw cost for generated ic 4 : (0, 0.000000) count=1.000000
                                    117 ;------------------------------------------------------------
                                    118 ;Allocation info for local variables in function '__func_logo_map'
                                    119 ;------------------------------------------------------------
                                    120 ;	src/main.c: 9: INCBIN(logo_map, "res/gbdk2020_map.bin")
                                    121 ;	genLabel
                                    122 ;	Raw cost for generated ic 0 : (0, 0.000000) count=1.000000
                                    123 ;	-----------------------------------------
                                    124 ;	 function __func_logo_map
                                    125 ;	-----------------------------------------
                                    126 ;	Register assignment is optimal.
                                    127 ;	Stack space usage: 0 bytes.
                         00000000   128 	b___func_logo_map	= 0
    00000320                        129 ___func_logo_map:
                                    130 ;	naked function: no prologue.
                                    131 ;	Raw cost for generated ic 1 : (0, 0.000000) count=1.000000
                                    132 ;	m6502_genInline
    00000320                        133 		_logo_map::
    00000320                        134 	 1$:
    00000320 00 01 01 01 01 01 02   135 	 .incbin "res/gbdk2020_map.bin" 
             03 04 05 05 05 06 07
             08 09 0A 0A 0A 0B 0C
             0D 0E 0A 0A 0A 0B 0C
             0D 0E 0A 0A 0A 0B 0C
             0F 10 11 11 11 12 13
             14 15 15 15 15 15 16
             17 18 19 15 1A 1B 1C
             1D 1E 1F 15 20 21 22
             14 15 23 24 25 26 27
             14 15 28 29 2A 2B 2C
             2D 2E 2E 2E 2F 30 31
    00000374                        136 	 2$:
                         00000054   137 	 ___size_logo_map = (2$-1$) 
                                    138 	 .globl ___size_logo_map 
                                    139 	 .local b___func_logo_map 
                         00000000   140 	 ___bank_logo_map = b___func_logo_map 
                                    141 	 .globl ___bank_logo_map 
                                    142 ;	Raw cost for generated ic 2 : (0, 0.000000) count=1.000000
                                    143 ;	genLabel
                                    144 ;	Raw cost for generated ic 3 : (0, 0.000000) count=1.000000
                                    145 ;	genEndFunction
                                    146 ;	naked function: no epilogue.
                                    147 ;	Raw cost for generated ic 4 : (0, 0.000000) count=1.000000
                                    148 ;------------------------------------------------------------
                                    149 ;Allocation info for local variables in function '__func_blank_tile_data'
                                    150 ;------------------------------------------------------------
                                    151 ;	src/main.c: 12: INCBIN(blank_tile_data, "res/blanktile.bin")
                                    152 ;	genLabel
                                    153 ;	Raw cost for generated ic 0 : (0, 0.000000) count=1.000000
                                    154 ;	-----------------------------------------
                                    155 ;	 function __func_blank_tile_data
                                    156 ;	-----------------------------------------
                                    157 ;	Register assignment is optimal.
                                    158 ;	Stack space usage: 0 bytes.
                         00000000   159 	b___func_blank_tile_data	= 0
    00000374                        160 ___func_blank_tile_data:
                                    161 ;	naked function: no prologue.
                                    162 ;	Raw cost for generated ic 1 : (0, 0.000000) count=1.000000
                                    163 ;	m6502_genInline
    00000374                        164 		_blank_tile_data::
    00000374                        165 	 1$:
    00000374 00 00 00 00 00 00 00   166 	 .incbin "res/blanktile.bin" 
             00 00 00 00 00 00 00
             00 00
    00000384                        167 	 2$:
                         00000010   168 	 ___size_blank_tile_data = (2$-1$) 
                                    169 	 .globl ___size_blank_tile_data 
                                    170 	 .local b___func_blank_tile_data 
                         00000000   171 	 ___bank_blank_tile_data = b___func_blank_tile_data 
                                    172 	 .globl ___bank_blank_tile_data 
                                    173 ;	Raw cost for generated ic 2 : (0, 0.000000) count=1.000000
                                    174 ;	genLabel
                                    175 ;	Raw cost for generated ic 3 : (0, 0.000000) count=1.000000
                                    176 ;	genEndFunction
                                    177 ;	naked function: no epilogue.
                                    178 ;	Raw cost for generated ic 4 : (0, 0.000000) count=1.000000
                                    179 ;------------------------------------------------------------
                                    180 ;Allocation info for local variables in function 'init_gfx'
                                    181 ;------------------------------------------------------------
                                    182 ;	src/main.c: 28: void init_gfx(void) {
                                    183 ;	genLabel
                                    184 ;	Raw cost for generated ic 0 : (0, 0.000000) count=1.000000
                                    185 ;	-----------------------------------------
                                    186 ;	 function init_gfx
                                    187 ;	-----------------------------------------
                                    188 ;	Register assignment is optimal.
                                    189 ;	Stack space usage: 0 bytes.
    00000384                        190 _init_gfx:
                                    191 ;	Raw cost for generated ic 1 : (0, 0.000000) count=1.000000
                                    192 ;	src/main.c: 30: set_bkg_data(0x80u, 1u, blank_tile_data); // The first 0x80u here is the tile ID
                                    193 ;	skipping iCode since result will be rematerialized
                                    194 ;	Raw cost for generated ic 2 : (0, 0.000000) count=1.000000
                                    195 ;	genCast
                                    196 ;	genCopy
    00000384 A9s03            [ 2]  197 	lda	#>_blank_tile_data
    00000386 8Dr01r00         [ 4]  198 	sta	(_set_bkg_data_PARM_3 + 1)
    00000389 A9r74            [ 2]  199 	lda	#_blank_tile_data
    0000038B 8Dr00r00         [ 4]  200 	sta	_set_bkg_data_PARM_3
                                    201 ;	Raw cost for generated ic 3 : (10, 12.000000) count=1.000000
                                    202 ;	Raw cost for generated ic 4 : (0, 0.000000) count=1.000000
                                    203 ;	Raw cost for generated ic 5 : (0, 0.000000) count=1.000000
                                    204 ;	genCall
                                    205 ;	genSend
    0000038E A9 80            [ 2]  206 	lda	#0x80
    00000390 A2 01            [ 2]  207 	ldx	#0x01
    00000392 20r00r00         [ 6]  208 	jsr	_set_bkg_data
                                    209 ;	Raw cost for generated ic 7 : (7, 10.000000) count=1.000000
                                    210 ;	src/main.c: 31: fill_bkg_rect(0u, 0u, DEVICE_SCREEN_WIDTH, DEVICE_SCREEN_HEIGHT, 0x80u);   // The last 0x80u here is the tile ID 
                                    211 ;	genAssign
                                    212 ;	genAssignLit
    00000395 A2 20            [ 2]  213 	ldx	#0x20
    00000397 8Er00r00         [ 4]  214 	stx	_fill_bkg_rect_PARM_3
                                    215 ;	Raw cost for generated ic 10 : (5, 6.000000) count=1.000000
                                    216 ;	genAssign
                                    217 ;	genAssignLit
    0000039A A2 1E            [ 2]  218 	ldx	#0x1e
    0000039C 8Er00r00         [ 4]  219 	stx	_fill_bkg_rect_PARM_4
                                    220 ;	Raw cost for generated ic 11 : (5, 6.000000) count=1.000000
                                    221 ;	genAssign
                                    222 ;	genAssignLit
    0000039F A2 80            [ 2]  223 	ldx	#0x80
    000003A1 8Er00r00         [ 4]  224 	stx	_fill_bkg_rect_PARM_5
                                    225 ;	Raw cost for generated ic 12 : (5, 6.000000) count=1.000000
                                    226 ;	Raw cost for generated ic 8 : (0, 0.000000) count=1.000000
                                    227 ;	Raw cost for generated ic 9 : (0, 0.000000) count=1.000000
                                    228 ;	genCall
                                    229 ;	genSend
    000003A4 A9 00            [ 2]  230 	lda	#0x00
    000003A6 AA               [ 2]  231 	tax
    000003A7 20r00r00         [ 6]  232 	jsr	_fill_bkg_rect
                                    233 ;	Raw cost for generated ic 13 : (6, 10.000000) count=1.000000
                                    234 ;	src/main.c: 35: set_bkg_data(0u, INCBIN_SIZE(logo_tiles_data) / TILE_BYTES, logo_tiles_data);
                                    235 ;	skipping iCode since result will be rematerialized
                                    236 ;	Raw cost for generated ic 14 : (0, 0.000000) count=1.000000
                                    237 ;	genCast
                                    238 ;	genCopy
    000003AA A2s00            [ 2]  239 	ldx	#>___size_logo_tiles_data
    000003AC A9r00            [ 2]  240 	lda	#___size_logo_tiles_data
                                    241 ;	Raw cost for generated ic 15 : (4, 4.000000) count=1.000000
                                    242 ;	genCast
                                    243 ;	genCopy
                                    244 ;	Raw cost for generated ic 16 : (0, 0.000000) count=1.000000
                                    245 ;	genRightShift
                                    246 ;	genRightShiftLiteral
                                    247 ;	genrshTwo
    000003AE 86*00            [ 3]  248 	stx	*(REGTEMP+0)
    000003B0 46*00            [ 5]  249 	lsr	*(REGTEMP+0)
    000003B2 6A               [ 2]  250 	ror	a
    000003B3 46*00            [ 5]  251 	lsr	*(REGTEMP+0)
    000003B5 6A               [ 2]  252 	ror	a
    000003B6 46*00            [ 5]  253 	lsr	*(REGTEMP+0)
    000003B8 6A               [ 2]  254 	ror	a
    000003B9 46*00            [ 5]  255 	lsr	*(REGTEMP+0)
    000003BB 6A               [ 2]  256 	ror	a
                                    257 ;	Raw cost for generated ic 17 : (16, 34.000000) count=1.000000
                                    258 ;	genCast
                                    259 ;	genCopy
                                    260 ;	Raw cost for generated ic 18 : (0, 0.000000) count=1.000000
                                    261 ;	skipping iCode since result will be rematerialized
                                    262 ;	Raw cost for generated ic 19 : (0, 0.000000) count=1.000000
                                    263 ;	genCast
                                    264 ;	genCopy
    000003BC A2s00            [ 2]  265 	ldx	#>_logo_tiles_data
    000003BE 8Er01r00         [ 4]  266 	stx	(_set_bkg_data_PARM_3 + 1)
    000003C1 A2r00            [ 2]  267 	ldx	#_logo_tiles_data
    000003C3 8Er00r00         [ 4]  268 	stx	_set_bkg_data_PARM_3
                                    269 ;	Raw cost for generated ic 20 : (10, 12.000000) count=1.000000
                                    270 ;	Raw cost for generated ic 21 : (0, 0.000000) count=1.000000
                                    271 ;	Raw cost for generated ic 22 : (0, 0.000000) count=1.000000
                                    272 ;	genCall
                                    273 ;	genSend
    000003C6 AA               [ 2]  274 	tax
    000003C7 A9 00            [ 2]  275 	lda	#0x00
    000003C9 20r00r00         [ 6]  276 	jsr	_set_bkg_data
                                    277 ;	Raw cost for generated ic 24 : (6, 10.000000) count=1.000000
                                    278 ;	src/main.c: 38: logo_map);
                                    279 ;	skipping iCode since result will be rematerialized
                                    280 ;	Raw cost for generated ic 25 : (0, 0.000000) count=1.000000
                                    281 ;	genCast
                                    282 ;	genCopy
    000003CC A9s03            [ 2]  283 	lda	#>_logo_map
    000003CE 8Dr01r00         [ 4]  284 	sta	(_set_bkg_tiles_PARM_5 + 1)
    000003D1 A9r20            [ 2]  285 	lda	#_logo_map
    000003D3 8Dr00r00         [ 4]  286 	sta	_set_bkg_tiles_PARM_5
                                    287 ;	Raw cost for generated ic 26 : (10, 12.000000) count=1.000000
                                    288 ;	genAssign
                                    289 ;	genAssignLit
    000003D6 A2 07            [ 2]  290 	ldx	#0x07
    000003D8 8Er00r00         [ 4]  291 	stx	_set_bkg_tiles_PARM_3
                                    292 ;	Raw cost for generated ic 29 : (5, 6.000000) count=1.000000
                                    293 ;	genAssign
                                    294 ;	genAssignLit
    000003DB A2 0C            [ 2]  295 	ldx	#0x0c
    000003DD 8Er00r00         [ 4]  296 	stx	_set_bkg_tiles_PARM_4
                                    297 ;	Raw cost for generated ic 30 : (5, 6.000000) count=1.000000
                                    298 ;	Raw cost for generated ic 27 : (0, 0.000000) count=1.000000
                                    299 ;	Raw cost for generated ic 28 : (0, 0.000000) count=1.000000
                                    300 ;	genCall
                                    301 ;	genSend
    000003E0 A9 06            [ 2]  302 	lda	#0x06
    000003E2 A2 03            [ 2]  303 	ldx	#0x03
    000003E4 20r00r00         [ 6]  304 	jsr	_set_bkg_tiles
                                    305 ;	Raw cost for generated ic 32 : (7, 10.000000) count=1.000000
                                    306 ;	src/main.c: 41: SHOW_BKG;
                                    307 ;	genOr
    000003E7 ADr00r00         [ 4]  308 	lda	_shadow_PPUMASK
    000003EA 09 08            [ 2]  309 	ora	#0x08
    000003EC 8Dr00r00         [ 4]  310 	sta	_shadow_PPUMASK
                                    311 ;	Raw cost for generated ic 33 : (8, 10.000000) count=1.000000
                                    312 ;	genLabel
                                    313 ;	Raw cost for generated ic 35 : (0, 0.000000) count=1.000000
                                    314 ;	src/main.c: 42: }
                                    315 ;	genEndFunction
    000003EF 60               [ 6]  316 	rts
                                    317 ;	Raw cost for generated ic 36 : (1, 6.000000) count=1.000000
                                    318 ;------------------------------------------------------------
                                    319 ;Allocation info for local variables in function 'main'
                                    320 ;------------------------------------------------------------
                                    321 ;	src/main.c: 46: void main(void)
                                    322 ;	genLabel
                                    323 ;	Raw cost for generated ic 0 : (0, 0.000000) count=1.000000
                                    324 ;	-----------------------------------------
                                    325 ;	 function main
                                    326 ;	-----------------------------------------
                                    327 ;	Register assignment is optimal.
                                    328 ;	Stack space usage: 0 bytes.
    000003F0                        329 _main:
                                    330 ;	Raw cost for generated ic 1 : (0, 0.000000) count=1.000000
                                    331 ;	src/main.c: 48: init_gfx();
                                    332 ;	genCall
    000003F0 20r84r03         [ 6]  333 	jsr	_init_gfx
                                    334 ;	Raw cost for generated ic 2 : (3, 6.000000) count=1.000000
                                    335 ;	src/main.c: 51: while(1) {
                                    336 ;	genLabel
    000003F3                        337 00102$:
                                    338 ;	Raw cost for generated ic 5 : (0, 0.000000) count=72.000000
                                    339 ;	src/main.c: 56: vsync();
                                    340 ;	genCall
    000003F3 20r00r00         [ 6]  341 	jsr	_vsync
                                    342 ;	Raw cost for generated ic 6 : (3, 6.000000) count=72.000000
                                    343 ;	genGoto
    000003F6 4CrF3r03         [ 3]  344 	jmp	00102$
                                    345 ;	Raw cost for generated ic 7 : (3, 3.000000) count=72.000000
                                    346 ;	genLabel
                                    347 ;	Raw cost for generated ic 9 : (0, 0.000000) count=0.000000
                                    348 ;	src/main.c: 58: }
                                    349 ;	genEndFunction
    000003F9 60               [ 6]  350 	rts
                                    351 ;	Raw cost for generated ic 10 : (1, 6.000000) count=0.000000
                                    352 	.area _CODE
                                    353 	.area _XINIT
                                    354 	.area _CABS    (ABS)
