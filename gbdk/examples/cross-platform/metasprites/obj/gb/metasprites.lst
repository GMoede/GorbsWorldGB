                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module metasprites
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _load_and_duplicate_sprite_tile_data
                                     12 	.globl _get_tile_offset
                                     13 	.globl _set_tile
                                     14 	.globl _hide_sprites_range
                                     15 	.globl _cgb_compatibility
                                     16 	.globl _set_sprite_palette
                                     17 	.globl _fill_bkg_rect
                                     18 	.globl _set_sprite_data
                                     19 	.globl _set_bkg_data
                                     20 	.globl _display_off
                                     21 	.globl _vsync
                                     22 	.globl _joypad
                                     23 	.globl _old_joyp
                                     24 	.globl _joyp
                                     25 	.globl _num_tiles
                                     26 	.globl _flipped_data
                                     27 	.globl _rot
                                     28 	.globl _idx
                                     29 	.globl _PosF
                                     30 	.globl _SpdY
                                     31 	.globl _SpdX
                                     32 	.globl _PosY
                                     33 	.globl _PosX
                                     34 	.globl _green_pal
                                     35 	.globl _cyan_pal
                                     36 	.globl _pink_pal
                                     37 	.globl _gray_pal
                                     38 	.globl _reverse_bits
                                     39 	.globl _pattern
                                     40 ;--------------------------------------------------------
                                     41 ; special function registers
                                     42 ;--------------------------------------------------------
                                     43 ;--------------------------------------------------------
                                     44 ; ram data
                                     45 ;--------------------------------------------------------
                                     46 	.area _DATA
    00000000                         47 _PosX::
    00000000                         48 	.ds 2
    00000002                         49 _PosY::
    00000002                         50 	.ds 2
    00000004                         51 _SpdX::
    00000004                         52 	.ds 2
    00000006                         53 _SpdY::
    00000006                         54 	.ds 2
    00000008                         55 _PosF::
    00000008                         56 	.ds 1
    00000009                         57 _idx::
    00000009                         58 	.ds 1
    0000000A                         59 _rot::
    0000000A                         60 	.ds 1
    0000000B                         61 _flipped_data::
    0000000B                         62 	.ds 16
    0000001B                         63 _num_tiles::
    0000001B                         64 	.ds 2
                                     65 ;--------------------------------------------------------
                                     66 ; ram data
                                     67 ;--------------------------------------------------------
                                     68 	.area _INITIALIZED
    00000000                         69 _joyp::
    00000000                         70 	.ds 1
    00000001                         71 _old_joyp::
    00000001                         72 	.ds 1
                                     73 ;--------------------------------------------------------
                                     74 ; absolute external ram data
                                     75 ;--------------------------------------------------------
                                     76 	.area _DABS (ABS)
                                     77 ;--------------------------------------------------------
                                     78 ; global & static initialisations
                                     79 ;--------------------------------------------------------
                                     80 	.area _HOME
                                     81 	.area _GSINIT
                                     82 	.area _GSFINAL
                                     83 	.area _GSINIT
                                     84 ;--------------------------------------------------------
                                     85 ; Home
                                     86 ;--------------------------------------------------------
                                     87 	.area _HOME
                                     88 	.area _HOME
                                     89 ;--------------------------------------------------------
                                     90 ; code
                                     91 ;--------------------------------------------------------
                                     92 	.area _CODE
                                     93 ;src/metasprites.c:94: void set_tile(uint8_t tile_idx, uint8_t* data, uint8_t flip_x, uint8_t flip_y)
                                     94 ;	---------------------------------
                                     95 ; Function set_tile
                                     96 ; ---------------------------------
    00000000                         97 _set_tile::
    00000000 E8 F6            [16]   98 	add	sp, #-10
    00000002 F8 07            [12]   99 	ldhl	sp,	#7
    00000004 32               [ 8]  100 	ld	(hl-), a
    00000005 2B               [ 8]  101 	dec	hl
    00000006 7B               [ 4]  102 	ld	a, e
    00000007 22               [ 8]  103 	ld	(hl+), a
                                    104 ;src/metasprites.c:97: for(i = 0; i < TILE_HEIGHT; i++)
    00000008 7A               [ 4]  105 	ld	a, d
    00000009 22               [ 8]  106 	ld	(hl+), a
    0000000A 23               [ 8]  107 	inc	hl
    0000000B AF               [ 4]  108 	xor	a, a
    0000000C 22               [ 8]  109 	ld	(hl+), a
    0000000D 77               [ 8]  110 	ld	(hl), a
    0000000E                        111 00102$:
                                    112 ;src/metasprites.c:99: size_t y = flip_y ? (TILE_HEIGHT-1-i) : i; 
    0000000E F8 0D            [12]  113 	ldhl	sp,	#13
    00000010 7E               [ 8]  114 	ld	a, (hl)
    00000011 B7               [ 4]  115 	or	a, a
    00000012 28 13            [12]  116 	jr	Z, 00106$
    00000014 11 07 00         [12]  117 	ld	de, #0x0007
    00000017 F8 08            [12]  118 	ldhl	sp,	#8
    00000019 2A               [ 8]  119 	ld	a,	(hl+)
    0000001A 66               [ 8]  120 	ld	h, (hl)
    0000001B 6F               [ 4]  121 	ld	l, a
    0000001C 7B               [ 4]  122 	ld	a, e
    0000001D 95               [ 4]  123 	sub	a, l
    0000001E 5F               [ 4]  124 	ld	e, a
    0000001F 7A               [ 4]  125 	ld	a, d
    00000020 9C               [ 4]  126 	sbc	a, h
    00000021 F8 04            [12]  127 	ldhl	sp,	#4
    00000023 32               [ 8]  128 	ld	(hl-), a
    00000024 73               [ 8]  129 	ld	(hl), e
    00000025 18 08            [12]  130 	jr	00107$
    00000027                        131 00106$:
    00000027 F8 08            [12]  132 	ldhl	sp,	#8
    00000029 7E               [ 8]  133 	ld	a, (hl)
    0000002A F8 03            [12]  134 	ldhl	sp,	#3
    0000002C 22               [ 8]  135 	ld	(hl+), a
    0000002D 36 00            [12]  136 	ld	(hl), #0x00
    0000002F                        137 00107$:
    0000002F F8 03            [12]  138 	ldhl	sp,	#3
    00000031 4E               [ 8]  139 	ld	c, (hl)
    00000032 06 00            [ 8]  140 	ld	b, #0x00
                                    141 ;src/metasprites.c:100: flipped_data[2*i] = flip_x ? reverse_bits[data[2*y]] : data[2*y];
    00000034 F8 08            [12]  142 	ldhl	sp,	#8
    00000036 7E               [ 8]  143 	ld	a, (hl)
    00000037 87               [ 4]  144 	add	a, a
    00000038 F8 00            [12]  145 	ldhl	sp,	#0
    0000003A 77               [ 8]  146 	ld	(hl), a
    0000003B 5E               [ 8]  147 	ld	e, (hl)
    0000003C 16 00            [ 8]  148 	ld	d, #0x00
    0000003E 21r0Br00         [12]  149 	ld	hl, #_flipped_data
    00000041 19               [ 8]  150 	add	hl, de
    00000042 E5               [16]  151 	push	hl
    00000043 7D               [ 4]  152 	ld	a, l
    00000044 F8 03            [12]  153 	ldhl	sp,	#3
    00000046 77               [ 8]  154 	ld	(hl), a
    00000047 E1               [12]  155 	pop	hl
    00000048 7C               [ 4]  156 	ld	a, h
    00000049 F8 02            [12]  157 	ldhl	sp,	#2
    0000004B 22               [ 8]  158 	ld	(hl+), a
    0000004C CB 21            [ 8]  159 	sla	c
    0000004E CB 10            [ 8]  160 	rl	b
    00000050 79               [ 4]  161 	ld	a, c
    00000051 22               [ 8]  162 	ld	(hl+), a
    00000052 78               [ 4]  163 	ld	a, b
    00000053 32               [ 8]  164 	ld	(hl-), a
    00000054 2A               [ 8]  165 	ld	a, (hl+)
    00000055 5F               [ 4]  166 	ld	e, a
    00000056 2A               [ 8]  167 	ld	a, (hl+)
    00000057 57               [ 4]  168 	ld	d, a
    00000058 2A               [ 8]  169 	ld	a,	(hl+)
    00000059 66               [ 8]  170 	ld	h, (hl)
    0000005A 6F               [ 4]  171 	ld	l, a
    0000005B 19               [ 8]  172 	add	hl, de
    0000005C 4D               [ 4]  173 	ld	c, l
    0000005D 44               [ 4]  174 	ld	b, h
    0000005E 0A               [ 8]  175 	ld	a, (bc)
    0000005F 4F               [ 4]  176 	ld	c, a
    00000060 F8 0C            [12]  177 	ldhl	sp,	#12
    00000062 7E               [ 8]  178 	ld	a, (hl)
    00000063 B7               [ 4]  179 	or	a, a
    00000064 28 07            [12]  180 	jr	Z, 00108$
    00000066 21rD4r00         [12]  181 	ld	hl, #_reverse_bits
    00000069 06 00            [ 8]  182 	ld	b, #0x00
    0000006B 09               [ 8]  183 	add	hl, bc
    0000006C 4E               [ 8]  184 	ld	c, (hl)
    0000006D                        185 00108$:
    0000006D F8 01            [12]  186 	ldhl	sp,	#1
    0000006F 2A               [ 8]  187 	ld	a, (hl+)
    00000070 66               [ 8]  188 	ld	h, (hl)
    00000071 6F               [ 4]  189 	ld	l, a
    00000072 71               [ 8]  190 	ld	(hl), c
                                    191 ;src/metasprites.c:101: flipped_data[2*i+1] = flip_x ? reverse_bits[data[2*y+1]] : data[2*y+1];
    00000073 F8 00            [12]  192 	ldhl	sp,	#0
    00000075 7E               [ 8]  193 	ld	a, (hl)
    00000076 3C               [ 4]  194 	inc	a
    00000077 C6r0B            [ 8]  195 	add	a, #<(_flipped_data)
    00000079 4F               [ 4]  196 	ld	c, a
    0000007A 3E 00            [ 8]  197 	ld	a, #0x00
    0000007C CEs00            [ 8]  198 	adc	a, #>(_flipped_data)
    0000007E 47               [ 4]  199 	ld	b, a
    0000007F F8 03            [12]  200 	ldhl	sp,	#3
    00000081 2A               [ 8]  201 	ld	a, (hl+)
    00000082 23               [ 8]  202 	inc	hl
    00000083 5F               [ 4]  203 	ld	e, a
    00000084 16 00            [ 8]  204 	ld	d, #0x00
    00000086 13               [ 8]  205 	inc	de
    00000087 2A               [ 8]  206 	ld	a,	(hl+)
    00000088 66               [ 8]  207 	ld	h, (hl)
    00000089 6F               [ 4]  208 	ld	l, a
    0000008A 19               [ 8]  209 	add	hl, de
    0000008B 5D               [ 4]  210 	ld	e, l
    0000008C 54               [ 4]  211 	ld	d, h
    0000008D 1A               [ 8]  212 	ld	a, (de)
    0000008E 5F               [ 4]  213 	ld	e, a
    0000008F F8 0C            [12]  214 	ldhl	sp,	#12
    00000091 7E               [ 8]  215 	ld	a, (hl)
    00000092 B7               [ 4]  216 	or	a, a
    00000093 28 0A            [12]  217 	jr	Z, 00110$
    00000095 6B               [ 4]  218 	ld	l, e
    00000096 26 00            [ 8]  219 	ld	h, #0x00
    00000098 11rD4r00         [12]  220 	ld	de, #_reverse_bits
    0000009B 19               [ 8]  221 	add	hl, de
    0000009C 7E               [ 8]  222 	ld	a, (hl)
    0000009D 18 01            [12]  223 	jr	00111$
    0000009F                        224 00110$:
    0000009F 7B               [ 4]  225 	ld	a, e
    000000A0                        226 00111$:
    000000A0 02               [ 8]  227 	ld	(bc), a
                                    228 ;src/metasprites.c:97: for(i = 0; i < TILE_HEIGHT; i++)
    000000A1 F8 08            [12]  229 	ldhl	sp,	#8
    000000A3 34               [12]  230 	inc	(hl)
    000000A4 F8 08            [12]  231 	ldhl	sp,	#8
    000000A6 2A               [ 8]  232 	ld	a, (hl+)
    000000A7 D6 08            [ 8]  233 	sub	a, #0x08
    000000A9 7E               [ 8]  234 	ld	a, (hl)
    000000AA DE 00            [ 8]  235 	sbc	a, #0x00
    000000AC DAr0Er00         [16]  236 	jp	C, 00102$
                                    237 ;src/metasprites.c:103: set_sprite_data(tile_idx, 1, flipped_data);
    000000AF 2B               [ 8]  238 	dec	hl
    000000B0 2B               [ 8]  239 	dec	hl
    000000B1 11r0Br00         [12]  240 	ld	de, #_flipped_data
    000000B4 D5               [16]  241 	push	de
    000000B5 3E 01            [ 8]  242 	ld	a, #0x01
    000000B7 F5               [16]  243 	push	af
    000000B8 33               [ 8]  244 	inc	sp
    000000B9 7E               [ 8]  245 	ld	a, (hl)
    000000BA F5               [16]  246 	push	af
    000000BB 33               [ 8]  247 	inc	sp
    000000BC CDr00r00         [24]  248 	call	_set_sprite_data
                                    249 ;src/metasprites.c:104: }
    000000BF E8 0E            [16]  250 	add	sp, #14
    000000C1 E1               [12]  251 	pop	hl
    000000C2 F1               [12]  252 	pop	af
    000000C3 E9               [ 4]  253 	jp	(hl)
    000000C4                        254 _pattern:
    000000C4 80                     255 	.db #0x80	; 128
    000000C5 80                     256 	.db #0x80	; 128
    000000C6 40                     257 	.db #0x40	; 64
    000000C7 40                     258 	.db #0x40	; 64
    000000C8 20                     259 	.db #0x20	; 32
    000000C9 20                     260 	.db #0x20	; 32
    000000CA 10                     261 	.db #0x10	; 16
    000000CB 10                     262 	.db #0x10	; 16
    000000CC 08                     263 	.db #0x08	; 8
    000000CD 08                     264 	.db #0x08	; 8
    000000CE 04                     265 	.db #0x04	; 4
    000000CF 04                     266 	.db #0x04	; 4
    000000D0 02                     267 	.db #0x02	; 2
    000000D1 02                     268 	.db #0x02	; 2
    000000D2 01                     269 	.db #0x01	; 1
    000000D3 01                     270 	.db #0x01	; 1
    000000D4                        271 _reverse_bits:
    000000D4 00                     272 	.db #0x00	; 0
    000000D5 80                     273 	.db #0x80	; 128
    000000D6 40                     274 	.db #0x40	; 64
    000000D7 C0                     275 	.db #0xc0	; 192
    000000D8 20                     276 	.db #0x20	; 32
    000000D9 A0                     277 	.db #0xa0	; 160
    000000DA 60                     278 	.db #0x60	; 96
    000000DB E0                     279 	.db #0xe0	; 224
    000000DC 10                     280 	.db #0x10	; 16
    000000DD 90                     281 	.db #0x90	; 144
    000000DE 50                     282 	.db #0x50	; 80	'P'
    000000DF D0                     283 	.db #0xd0	; 208
    000000E0 30                     284 	.db #0x30	; 48	'0'
    000000E1 B0                     285 	.db #0xb0	; 176
    000000E2 70                     286 	.db #0x70	; 112	'p'
    000000E3 F0                     287 	.db #0xf0	; 240
    000000E4 08                     288 	.db #0x08	; 8
    000000E5 88                     289 	.db #0x88	; 136
    000000E6 48                     290 	.db #0x48	; 72	'H'
    000000E7 C8                     291 	.db #0xc8	; 200
    000000E8 28                     292 	.db #0x28	; 40
    000000E9 A8                     293 	.db #0xa8	; 168
    000000EA 68                     294 	.db #0x68	; 104	'h'
    000000EB E8                     295 	.db #0xe8	; 232
    000000EC 18                     296 	.db #0x18	; 24
    000000ED 98                     297 	.db #0x98	; 152
    000000EE 58                     298 	.db #0x58	; 88	'X'
    000000EF D8                     299 	.db #0xd8	; 216
    000000F0 38                     300 	.db #0x38	; 56	'8'
    000000F1 B8                     301 	.db #0xb8	; 184
    000000F2 78                     302 	.db #0x78	; 120	'x'
    000000F3 F8                     303 	.db #0xf8	; 248
    000000F4 04                     304 	.db #0x04	; 4
    000000F5 84                     305 	.db #0x84	; 132
    000000F6 44                     306 	.db #0x44	; 68	'D'
    000000F7 C4                     307 	.db #0xc4	; 196
    000000F8 24                     308 	.db #0x24	; 36
    000000F9 A4                     309 	.db #0xa4	; 164
    000000FA 64                     310 	.db #0x64	; 100	'd'
    000000FB E4                     311 	.db #0xe4	; 228
    000000FC 14                     312 	.db #0x14	; 20
    000000FD 94                     313 	.db #0x94	; 148
    000000FE 54                     314 	.db #0x54	; 84	'T'
    000000FF D4                     315 	.db #0xd4	; 212
    00000100 34                     316 	.db #0x34	; 52	'4'
    00000101 B4                     317 	.db #0xb4	; 180
    00000102 74                     318 	.db #0x74	; 116	't'
    00000103 F4                     319 	.db #0xf4	; 244
    00000104 0C                     320 	.db #0x0c	; 12
    00000105 8C                     321 	.db #0x8c	; 140
    00000106 4C                     322 	.db #0x4c	; 76	'L'
    00000107 CC                     323 	.db #0xcc	; 204
    00000108 2C                     324 	.db #0x2c	; 44
    00000109 AC                     325 	.db #0xac	; 172
    0000010A 6C                     326 	.db #0x6c	; 108	'l'
    0000010B EC                     327 	.db #0xec	; 236
    0000010C 1C                     328 	.db #0x1c	; 28
    0000010D 9C                     329 	.db #0x9c	; 156
    0000010E 5C                     330 	.db #0x5c	; 92
    0000010F DC                     331 	.db #0xdc	; 220
    00000110 3C                     332 	.db #0x3c	; 60
    00000111 BC                     333 	.db #0xbc	; 188
    00000112 7C                     334 	.db #0x7c	; 124
    00000113 FC                     335 	.db #0xfc	; 252
    00000114 02                     336 	.db #0x02	; 2
    00000115 82                     337 	.db #0x82	; 130
    00000116 42                     338 	.db #0x42	; 66	'B'
    00000117 C2                     339 	.db #0xc2	; 194
    00000118 22                     340 	.db #0x22	; 34
    00000119 A2                     341 	.db #0xa2	; 162
    0000011A 62                     342 	.db #0x62	; 98	'b'
    0000011B E2                     343 	.db #0xe2	; 226
    0000011C 12                     344 	.db #0x12	; 18
    0000011D 92                     345 	.db #0x92	; 146
    0000011E 52                     346 	.db #0x52	; 82	'R'
    0000011F D2                     347 	.db #0xd2	; 210
    00000120 32                     348 	.db #0x32	; 50	'2'
    00000121 B2                     349 	.db #0xb2	; 178
    00000122 72                     350 	.db #0x72	; 114	'r'
    00000123 F2                     351 	.db #0xf2	; 242
    00000124 0A                     352 	.db #0x0a	; 10
    00000125 8A                     353 	.db #0x8a	; 138
    00000126 4A                     354 	.db #0x4a	; 74	'J'
    00000127 CA                     355 	.db #0xca	; 202
    00000128 2A                     356 	.db #0x2a	; 42
    00000129 AA                     357 	.db #0xaa	; 170
    0000012A 6A                     358 	.db #0x6a	; 106	'j'
    0000012B EA                     359 	.db #0xea	; 234
    0000012C 1A                     360 	.db #0x1a	; 26
    0000012D 9A                     361 	.db #0x9a	; 154
    0000012E 5A                     362 	.db #0x5a	; 90	'Z'
    0000012F DA                     363 	.db #0xda	; 218
    00000130 3A                     364 	.db #0x3a	; 58
    00000131 BA                     365 	.db #0xba	; 186
    00000132 7A                     366 	.db #0x7a	; 122	'z'
    00000133 FA                     367 	.db #0xfa	; 250
    00000134 06                     368 	.db #0x06	; 6
    00000135 86                     369 	.db #0x86	; 134
    00000136 46                     370 	.db #0x46	; 70	'F'
    00000137 C6                     371 	.db #0xc6	; 198
    00000138 26                     372 	.db #0x26	; 38
    00000139 A6                     373 	.db #0xa6	; 166
    0000013A 66                     374 	.db #0x66	; 102	'f'
    0000013B E6                     375 	.db #0xe6	; 230
    0000013C 16                     376 	.db #0x16	; 22
    0000013D 96                     377 	.db #0x96	; 150
    0000013E 56                     378 	.db #0x56	; 86	'V'
    0000013F D6                     379 	.db #0xd6	; 214
    00000140 36                     380 	.db #0x36	; 54	'6'
    00000141 B6                     381 	.db #0xb6	; 182
    00000142 76                     382 	.db #0x76	; 118	'v'
    00000143 F6                     383 	.db #0xf6	; 246
    00000144 0E                     384 	.db #0x0e	; 14
    00000145 8E                     385 	.db #0x8e	; 142
    00000146 4E                     386 	.db #0x4e	; 78	'N'
    00000147 CE                     387 	.db #0xce	; 206
    00000148 2E                     388 	.db #0x2e	; 46
    00000149 AE                     389 	.db #0xae	; 174
    0000014A 6E                     390 	.db #0x6e	; 110	'n'
    0000014B EE                     391 	.db #0xee	; 238
    0000014C 1E                     392 	.db #0x1e	; 30
    0000014D 9E                     393 	.db #0x9e	; 158
    0000014E 5E                     394 	.db #0x5e	; 94
    0000014F DE                     395 	.db #0xde	; 222
    00000150 3E                     396 	.db #0x3e	; 62
    00000151 BE                     397 	.db #0xbe	; 190
    00000152 7E                     398 	.db #0x7e	; 126
    00000153 FE                     399 	.db #0xfe	; 254
    00000154 01                     400 	.db #0x01	; 1
    00000155 81                     401 	.db #0x81	; 129
    00000156 41                     402 	.db #0x41	; 65	'A'
    00000157 C1                     403 	.db #0xc1	; 193
    00000158 21                     404 	.db #0x21	; 33
    00000159 A1                     405 	.db #0xa1	; 161
    0000015A 61                     406 	.db #0x61	; 97	'a'
    0000015B E1                     407 	.db #0xe1	; 225
    0000015C 11                     408 	.db #0x11	; 17
    0000015D 91                     409 	.db #0x91	; 145
    0000015E 51                     410 	.db #0x51	; 81	'Q'
    0000015F D1                     411 	.db #0xd1	; 209
    00000160 31                     412 	.db #0x31	; 49	'1'
    00000161 B1                     413 	.db #0xb1	; 177
    00000162 71                     414 	.db #0x71	; 113	'q'
    00000163 F1                     415 	.db #0xf1	; 241
    00000164 09                     416 	.db #0x09	; 9
    00000165 89                     417 	.db #0x89	; 137
    00000166 49                     418 	.db #0x49	; 73	'I'
    00000167 C9                     419 	.db #0xc9	; 201
    00000168 29                     420 	.db #0x29	; 41
    00000169 A9                     421 	.db #0xa9	; 169
    0000016A 69                     422 	.db #0x69	; 105	'i'
    0000016B E9                     423 	.db #0xe9	; 233
    0000016C 19                     424 	.db #0x19	; 25
    0000016D 99                     425 	.db #0x99	; 153
    0000016E 59                     426 	.db #0x59	; 89	'Y'
    0000016F D9                     427 	.db #0xd9	; 217
    00000170 39                     428 	.db #0x39	; 57	'9'
    00000171 B9                     429 	.db #0xb9	; 185
    00000172 79                     430 	.db #0x79	; 121	'y'
    00000173 F9                     431 	.db #0xf9	; 249
    00000174 05                     432 	.db #0x05	; 5
    00000175 85                     433 	.db #0x85	; 133
    00000176 45                     434 	.db #0x45	; 69	'E'
    00000177 C5                     435 	.db #0xc5	; 197
    00000178 25                     436 	.db #0x25	; 37
    00000179 A5                     437 	.db #0xa5	; 165
    0000017A 65                     438 	.db #0x65	; 101	'e'
    0000017B E5                     439 	.db #0xe5	; 229
    0000017C 15                     440 	.db #0x15	; 21
    0000017D 95                     441 	.db #0x95	; 149
    0000017E 55                     442 	.db #0x55	; 85	'U'
    0000017F D5                     443 	.db #0xd5	; 213
    00000180 35                     444 	.db #0x35	; 53	'5'
    00000181 B5                     445 	.db #0xb5	; 181
    00000182 75                     446 	.db #0x75	; 117	'u'
    00000183 F5                     447 	.db #0xf5	; 245
    00000184 0D                     448 	.db #0x0d	; 13
    00000185 8D                     449 	.db #0x8d	; 141
    00000186 4D                     450 	.db #0x4d	; 77	'M'
    00000187 CD                     451 	.db #0xcd	; 205
    00000188 2D                     452 	.db #0x2d	; 45
    00000189 AD                     453 	.db #0xad	; 173
    0000018A 6D                     454 	.db #0x6d	; 109	'm'
    0000018B ED                     455 	.db #0xed	; 237
    0000018C 1D                     456 	.db #0x1d	; 29
    0000018D 9D                     457 	.db #0x9d	; 157
    0000018E 5D                     458 	.db #0x5d	; 93
    0000018F DD                     459 	.db #0xdd	; 221
    00000190 3D                     460 	.db #0x3d	; 61
    00000191 BD                     461 	.db #0xbd	; 189
    00000192 7D                     462 	.db #0x7d	; 125
    00000193 FD                     463 	.db #0xfd	; 253
    00000194 03                     464 	.db #0x03	; 3
    00000195 83                     465 	.db #0x83	; 131
    00000196 43                     466 	.db #0x43	; 67	'C'
    00000197 C3                     467 	.db #0xc3	; 195
    00000198 23                     468 	.db #0x23	; 35
    00000199 A3                     469 	.db #0xa3	; 163
    0000019A 63                     470 	.db #0x63	; 99	'c'
    0000019B E3                     471 	.db #0xe3	; 227
    0000019C 13                     472 	.db #0x13	; 19
    0000019D 93                     473 	.db #0x93	; 147
    0000019E 53                     474 	.db #0x53	; 83	'S'
    0000019F D3                     475 	.db #0xd3	; 211
    000001A0 33                     476 	.db #0x33	; 51	'3'
    000001A1 B3                     477 	.db #0xb3	; 179
    000001A2 73                     478 	.db #0x73	; 115	's'
    000001A3 F3                     479 	.db #0xf3	; 243
    000001A4 0B                     480 	.db #0x0b	; 11
    000001A5 8B                     481 	.db #0x8b	; 139
    000001A6 4B                     482 	.db #0x4b	; 75	'K'
    000001A7 CB                     483 	.db #0xcb	; 203
    000001A8 2B                     484 	.db #0x2b	; 43
    000001A9 AB                     485 	.db #0xab	; 171
    000001AA 6B                     486 	.db #0x6b	; 107	'k'
    000001AB EB                     487 	.db #0xeb	; 235
    000001AC 1B                     488 	.db #0x1b	; 27
    000001AD 9B                     489 	.db #0x9b	; 155
    000001AE 5B                     490 	.db #0x5b	; 91
    000001AF DB                     491 	.db #0xdb	; 219
    000001B0 3B                     492 	.db #0x3b	; 59
    000001B1 BB                     493 	.db #0xbb	; 187
    000001B2 7B                     494 	.db #0x7b	; 123
    000001B3 FB                     495 	.db #0xfb	; 251
    000001B4 07                     496 	.db #0x07	; 7
    000001B5 87                     497 	.db #0x87	; 135
    000001B6 47                     498 	.db #0x47	; 71	'G'
    000001B7 C7                     499 	.db #0xc7	; 199
    000001B8 27                     500 	.db #0x27	; 39
    000001B9 A7                     501 	.db #0xa7	; 167
    000001BA 67                     502 	.db #0x67	; 103	'g'
    000001BB E7                     503 	.db #0xe7	; 231
    000001BC 17                     504 	.db #0x17	; 23
    000001BD 97                     505 	.db #0x97	; 151
    000001BE 57                     506 	.db #0x57	; 87	'W'
    000001BF D7                     507 	.db #0xd7	; 215
    000001C0 37                     508 	.db #0x37	; 55	'7'
    000001C1 B7                     509 	.db #0xb7	; 183
    000001C2 77                     510 	.db #0x77	; 119	'w'
    000001C3 F7                     511 	.db #0xf7	; 247
    000001C4 0F                     512 	.db #0x0f	; 15
    000001C5 8F                     513 	.db #0x8f	; 143
    000001C6 4F                     514 	.db #0x4f	; 79	'O'
    000001C7 CF                     515 	.db #0xcf	; 207
    000001C8 2F                     516 	.db #0x2f	; 47
    000001C9 AF                     517 	.db #0xaf	; 175
    000001CA 6F                     518 	.db #0x6f	; 111	'o'
    000001CB EF                     519 	.db #0xef	; 239
    000001CC 1F                     520 	.db #0x1f	; 31
    000001CD 9F                     521 	.db #0x9f	; 159
    000001CE 5F                     522 	.db #0x5f	; 95
    000001CF DF                     523 	.db #0xdf	; 223
    000001D0 3F                     524 	.db #0x3f	; 63
    000001D1 BF                     525 	.db #0xbf	; 191
    000001D2 7F                     526 	.db #0x7f	; 127
    000001D3 FF                     527 	.db #0xff	; 255
                                    528 ;src/metasprites.c:106: uint8_t get_tile_offset(uint8_t flipx, uint8_t flipy)
                                    529 ;	---------------------------------
                                    530 ; Function get_tile_offset
                                    531 ; ---------------------------------
    000001D4                        532 _get_tile_offset::
                                    533 ;src/metasprites.c:117: return offset;
    000001D4 AF               [ 4]  534 	xor	a, a
                                    535 ;src/metasprites.c:118: }
    000001D5 C9               [16]  536 	ret
                                    537 ;src/metasprites.c:123: void load_and_duplicate_sprite_tile_data(void)
                                    538 ;	---------------------------------
                                    539 ; Function load_and_duplicate_sprite_tile_data
                                    540 ; ---------------------------------
    000001D6                        541 _load_and_duplicate_sprite_tile_data::
                                    542 ;src/metasprites.c:126: num_tiles = sizeof(sprite_tiles) >> 4;
    000001D6 21r1Br00         [12]  543 	ld	hl, #_num_tiles
    000001D9 3E 30            [ 8]  544 	ld	a, #0x30
    000001DB 22               [ 8]  545 	ld	(hl+), a
    000001DC AF               [ 4]  546 	xor	a, a
    000001DD 77               [ 8]  547 	ld	(hl), a
                                    548 ;src/metasprites.c:127: for(i = 0; i < num_tiles; i++)
    000001DE 01 00 00         [12]  549 	ld	bc, #0x0000
    000001E1                        550 00103$:
    000001E1 21r1Br00         [12]  551 	ld	hl, #_num_tiles
    000001E4 79               [ 4]  552 	ld	a, c
    000001E5 96               [ 8]  553 	sub	a, (hl)
    000001E6 23               [ 8]  554 	inc	hl
    000001E7 78               [ 4]  555 	ld	a, b
    000001E8 9E               [ 8]  556 	sbc	a, (hl)
    000001E9 D0               [20]  557 	ret	NC
                                    558 ;src/metasprites.c:129: set_tile(i + get_tile_offset(0, 0), sprite_tiles + (i << 4), 0, 0);
    000001EA 69               [ 4]  559 	ld	l, c
    000001EB 60               [ 4]  560 	ld	h, b
    000001EC 29               [ 8]  561 	add	hl, hl
    000001ED 29               [ 8]  562 	add	hl, hl
    000001EE 29               [ 8]  563 	add	hl, hl
    000001EF 29               [ 8]  564 	add	hl, hl
    000001F0 11r00r00         [12]  565 	ld	de, #_sprite_tiles
    000001F3 19               [ 8]  566 	add	hl, de
    000001F4 5D               [ 4]  567 	ld	e, l
    000001F5 54               [ 4]  568 	ld	d, h
    000001F6 69               [ 4]  569 	ld	l, c
    000001F7 E5               [16]  570 	push	hl
    000001F8 C5               [16]  571 	push	bc
    000001F9 D5               [16]  572 	push	de
    000001FA AF               [ 4]  573 	xor	a, a
    000001FB 5F               [ 4]  574 	ld	e, a
    000001FC CDrD4r01         [24]  575 	call	_get_tile_offset
    000001FF D1               [12]  576 	pop	de
    00000200 C1               [12]  577 	pop	bc
    00000201 E1               [12]  578 	pop	hl
    00000202 85               [ 4]  579 	add	a, l
    00000203 C5               [16]  580 	push	bc
    00000204 26 00            [ 8]  581 	ld	h, #0x00
    00000206 E5               [16]  582 	push	hl
    00000207 33               [ 8]  583 	inc	sp
    00000208 26 00            [ 8]  584 	ld	h, #0x00
    0000020A E5               [16]  585 	push	hl
    0000020B 33               [ 8]  586 	inc	sp
    0000020C CDr00r00         [24]  587 	call	_set_tile
    0000020F C1               [12]  588 	pop	bc
                                    589 ;src/metasprites.c:127: for(i = 0; i < num_tiles; i++)
    00000210 03               [ 8]  590 	inc	bc
                                    591 ;src/metasprites.c:140: }
    00000211 18 CE            [12]  592 	jr	00103$
                                    593 ;src/metasprites.c:160: void main(void) {
                                    594 ;	---------------------------------
                                    595 ; Function main
                                    596 ; ---------------------------------
    00000213                        597 _main::
    00000213 E8 FA            [16]  598 	add	sp, #-6
                                    599 ;src/metasprites.c:161: DISPLAY_OFF;
    00000215 CDr00r00         [24]  600 	call	_display_off
                                    601 ;src/metasprites.c:164: cgb_compatibility();
    00000218 CDr00r00         [24]  602 	call	_cgb_compatibility
                                    603 ;src/metasprites.c:165: set_sprite_palette(OAMF_CGB_PAL0, 1, gray_pal);
    0000021B 11r49r06         [12]  604 	ld	de, #_gray_pal
    0000021E D5               [16]  605 	push	de
    0000021F AF               [ 4]  606 	xor	a, a
    00000220 3C               [ 4]  607 	inc	a
    00000221 F5               [16]  608 	push	af
    00000222 CDr00r00         [24]  609 	call	_set_sprite_palette
    00000225 E8 04            [16]  610 	add	sp, #4
                                    611 ;src/metasprites.c:166: set_sprite_palette(OAMF_CGB_PAL1, 1, pink_pal);
    00000227 11r51r06         [12]  612 	ld	de, #_pink_pal
    0000022A D5               [16]  613 	push	de
    0000022B 21 01 01         [12]  614 	ld	hl, #0x101
    0000022E E5               [16]  615 	push	hl
    0000022F CDr00r00         [24]  616 	call	_set_sprite_palette
    00000232 E8 04            [16]  617 	add	sp, #4
                                    618 ;src/metasprites.c:167: set_sprite_palette(OAMF_CGB_PAL2, 1, cyan_pal);
    00000234 11r59r06         [12]  619 	ld	de, #_cyan_pal
    00000237 D5               [16]  620 	push	de
    00000238 21 02 01         [12]  621 	ld	hl, #0x102
    0000023B E5               [16]  622 	push	hl
    0000023C CDr00r00         [24]  623 	call	_set_sprite_palette
    0000023F E8 04            [16]  624 	add	sp, #4
                                    625 ;src/metasprites.c:168: set_sprite_palette(OAMF_CGB_PAL3, 1, green_pal);
    00000241 11r61r06         [12]  626 	ld	de, #_green_pal
    00000244 D5               [16]  627 	push	de
    00000245 21 03 01         [12]  628 	ld	hl, #0x103
    00000248 E5               [16]  629 	push	hl
    00000249 CDr00r00         [24]  630 	call	_set_sprite_palette
    0000024C E8 04            [16]  631 	add	sp, #4
                                    632 ;src/metasprites.c:177: fill_bkg_rect(0, 0, DEVICE_SCREEN_WIDTH, DEVICE_SCREEN_HEIGHT, 0);
    0000024E AF               [ 4]  633 	xor	a, a
    0000024F 67               [ 4]  634 	ld	h, a
    00000250 2E 12            [ 8]  635 	ld	l, #0x12
    00000252 E5               [16]  636 	push	hl
    00000253 3E 14            [ 8]  637 	ld	a, #0x14
    00000255 F5               [16]  638 	push	af
    00000256 33               [ 8]  639 	inc	sp
    00000257 AF               [ 4]  640 	xor	a, a
    00000258 0F               [ 4]  641 	rrca
    00000259 F5               [16]  642 	push	af
    0000025A CDr00r00         [24]  643 	call	_fill_bkg_rect
    0000025D E8 05            [16]  644 	add	sp, #5
                                    645 ;src/metasprites.c:180: set_bkg_data(0, 1, pattern);
    0000025F 11rC4r00         [12]  646 	ld	de, #_pattern
    00000262 D5               [16]  647 	push	de
    00000263 AF               [ 4]  648 	xor	a, a
    00000264 3C               [ 4]  649 	inc	a
    00000265 F5               [16]  650 	push	af
    00000266 CDr00r00         [24]  651 	call	_set_bkg_data
    00000269 E8 04            [16]  652 	add	sp, #4
                                    653 ;src/metasprites.c:183: load_and_duplicate_sprite_tile_data();
    0000026B CDrD6r01         [24]  654 	call	_load_and_duplicate_sprite_tile_data
                                    655 ;src/metasprites.c:186: SHOW_BKG; SHOW_SPRITES;
    0000026E F0r00            [12]  656 	ldh	a, (_LCDC_REG + 0)
    00000270 F6 01            [ 8]  657 	or	a, #0x01
    00000272 E0r00            [12]  658 	ldh	(_LCDC_REG + 0), a
    00000274 F0r00            [12]  659 	ldh	a, (_LCDC_REG + 0)
    00000276 F6 02            [ 8]  660 	or	a, #0x02
    00000278 E0r00            [12]  661 	ldh	(_LCDC_REG + 0), a
                                    662 ;src/metasprites.c:192: SPRITES_8x8;
    0000027A F0r00            [12]  663 	ldh	a, (_LCDC_REG + 0)
    0000027C E6 FB            [ 8]  664 	and	a, #0xfb
    0000027E E0r00            [12]  665 	ldh	(_LCDC_REG + 0), a
                                    666 ;src/metasprites.c:194: DISPLAY_ON;
    00000280 F0r00            [12]  667 	ldh	a, (_LCDC_REG + 0)
    00000282 F6 80            [ 8]  668 	or	a, #0x80
    00000284 E0r00            [12]  669 	ldh	(_LCDC_REG + 0), a
                                    670 ;src/metasprites.c:197: PosX = (DEVICE_SCREEN_PX_WIDTH / 2) << 4;
    00000286 21r00r00         [12]  671 	ld	hl, #_PosX
    00000289 AF               [ 4]  672 	xor	a, a
    0000028A 22               [ 8]  673 	ld	(hl+), a
    0000028B 36 05            [12]  674 	ld	(hl), #0x05
                                    675 ;src/metasprites.c:198: PosY = (DEVICE_SCREEN_PX_HEIGHT / 2) << 4;
    0000028D 21r02r00         [12]  676 	ld	hl, #_PosY
    00000290 3E 80            [ 8]  677 	ld	a, #0x80
    00000292 22               [ 8]  678 	ld	(hl+), a
    00000293 36 04            [12]  679 	ld	(hl), #0x04
                                    680 ;src/metasprites.c:199: SpdX = SpdY = 0;
    00000295 AF               [ 4]  681 	xor	a, a
    00000296 21r06r00         [12]  682 	ld	hl, #_SpdY
    00000299 22               [ 8]  683 	ld	(hl+), a
    0000029A 77               [ 8]  684 	ld	(hl), a
    0000029B AF               [ 4]  685 	xor	a, a
    0000029C 21r04r00         [12]  686 	ld	hl, #_SpdX
    0000029F 22               [ 8]  687 	ld	(hl+), a
    000002A0 77               [ 8]  688 	ld	(hl), a
                                    689 ;src/metasprites.c:201: idx = 0; rot = 0;
    000002A1 AF               [ 4]  690 	xor	a, a
    000002A2 EAr09r00         [16]  691 	ld	(#_idx), a
    000002A5 EAr0Ar00         [16]  692 	ld	(#_rot),a
                                    693 ;src/metasprites.c:203: while(TRUE) {        
    000002A8                        694 00145$:
                                    695 ;src/metasprites.c:205: KEY_INPUT;
    000002A8 FAr00r00         [16]  696 	ld	a, (#_joyp)
    000002AB EAr01r00         [16]  697 	ld	(#_old_joyp),a
    000002AE CDr00r00         [24]  698 	call	_joypad
    000002B1 EAr00r00         [16]  699 	ld	(#_joyp),a
                                    700 ;src/metasprites.c:207: PosF = 0;
    000002B4 AF               [ 4]  701 	xor	a, a
    000002B5 EAr08r00         [16]  702 	ld	(#_PosF),a
                                    703 ;src/metasprites.c:209: if (KEY_DOWN(J_UP)) {
    000002B8 FAr00r00         [16]  704 	ld	a, (#_joyp)
    000002BB F8 04            [12]  705 	ldhl	sp,	#4
    000002BD 77               [ 8]  706 	ld	(hl), a
                                    707 ;src/metasprites.c:210: SpdY -= 2;
    000002BE FAr06r00         [16]  708 	ld	a, (_SpdY)
    000002C1 4F               [ 4]  709 	ld	c, a
    000002C2 21r07r00         [12]  710 	ld	hl, #_SpdY + 1
    000002C5 46               [ 8]  711 	ld	b, (hl)
                                    712 ;src/metasprites.c:212: PosF |= ACC_Y;
    000002C6 FAr08r00         [16]  713 	ld	a, (#_PosF)
    000002C9 F6 02            [ 8]  714 	or	a, #0x02
    000002CB F8 05            [12]  715 	ldhl	sp,	#5
    000002CD 77               [ 8]  716 	ld	(hl), a
                                    717 ;src/metasprites.c:209: if (KEY_DOWN(J_UP)) {
    000002CE E5               [16]  718 	push	hl
    000002CF 2B               [ 8]  719 	dec	hl
    000002D0 CB 56            [12]  720 	bit	2, (hl)
    000002D2 E1               [12]  721 	pop	hl
    000002D3 28 34            [12]  722 	jr	Z, 00108$
                                    723 ;src/metasprites.c:210: SpdY -= 2;
    000002D5 0B               [ 8]  724 	dec	bc
    000002D6 0B               [ 8]  725 	dec	bc
    000002D7 21r06r00         [12]  726 	ld	hl, #_SpdY
    000002DA 79               [ 4]  727 	ld	a, c
    000002DB 22               [ 8]  728 	ld	(hl+), a
                                    729 ;src/metasprites.c:211: if (SpdY < -32) SpdY = -32;
    000002DC 78               [ 4]  730 	ld	a, b
    000002DD 32               [ 8]  731 	ld	(hl-), a
    000002DE 2A               [ 8]  732 	ld	a, (hl+)
    000002DF D6 E0            [ 8]  733 	sub	a, #0xe0
    000002E1 7E               [ 8]  734 	ld	a, (hl)
    000002E2 DE FF            [ 8]  735 	sbc	a, #0xff
    000002E4 56               [ 8]  736 	ld	d, (hl)
    000002E5 3E FF            [ 8]  737 	ld	a, #0xff
    000002E7 CB 7F            [ 8]  738 	bit	7,a
    000002E9 28 07            [12]  739 	jr	Z, 00319$
    000002EB CB 7A            [ 8]  740 	bit	7, d
    000002ED 20 08            [12]  741 	jr	NZ, 00320$
    000002EF BF               [ 4]  742 	cp	a, a
    000002F0 18 05            [12]  743 	jr	00320$
    000002F2                        744 00319$:
    000002F2 CB 7A            [ 8]  745 	bit	7, d
    000002F4 28 01            [12]  746 	jr	Z, 00320$
    000002F6 37               [ 4]  747 	scf
    000002F7                        748 00320$:
    000002F7 30 08            [12]  749 	jr	NC, 00102$
    000002F9 21r06r00         [12]  750 	ld	hl, #_SpdY
    000002FC 3E E0            [ 8]  751 	ld	a, #0xe0
    000002FE 22               [ 8]  752 	ld	(hl+), a
    000002FF 36 FF            [12]  753 	ld	(hl), #0xff
    00000301                        754 00102$:
                                    755 ;src/metasprites.c:212: PosF |= ACC_Y;
    00000301 F8 05            [12]  756 	ldhl	sp,	#5
    00000303 7E               [ 8]  757 	ld	a, (hl)
    00000304 EAr08r00         [16]  758 	ld	(#_PosF),a
    00000307 18 3D            [12]  759 	jr	00109$
    00000309                        760 00108$:
                                    761 ;src/metasprites.c:213: } else if (KEY_DOWN(J_DOWN)) {
    00000309 E5               [16]  762 	push	hl
    0000030A F8 06            [12]  763 	ldhl	sp,	#6
    0000030C CB 5E            [12]  764 	bit	3, (hl)
    0000030E E1               [12]  765 	pop	hl
    0000030F 28 35            [12]  766 	jr	Z, 00109$
                                    767 ;src/metasprites.c:214: SpdY += 2;
    00000311 03               [ 8]  768 	inc	bc
    00000312 03               [ 8]  769 	inc	bc
    00000313 21r06r00         [12]  770 	ld	hl, #_SpdY
    00000316 79               [ 4]  771 	ld	a, c
    00000317 22               [ 8]  772 	ld	(hl+), a
                                    773 ;src/metasprites.c:215: if (SpdY > 32) SpdY = 32;
    00000318 78               [ 4]  774 	ld	a, b
    00000319 32               [ 8]  775 	ld	(hl-), a
    0000031A 2A               [ 8]  776 	ld	a, (hl+)
    0000031B 4F               [ 4]  777 	ld	c, a
    0000031C 46               [ 8]  778 	ld	b, (hl)
    0000031D 58               [ 4]  779 	ld	e, b
    0000031E 16 00            [ 8]  780 	ld	d, #0x00
    00000320 3E 20            [ 8]  781 	ld	a, #0x20
    00000322 B9               [ 4]  782 	cp	a, c
    00000323 3E 00            [ 8]  783 	ld	a, #0x00
    00000325 98               [ 4]  784 	sbc	a, b
    00000326 CB 7B            [ 8]  785 	bit	7, e
    00000328 28 07            [12]  786 	jr	Z, 00322$
    0000032A CB 7A            [ 8]  787 	bit	7, d
    0000032C 20 08            [12]  788 	jr	NZ, 00323$
    0000032E BF               [ 4]  789 	cp	a, a
    0000032F 18 05            [12]  790 	jr	00323$
    00000331                        791 00322$:
    00000331 CB 7A            [ 8]  792 	bit	7, d
    00000333 28 01            [12]  793 	jr	Z, 00323$
    00000335 37               [ 4]  794 	scf
    00000336                        795 00323$:
    00000336 30 08            [12]  796 	jr	NC, 00104$
    00000338 21r06r00         [12]  797 	ld	hl, #_SpdY
    0000033B 3E 20            [ 8]  798 	ld	a, #0x20
    0000033D 22               [ 8]  799 	ld	(hl+), a
    0000033E AF               [ 4]  800 	xor	a, a
    0000033F 77               [ 8]  801 	ld	(hl), a
    00000340                        802 00104$:
                                    803 ;src/metasprites.c:216: PosF |= ACC_Y;
    00000340 F8 05            [12]  804 	ldhl	sp,	#5
    00000342 7E               [ 8]  805 	ld	a, (hl)
    00000343 EAr08r00         [16]  806 	ld	(#_PosF),a
    00000346                        807 00109$:
                                    808 ;src/metasprites.c:220: SpdX -= 2;
    00000346 FAr04r00         [16]  809 	ld	a, (_SpdX)
    00000349 5F               [ 4]  810 	ld	e, a
    0000034A 21r05r00         [12]  811 	ld	hl, #_SpdX + 1
    0000034D 56               [ 8]  812 	ld	d, (hl)
                                    813 ;src/metasprites.c:222: PosF |= ACC_X;
    0000034E FAr08r00         [16]  814 	ld	a, (#_PosF)
    00000351 F6 01            [ 8]  815 	or	a, #0x01
    00000353 F8 05            [12]  816 	ldhl	sp,	#5
    00000355 77               [ 8]  817 	ld	(hl), a
                                    818 ;src/metasprites.c:219: if (KEY_DOWN(J_LEFT)) {
    00000356 E5               [16]  819 	push	hl
    00000357 2B               [ 8]  820 	dec	hl
    00000358 CB 4E            [12]  821 	bit	1, (hl)
    0000035A E1               [12]  822 	pop	hl
    0000035B 28 34            [12]  823 	jr	Z, 00117$
                                    824 ;src/metasprites.c:220: SpdX -= 2;
    0000035D 1B               [ 8]  825 	dec	de
    0000035E 1B               [ 8]  826 	dec	de
    0000035F 21r04r00         [12]  827 	ld	hl, #_SpdX
    00000362 7B               [ 4]  828 	ld	a, e
    00000363 22               [ 8]  829 	ld	(hl+), a
                                    830 ;src/metasprites.c:221: if (SpdX < -32) SpdX = -32;
    00000364 7A               [ 4]  831 	ld	a, d
    00000365 32               [ 8]  832 	ld	(hl-), a
    00000366 2A               [ 8]  833 	ld	a, (hl+)
    00000367 D6 E0            [ 8]  834 	sub	a, #0xe0
    00000369 7E               [ 8]  835 	ld	a, (hl)
    0000036A DE FF            [ 8]  836 	sbc	a, #0xff
    0000036C 56               [ 8]  837 	ld	d, (hl)
    0000036D 3E FF            [ 8]  838 	ld	a, #0xff
    0000036F CB 7F            [ 8]  839 	bit	7,a
    00000371 28 07            [12]  840 	jr	Z, 00325$
    00000373 CB 7A            [ 8]  841 	bit	7, d
    00000375 20 08            [12]  842 	jr	NZ, 00326$
    00000377 BF               [ 4]  843 	cp	a, a
    00000378 18 05            [12]  844 	jr	00326$
    0000037A                        845 00325$:
    0000037A CB 7A            [ 8]  846 	bit	7, d
    0000037C 28 01            [12]  847 	jr	Z, 00326$
    0000037E 37               [ 4]  848 	scf
    0000037F                        849 00326$:
    0000037F 30 08            [12]  850 	jr	NC, 00111$
    00000381 21r04r00         [12]  851 	ld	hl, #_SpdX
    00000384 3E E0            [ 8]  852 	ld	a, #0xe0
    00000386 22               [ 8]  853 	ld	(hl+), a
    00000387 36 FF            [12]  854 	ld	(hl), #0xff
    00000389                        855 00111$:
                                    856 ;src/metasprites.c:222: PosF |= ACC_X;
    00000389 F8 05            [12]  857 	ldhl	sp,	#5
    0000038B 7E               [ 8]  858 	ld	a, (hl)
    0000038C EAr08r00         [16]  859 	ld	(#_PosF),a
    0000038F 18 3D            [12]  860 	jr	00118$
    00000391                        861 00117$:
                                    862 ;src/metasprites.c:223: } else if (KEY_DOWN(J_RIGHT)) {
    00000391 E5               [16]  863 	push	hl
    00000392 F8 06            [12]  864 	ldhl	sp,	#6
    00000394 CB 46            [12]  865 	bit	0, (hl)
    00000396 E1               [12]  866 	pop	hl
    00000397 28 35            [12]  867 	jr	Z, 00118$
                                    868 ;src/metasprites.c:224: SpdX += 2;
    00000399 13               [ 8]  869 	inc	de
    0000039A 13               [ 8]  870 	inc	de
    0000039B 21r04r00         [12]  871 	ld	hl, #_SpdX
    0000039E 7B               [ 4]  872 	ld	a, e
    0000039F 22               [ 8]  873 	ld	(hl+), a
                                    874 ;src/metasprites.c:225: if (SpdX > 32) SpdX = 32;
    000003A0 7A               [ 4]  875 	ld	a, d
    000003A1 32               [ 8]  876 	ld	(hl-), a
    000003A2 2A               [ 8]  877 	ld	a, (hl+)
    000003A3 4F               [ 4]  878 	ld	c, a
    000003A4 46               [ 8]  879 	ld	b, (hl)
    000003A5 58               [ 4]  880 	ld	e, b
    000003A6 16 00            [ 8]  881 	ld	d, #0x00
    000003A8 3E 20            [ 8]  882 	ld	a, #0x20
    000003AA B9               [ 4]  883 	cp	a, c
    000003AB 3E 00            [ 8]  884 	ld	a, #0x00
    000003AD 98               [ 4]  885 	sbc	a, b
    000003AE CB 7B            [ 8]  886 	bit	7, e
    000003B0 28 07            [12]  887 	jr	Z, 00328$
    000003B2 CB 7A            [ 8]  888 	bit	7, d
    000003B4 20 08            [12]  889 	jr	NZ, 00329$
    000003B6 BF               [ 4]  890 	cp	a, a
    000003B7 18 05            [12]  891 	jr	00329$
    000003B9                        892 00328$:
    000003B9 CB 7A            [ 8]  893 	bit	7, d
    000003BB 28 01            [12]  894 	jr	Z, 00329$
    000003BD 37               [ 4]  895 	scf
    000003BE                        896 00329$:
    000003BE 30 08            [12]  897 	jr	NC, 00113$
    000003C0 21r04r00         [12]  898 	ld	hl, #_SpdX
    000003C3 3E 20            [ 8]  899 	ld	a, #0x20
    000003C5 22               [ 8]  900 	ld	(hl+), a
    000003C6 AF               [ 4]  901 	xor	a, a
    000003C7 77               [ 8]  902 	ld	(hl), a
    000003C8                        903 00113$:
                                    904 ;src/metasprites.c:226: PosF |= ACC_X;
    000003C8 F8 05            [12]  905 	ldhl	sp,	#5
    000003CA 7E               [ 8]  906 	ld	a, (hl)
    000003CB EAr08r00         [16]  907 	ld	(#_PosF),a
    000003CE                        908 00118$:
                                    909 ;src/metasprites.c:230: if (KEY_PRESSED(J_B)) {
    000003CE FAr00r00         [16]  910 	ld	a, (#_joyp)
    000003D1 21r01r00         [12]  911 	ld	hl, #_old_joyp
    000003D4 AE               [ 8]  912 	xor	a, (hl)
    000003D5 21r00r00         [12]  913 	ld	hl, #_joyp
    000003D8 A6               [ 8]  914 	and	a, (hl)
    000003D9 4F               [ 4]  915 	ld	c, a
    000003DA CB 69            [ 8]  916 	bit	5, c
    000003DC 28 0B            [12]  917 	jr	Z, 00122$
                                    918 ;src/metasprites.c:231: idx++; if (idx >= (sizeof(sprite_metasprites) >> 1)) idx = 0;
    000003DE 21r09r00         [12]  919 	ld	hl, #_idx
    000003E1 34               [12]  920 	inc	(hl)
    000003E2 7E               [ 8]  921 	ld	a, (hl)
    000003E3 D6 05            [ 8]  922 	sub	a, #0x05
    000003E5 38 02            [12]  923 	jr	C, 00122$
    000003E7 36 00            [12]  924 	ld	(hl), #0x00
    000003E9                        925 00122$:
                                    926 ;src/metasprites.c:235: if (KEY_PRESSED(J_A)) {
    000003E9 CB 61            [ 8]  927 	bit	4, c
    000003EB 28 08            [12]  928 	jr	Z, 00124$
                                    929 ;src/metasprites.c:236: rot++; rot &= 0xF;
    000003ED 21r0Ar00         [12]  930 	ld	hl, #_rot
    000003F0 34               [12]  931 	inc	(hl)
    000003F1 7E               [ 8]  932 	ld	a, (hl)
    000003F2 E6 0F            [ 8]  933 	and	a, #0x0f
    000003F4 77               [ 8]  934 	ld	(hl), a
    000003F5                        935 00124$:
                                    936 ;src/metasprites.c:239: PosX += SpdX, PosY += SpdY; 
    000003F5 FAr00r00         [16]  937 	ld	a, (#_PosX)
    000003F8 21r04r00         [12]  938 	ld	hl, #_SpdX
    000003FB 86               [ 8]  939 	add	a, (hl)
    000003FC 21r00r00         [12]  940 	ld	hl, #_PosX
    000003FF 22               [ 8]  941 	ld	(hl+), a
    00000400 7E               [ 8]  942 	ld	a, (hl)
    00000401 21r05r00         [12]  943 	ld	hl, #_SpdX + 1
    00000404 8E               [ 8]  944 	adc	a, (hl)
    00000405 EAr01r00         [16]  945 	ld	(#_PosX + 1),a
    00000408 FAr02r00         [16]  946 	ld	a, (#_PosY)
    0000040B 21r06r00         [12]  947 	ld	hl, #_SpdY
    0000040E 86               [ 8]  948 	add	a, (hl)
    0000040F 21r02r00         [12]  949 	ld	hl, #_PosY
    00000412 22               [ 8]  950 	ld	(hl+), a
    00000413 7E               [ 8]  951 	ld	a, (hl)
    00000414 21r07r00         [12]  952 	ld	hl, #_SpdY + 1
    00000417 8E               [ 8]  953 	adc	a, (hl)
    00000418 EAr03r00         [16]  954 	ld	(#_PosY + 1),a
                                    955 ;src/metasprites.c:250: uint8_t subpal = rot >> 2;
    0000041B FAr0Ar00         [16]  956 	ld	a, (#_rot)
    0000041E 0F               [ 4]  957 	rrca
    0000041F 0F               [ 4]  958 	rrca
    00000420 E6 3F            [ 8]  959 	and	a, #0x3f
    00000422 F8 05            [12]  960 	ldhl	sp,	#5
    00000424 77               [ 8]  961 	ld	(hl), a
                                    962 ;src/metasprites.c:251: switch (rot & 0x3) {
    00000425 FAr0Ar00         [16]  963 	ld	a, (_rot)
    00000428 E6 03            [ 8]  964 	and	a, #0x03
    0000042A F8 02            [12]  965 	ldhl	sp,	#2
    0000042C 77               [ 8]  966 	ld	(hl), a
                                    967 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000042D 21r02r00         [12]  968 	ld	hl, #_PosY
    00000430 2A               [ 8]  969 	ld	a, (hl+)
    00000431 5F               [ 4]  970 	ld	e, a
    00000432 56               [ 8]  971 	ld	d, (hl)
    00000433 CB 2A            [ 8]  972 	sra	d
    00000435 CB 1B            [ 8]  973 	rr	e
    00000437 CB 2A            [ 8]  974 	sra	d
    00000439 CB 1B            [ 8]  975 	rr	e
    0000043B CB 2A            [ 8]  976 	sra	d
    0000043D CB 1B            [ 8]  977 	rr	e
    0000043F CB 2A            [ 8]  978 	sra	d
    00000441 CB 1B            [ 8]  979 	rr	e
                                    980 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    00000443 21r00r00         [12]  981 	ld	hl, #_PosX
    00000446 2A               [ 8]  982 	ld	a, (hl+)
    00000447 4F               [ 4]  983 	ld	c, a
    00000448 46               [ 8]  984 	ld	b, (hl)
    00000449 CB 28            [ 8]  985 	sra	b
    0000044B CB 19            [ 8]  986 	rr	c
    0000044D CB 28            [ 8]  987 	sra	b
    0000044F CB 19            [ 8]  988 	rr	c
    00000451 CB 28            [ 8]  989 	sra	b
    00000453 CB 19            [ 8]  990 	rr	c
    00000455 CB 28            [ 8]  991 	sra	b
    00000457 CB 19            [ 8]  992 	rr	c
                                    993 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000459 7B               [ 4]  994 	ld	a, e
                                    995 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                    996 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000045A C6 10            [ 8]  997 	add	a, #0x10
    0000045C F8 03            [12]  998 	ldhl	sp,	#3
                                    999 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    0000045E 22               [ 8] 1000 	ld	(hl+), a
    0000045F 79               [ 4] 1001 	ld	a, c
    00000460 C6 08            [ 8] 1002 	add	a, #0x08
                                   1003 ;src/metasprites.c:251: switch (rot & 0x3) {
    00000462 32               [ 8] 1004 	ld	(hl-), a
    00000463 2B               [ 8] 1005 	dec	hl
    00000464 7E               [ 8] 1006 	ld	a, (hl)
    00000465 3D               [ 4] 1007 	dec	a
    00000466 28 12            [12] 1008 	jr	Z, 00125$
    00000468 F8 02            [12] 1009 	ldhl	sp,	#2
    0000046A 7E               [ 8] 1010 	ld	a, (hl)
    0000046B D6 02            [ 8] 1011 	sub	a, #0x02
    0000046D 28 4F            [12] 1012 	jr	Z, 00126$
    0000046F F8 02            [12] 1013 	ldhl	sp,	#2
    00000471 7E               [ 8] 1014 	ld	a, (hl)
    00000472 D6 03            [ 8] 1015 	sub	a, #0x03
    00000474 CAr07r05         [16] 1016 	jp	Z, 00127$
    00000477 C3r41r05         [16] 1017 	jp	00128$
                                   1018 ;src/metasprites.c:252: case 1:
    0000047A                       1019 00125$:
                                   1020 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1021 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1022 ;src/metasprites.c:254: TILE_NUM_START + get_tile_offset(0, 1),
    0000047A 1E 01            [ 8] 1023 	ld	e, #0x01
    0000047C AF               [ 4] 1024 	xor	a, a
    0000047D CDrD4r01         [24] 1025 	call	_get_tile_offset
    00000480 4F               [ 4] 1026 	ld	c, a
                                   1027 ;src/metasprites.c:253: hiwater += move_metasprite_flipy( sprite_metasprites[idx],
    00000481 11r00r00         [12] 1028 	ld	de, #_sprite_metasprites+0
    00000484 FAr09r00         [16] 1029 	ld	a, (_idx)
    00000487 6F               [ 4] 1030 	ld	l, a
    00000488 26 00            [ 8] 1031 	ld	h, #0x00
    0000048A 29               [ 8] 1032 	add	hl, hl
    0000048B 19               [ 8] 1033 	add	hl, de
    0000048C 2A               [ 8] 1034 	ld	a, (hl+)
    0000048D 46               [ 8] 1035 	ld	b, (hl)
                                   1036 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000048E F8 04            [12] 1037 	ldhl	sp,	#4
    00000490 5E               [ 8] 1038 	ld	e, (hl)
                                   1039 ;../../../include/gb/metasprites.h:241: __current_metasprite = metasprite;
    00000491 21r00r00         [12] 1040 	ld	hl, #___current_metasprite
    00000494 22               [ 8] 1041 	ld	(hl+), a
    00000495 70               [ 8] 1042 	ld	(hl), b
                                   1043 ;../../../include/gb/metasprites.h:242: __current_base_tile = base_tile;
    00000496 21r00r00         [12] 1044 	ld	hl, #___current_base_tile
    00000499 71               [ 8] 1045 	ld	(hl), c
                                   1046 ;../../../include/gb/metasprites.h:243: __current_base_prop = base_prop;
    0000049A F8 05            [12] 1047 	ldhl	sp,	#5
    0000049C 7E               [ 8] 1048 	ld	a, (hl)
    0000049D EAr00r00         [16] 1049 	ld	(#___current_base_prop),a
                                   1050 ;../../../include/gb/metasprites.h:244: return __move_metasprite_flipy(base_sprite, ((y - ((LCDC_REG & LCDCF_OBJ16) ? 16u : 8u)) << 8) | x);
    000004A0 F8 03            [12] 1051 	ldhl	sp,	#3
    000004A2 6E               [ 8] 1052 	ld	l, (hl)
    000004A3 F0r00            [12] 1053 	ldh	a, (_LCDC_REG + 0)
    000004A5 CB 57            [ 8] 1054 	bit	2, a
    000004A7 28 05            [12] 1055 	jr	Z, 00153$
    000004A9 01 10 00         [12] 1056 	ld	bc, #0x0010
    000004AC 18 03            [12] 1057 	jr	00154$
    000004AE                       1058 00153$:
    000004AE 01 08 00         [12] 1059 	ld	bc, #0x0008
    000004B1                       1060 00154$:
    000004B1 7D               [ 4] 1061 	ld	a, l
    000004B2 91               [ 4] 1062 	sub	a, c
    000004B3 57               [ 4] 1063 	ld	d, a
    000004B4 AF               [ 4] 1064 	xor	a, a
    000004B5 CDr00r00         [24] 1065 	call	___move_metasprite_flipy
                                   1066 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    000004B8 F8 05            [12] 1067 	ldhl	sp,	#5
    000004BA 77               [ 8] 1068 	ld	(hl), a
                                   1069 ;src/metasprites.c:259: break;
    000004BB C3rC0r05         [16] 1070 	jp	00129$
                                   1071 ;src/metasprites.c:260: case 2:
    000004BE                       1072 00126$:
                                   1073 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1074 ;src/metasprites.c:265: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1075 ;src/metasprites.c:262: TILE_NUM_START + get_tile_offset(1, 1),
    000004BE 3E 01            [ 8] 1076 	ld	a,#0x01
    000004C0 5F               [ 4] 1077 	ld	e,a
    000004C1 CDrD4r01         [24] 1078 	call	_get_tile_offset
    000004C4 4F               [ 4] 1079 	ld	c, a
                                   1080 ;src/metasprites.c:261: hiwater += move_metasprite_flipxy(sprite_metasprites[idx],
    000004C5 11r00r00         [12] 1081 	ld	de, #_sprite_metasprites+0
    000004C8 FAr09r00         [16] 1082 	ld	a, (_idx)
    000004CB 6F               [ 4] 1083 	ld	l, a
    000004CC 26 00            [ 8] 1084 	ld	h, #0x00
    000004CE 29               [ 8] 1085 	add	hl, hl
    000004CF 19               [ 8] 1086 	add	hl, de
    000004D0 2A               [ 8] 1087 	ld	a, (hl+)
    000004D1 46               [ 8] 1088 	ld	b, (hl)
                                   1089 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    000004D2 F8 04            [12] 1090 	ldhl	sp,	#4
    000004D4 5E               [ 8] 1091 	ld	e, (hl)
                                   1092 ;../../../include/gb/metasprites.h:281: __current_metasprite = metasprite;
    000004D5 21r00r00         [12] 1093 	ld	hl, #___current_metasprite
    000004D8 22               [ 8] 1094 	ld	(hl+), a
    000004D9 70               [ 8] 1095 	ld	(hl), b
                                   1096 ;../../../include/gb/metasprites.h:282: __current_base_tile = base_tile;
    000004DA 21r00r00         [12] 1097 	ld	hl, #___current_base_tile
    000004DD 71               [ 8] 1098 	ld	(hl), c
                                   1099 ;../../../include/gb/metasprites.h:283: __current_base_prop = base_prop;
    000004DE F8 05            [12] 1100 	ldhl	sp,	#5
    000004E0 7E               [ 8] 1101 	ld	a, (hl)
    000004E1 EAr00r00         [16] 1102 	ld	(#___current_base_prop),a
                                   1103 ;../../../include/gb/metasprites.h:284: return __move_metasprite_flipxy(base_sprite, ((y - ((LCDC_REG & LCDCF_OBJ16) ? 16u : 8u)) << 8) | (uint8_t)(x - 8));
    000004E4 F8 03            [12] 1104 	ldhl	sp,	#3
    000004E6 56               [ 8] 1105 	ld	d, (hl)
    000004E7 F0r00            [12] 1106 	ldh	a, (_LCDC_REG + 0)
    000004E9 CB 57            [ 8] 1107 	bit	2, a
    000004EB 28 05            [12] 1108 	jr	Z, 00155$
    000004ED 01 10 00         [12] 1109 	ld	bc, #0x0010
    000004F0 18 03            [12] 1110 	jr	00156$
    000004F2                       1111 00155$:
    000004F2 01 08 00         [12] 1112 	ld	bc, #0x0008
    000004F5                       1113 00156$:
    000004F5 7A               [ 4] 1114 	ld	a, d
    000004F6 91               [ 4] 1115 	sub	a, c
    000004F7 47               [ 4] 1116 	ld	b, a
    000004F8 7B               [ 4] 1117 	ld	a, e
    000004F9 C6 F8            [ 8] 1118 	add	a, #0xf8
    000004FB 5F               [ 4] 1119 	ld	e, a
    000004FC 50               [ 4] 1120 	ld	d, b
    000004FD AF               [ 4] 1121 	xor	a, a
    000004FE CDr00r00         [24] 1122 	call	___move_metasprite_flipxy
                                   1123 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000501 F8 05            [12] 1124 	ldhl	sp,	#5
    00000503 77               [ 8] 1125 	ld	(hl), a
                                   1126 ;src/metasprites.c:267: break;
    00000504 C3rC0r05         [16] 1127 	jp	00129$
                                   1128 ;src/metasprites.c:268: case 3:
    00000507                       1129 00127$:
                                   1130 ;src/metasprites.c:274: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1131 ;src/metasprites.c:273: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1132 ;src/metasprites.c:270: TILE_NUM_START + get_tile_offset(1, 0),
    00000507 1E 00            [ 8] 1133 	ld	e, #0x00
    00000509 3E 01            [ 8] 1134 	ld	a, #0x01
    0000050B CDrD4r01         [24] 1135 	call	_get_tile_offset
    0000050E 4F               [ 4] 1136 	ld	c, a
                                   1137 ;src/metasprites.c:269: hiwater += move_metasprite_flipx( sprite_metasprites[idx],
    0000050F FAr09r00         [16] 1138 	ld	a, (_idx)
    00000512 26 00            [ 8] 1139 	ld	h, #0x00
    00000514 6F               [ 4] 1140 	ld	l, a
    00000515 29               [ 8] 1141 	add	hl, hl
    00000516 11r00r00         [12] 1142 	ld	de, #_sprite_metasprites
    00000519 19               [ 8] 1143 	add	hl, de
    0000051A 2A               [ 8] 1144 	ld	a,	(hl+)
    0000051B 66               [ 8] 1145 	ld	h, (hl)
                                   1146 ;../../../include/gb/metasprites.h:200: __current_metasprite = metasprite;
    0000051C 5F               [ 4] 1147 	ld	e, a
    0000051D 54               [ 4] 1148 	ld	d, h
    0000051E 21r00r00         [12] 1149 	ld	hl, #___current_metasprite
    00000521 7B               [ 4] 1150 	ld	a, e
    00000522 22               [ 8] 1151 	ld	(hl+), a
    00000523 72               [ 8] 1152 	ld	(hl), d
                                   1153 ;../../../include/gb/metasprites.h:201: __current_base_tile = base_tile;
    00000524 21r00r00         [12] 1154 	ld	hl, #___current_base_tile
    00000527 71               [ 8] 1155 	ld	(hl), c
                                   1156 ;../../../include/gb/metasprites.h:202: __current_base_prop = base_prop;
    00000528 F8 05            [12] 1157 	ldhl	sp,	#5
    0000052A 7E               [ 8] 1158 	ld	a, (hl)
    0000052B EAr00r00         [16] 1159 	ld	(#___current_base_prop),a
                                   1160 ;../../../include/gb/metasprites.h:203: return __move_metasprite_flipx(base_sprite, (y << 8) | (uint8_t)(x - 8u));
    0000052E F8 03            [12] 1161 	ldhl	sp,	#3
    00000530 2A               [ 8] 1162 	ld	a, (hl+)
    00000531 47               [ 4] 1163 	ld	b, a
    00000532 7E               [ 8] 1164 	ld	a, (hl)
    00000533 C6 F8            [ 8] 1165 	add	a, #0xf8
    00000535 5F               [ 4] 1166 	ld	e, a
    00000536 50               [ 4] 1167 	ld	d, b
    00000537 AF               [ 4] 1168 	xor	a, a
    00000538 CDr00r00         [24] 1169 	call	___move_metasprite_flipx
    0000053B F8 05            [12] 1170 	ldhl	sp,	#5
    0000053D 77               [ 8] 1171 	ld	(hl), a
                                   1172 ;src/metasprites.c:275: break;
    0000053E C3rC0r05         [16] 1173 	jp	00129$
                                   1174 ;src/metasprites.c:276: default:
    00000541                       1175 00128$:
                                   1176 ;src/metasprites.c:282: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000541 F8 03            [12] 1177 	ldhl	sp,	#3
    00000543 7E               [ 8] 1178 	ld	a, (hl)
    00000544 F8 00            [12] 1179 	ldhl	sp,	#0
    00000546 77               [ 8] 1180 	ld	(hl), a
                                   1181 ;src/metasprites.c:281: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    00000547 F8 04            [12] 1182 	ldhl	sp,	#4
    00000549 7E               [ 8] 1183 	ld	a, (hl)
    0000054A F8 01            [12] 1184 	ldhl	sp,	#1
    0000054C 77               [ 8] 1185 	ld	(hl), a
    0000054D F8 05            [12] 1186 	ldhl	sp,	#5
    0000054F 7E               [ 8] 1187 	ld	a, (hl)
    00000550 F8 02            [12] 1188 	ldhl	sp,	#2
    00000552 77               [ 8] 1189 	ld	(hl), a
                                   1190 ;src/metasprites.c:278: TILE_NUM_START + get_tile_offset(0, 0),
    00000553 AF               [ 4] 1191 	xor	a, a
    00000554 5F               [ 4] 1192 	ld	e, a
    00000555 CDrD4r01         [24] 1193 	call	_get_tile_offset
    00000558 F8 03            [12] 1194 	ldhl	sp,	#3
    0000055A 77               [ 8] 1195 	ld	(hl), a
                                   1196 ;src/metasprites.c:277: hiwater += move_metasprite_ex(    sprite_metasprites[idx],
    0000055B FAr09r00         [16] 1197 	ld	a, (_idx)
    0000055E 16 00            [ 8] 1198 	ld	d, #0x00
    00000560 87               [ 4] 1199 	add	a, a
    00000561 CB 12            [ 8] 1200 	rl	d
    00000563 5F               [ 4] 1201 	ld	e, a
    00000564 21r00r00         [12] 1202 	ld	hl, #_sprite_metasprites
    00000567 19               [ 8] 1203 	add	hl, de
    00000568 E5               [16] 1204 	push	hl
    00000569 7D               [ 4] 1205 	ld	a, l
    0000056A F8 06            [12] 1206 	ldhl	sp,	#6
    0000056C 77               [ 8] 1207 	ld	(hl), a
    0000056D E1               [12] 1208 	pop	hl
    0000056E 7C               [ 4] 1209 	ld	a, h
    0000056F F8 05            [12] 1210 	ldhl	sp,	#5
    00000571 32               [ 8] 1211 	ld	(hl-), a
    00000572 2A               [ 8] 1212 	ld	a, (hl+)
    00000573 5F               [ 4] 1213 	ld	e, a
    00000574 3A               [ 8] 1214 	ld	a, (hl-)
    00000575 57               [ 4] 1215 	ld	d, a
    00000576 1A               [ 8] 1216 	ld	a, (de)
    00000577 22               [ 8] 1217 	ld	(hl+), a
    00000578 13               [ 8] 1218 	inc	de
    00000579 1A               [ 8] 1219 	ld	a, (de)
                                   1220 ;../../../include/gb/metasprites.h:160: __current_metasprite = metasprite;
    0000057A 32               [ 8] 1221 	ld	(hl-), a
    0000057B 7E               [ 8] 1222 	ld	a, (hl)
    0000057C EAr00r00         [16] 1223 	ld	(#___current_metasprite),a
    0000057F F8 05            [12] 1224 	ldhl	sp,	#5
    00000581 7E               [ 8] 1225 	ld	a, (hl)
    00000582 EAr01r00         [16] 1226 	ld	(#___current_metasprite + 1),a
                                   1227 ;../../../include/gb/metasprites.h:161: __current_base_tile = base_tile;
    00000585 F8 03            [12] 1228 	ldhl	sp,	#3
    00000587 7E               [ 8] 1229 	ld	a, (hl)
    00000588 EAr00r00         [16] 1230 	ld	(#___current_base_tile),a
                                   1231 ;../../../include/gb/metasprites.h:162: __current_base_prop = base_prop;
    0000058B F8 02            [12] 1232 	ldhl	sp,	#2
    0000058D 7E               [ 8] 1233 	ld	a, (hl)
    0000058E EAr00r00         [16] 1234 	ld	(#___current_base_prop),a
                                   1235 ;../../../include/gb/metasprites.h:163: return __move_metasprite(base_sprite, (y << 8) | (uint8_t)x);
    00000591 F8 00            [12] 1236 	ldhl	sp,	#0
    00000593 7E               [ 8] 1237 	ld	a, (hl)
    00000594 F8 04            [12] 1238 	ldhl	sp,	#4
    00000596 22               [ 8] 1239 	ld	(hl+), a
    00000597 AF               [ 4] 1240 	xor	a, a
    00000598 32               [ 8] 1241 	ld	(hl-), a
    00000599 2A               [ 8] 1242 	ld	a, (hl+)
    0000059A 32               [ 8] 1243 	ld	(hl-), a
    0000059B 36 00            [12] 1244 	ld	(hl), #0x00
    0000059D F8 01            [12] 1245 	ldhl	sp,	#1
    0000059F 2A               [ 8] 1246 	ld	a, (hl+)
    000005A0 22               [ 8] 1247 	ld	(hl+), a
    000005A1 AF               [ 4] 1248 	xor	a, a
    000005A2 32               [ 8] 1249 	ld	(hl-), a
    000005A3 3A               [ 8] 1250 	ld	a, (hl-)
    000005A4 2B               [ 8] 1251 	dec	hl
    000005A5 77               [ 8] 1252 	ld	(hl), a
    000005A6 F8 05            [12] 1253 	ldhl	sp,	#5
    000005A8 7E               [ 8] 1254 	ld	a, (hl)
    000005A9 F8 01            [12] 1255 	ldhl	sp,	#1
    000005AB 32               [ 8] 1256 	ld	(hl-), a
    000005AC 7E               [ 8] 1257 	ld	a, (hl)
    000005AD F8 04            [12] 1258 	ldhl	sp,	#4
    000005AF 77               [ 8] 1259 	ld	(hl), a
    000005B0 F8 01            [12] 1260 	ldhl	sp,	#1
    000005B2 7E               [ 8] 1261 	ld	a, (hl)
    000005B3 F8 05            [12] 1262 	ldhl	sp,	#5
    000005B5 32               [ 8] 1263 	ld	(hl-), a
    000005B6 2A               [ 8] 1264 	ld	a, (hl+)
    000005B7 5F               [ 4] 1265 	ld	e, a
    000005B8 56               [ 8] 1266 	ld	d, (hl)
    000005B9 AF               [ 4] 1267 	xor	a, a
    000005BA CDr00r00         [24] 1268 	call	___move_metasprite
    000005BD F8 05            [12] 1269 	ldhl	sp,	#5
    000005BF 77               [ 8] 1270 	ld	(hl), a
                                   1271 ;src/metasprites.c:284: }
    000005C0                       1272 00129$:
                                   1273 ;src/metasprites.c:287: hide_sprites_range(hiwater, MAX_HARDWARE_SPRITES);        
    000005C0 1E 28            [ 8] 1274 	ld	e, #0x28
    000005C2 F8 05            [12] 1275 	ldhl	sp,	#5
    000005C4 7E               [ 8] 1276 	ld	a, (hl)
    000005C5 CDr00r00         [24] 1277 	call	_hide_sprites_range
                                   1278 ;src/metasprites.c:290: if (!(PosF & ACC_Y)) {
    000005C8 FAr08r00         [16] 1279 	ld	a, (_PosF)
    000005CB 4F               [ 4] 1280 	ld	c, a
    000005CC CB 49            [ 8] 1281 	bit	1, c
    000005CE 20 36            [12] 1282 	jr	NZ, 00136$
                                   1283 ;src/metasprites.c:291: if (SpdY != 0) {
    000005D0 21r07r00         [12] 1284 	ld	hl, #_SpdY + 1
    000005D3 3A               [ 8] 1285 	ld	a, (hl-)
    000005D4 B6               [ 8] 1286 	or	a, (hl)
    000005D5 28 2F            [12] 1287 	jr	Z, 00136$
                                   1288 ;src/metasprites.c:292: if (SpdY > 0) SpdY--;
    000005D7 2A               [ 8] 1289 	ld	a, (hl+)
    000005D8 47               [ 4] 1290 	ld	b, a
    000005D9 6E               [ 8] 1291 	ld	l, (hl)
    000005DA 5D               [ 4] 1292 	ld	e, l
    000005DB AF               [ 4] 1293 	xor	a, a
    000005DC 57               [ 4] 1294 	ld	d, a
    000005DD B8               [ 4] 1295 	cp	a, b
    000005DE 9D               [ 4] 1296 	sbc	a, l
    000005DF CB 7B            [ 8] 1297 	bit	7, e
    000005E1 28 07            [12] 1298 	jr	Z, 00340$
    000005E3 CB 7A            [ 8] 1299 	bit	7, d
    000005E5 20 08            [12] 1300 	jr	NZ, 00341$
    000005E7 BF               [ 4] 1301 	cp	a, a
    000005E8 18 05            [12] 1302 	jr	00341$
    000005EA                       1303 00340$:
    000005EA CB 7A            [ 8] 1304 	bit	7, d
    000005EC 28 01            [12] 1305 	jr	Z, 00341$
    000005EE 37               [ 4] 1306 	scf
    000005EF                       1307 00341$:
    000005EF 30 0D            [12] 1308 	jr	NC, 00131$
    000005F1 21r06r00         [12] 1309 	ld	hl, #_SpdY
    000005F4 2A               [ 8] 1310 	ld	a, (hl+)
    000005F5 5F               [ 4] 1311 	ld	e, a
    000005F6 3A               [ 8] 1312 	ld	a, (hl-)
    000005F7 57               [ 4] 1313 	ld	d, a
    000005F8 1B               [ 8] 1314 	dec	de
    000005F9 7B               [ 4] 1315 	ld	a, e
    000005FA 22               [ 8] 1316 	ld	(hl+), a
    000005FB 72               [ 8] 1317 	ld	(hl), d
    000005FC 18 08            [12] 1318 	jr	00136$
    000005FE                       1319 00131$:
                                   1320 ;src/metasprites.c:293: else SpdY ++;
    000005FE 21r06r00         [12] 1321 	ld	hl, #_SpdY
    00000601 34               [12] 1322 	inc	(hl)
    00000602 20 02            [12] 1323 	jr	NZ, 00342$
    00000604 23               [ 8] 1324 	inc	hl
    00000605 34               [12] 1325 	inc	(hl)
    00000606                       1326 00342$:
    00000606                       1327 00136$:
                                   1328 ;src/metasprites.c:298: if (!(PosF & ACC_X)) {
    00000606 CB 41            [ 8] 1329 	bit	0, c
    00000608 20 36            [12] 1330 	jr	NZ, 00143$
                                   1331 ;src/metasprites.c:299: if (SpdX != 0) {
    0000060A 21r05r00         [12] 1332 	ld	hl, #_SpdX + 1
    0000060D 3A               [ 8] 1333 	ld	a, (hl-)
    0000060E B6               [ 8] 1334 	or	a, (hl)
    0000060F 28 2F            [12] 1335 	jr	Z, 00143$
                                   1336 ;src/metasprites.c:300: if (SpdX > 0) SpdX--;
    00000611 2A               [ 8] 1337 	ld	a, (hl+)
    00000612 4F               [ 4] 1338 	ld	c, a
    00000613 46               [ 8] 1339 	ld	b, (hl)
    00000614 58               [ 4] 1340 	ld	e, b
    00000615 AF               [ 4] 1341 	xor	a, a
    00000616 57               [ 4] 1342 	ld	d, a
    00000617 B9               [ 4] 1343 	cp	a, c
    00000618 98               [ 4] 1344 	sbc	a, b
    00000619 CB 7B            [ 8] 1345 	bit	7, e
    0000061B 28 07            [12] 1346 	jr	Z, 00345$
    0000061D CB 7A            [ 8] 1347 	bit	7, d
    0000061F 20 08            [12] 1348 	jr	NZ, 00346$
    00000621 BF               [ 4] 1349 	cp	a, a
    00000622 18 05            [12] 1350 	jr	00346$
    00000624                       1351 00345$:
    00000624 CB 7A            [ 8] 1352 	bit	7, d
    00000626 28 01            [12] 1353 	jr	Z, 00346$
    00000628 37               [ 4] 1354 	scf
    00000629                       1355 00346$:
    00000629 30 0D            [12] 1356 	jr	NC, 00138$
    0000062B 21r04r00         [12] 1357 	ld	hl, #_SpdX
    0000062E 2A               [ 8] 1358 	ld	a, (hl+)
    0000062F 5F               [ 4] 1359 	ld	e, a
    00000630 3A               [ 8] 1360 	ld	a, (hl-)
    00000631 57               [ 4] 1361 	ld	d, a
    00000632 1B               [ 8] 1362 	dec	de
    00000633 7B               [ 4] 1363 	ld	a, e
    00000634 22               [ 8] 1364 	ld	(hl+), a
    00000635 72               [ 8] 1365 	ld	(hl), d
    00000636 18 08            [12] 1366 	jr	00143$
    00000638                       1367 00138$:
                                   1368 ;src/metasprites.c:301: else SpdX ++;
    00000638 21r04r00         [12] 1369 	ld	hl, #_SpdX
    0000063B 34               [12] 1370 	inc	(hl)
    0000063C 20 02            [12] 1371 	jr	NZ, 00347$
    0000063E 23               [ 8] 1372 	inc	hl
    0000063F 34               [12] 1373 	inc	(hl)
    00000640                       1374 00347$:
    00000640                       1375 00143$:
                                   1376 ;src/metasprites.c:307: vsync();
    00000640 CDr00r00         [24] 1377 	call	_vsync
    00000643 C3rA8r02         [16] 1378 	jp	00145$
                                   1379 ;src/metasprites.c:309: }
    00000646 E8 06            [16] 1380 	add	sp, #6
    00000648 C9               [16] 1381 	ret
    00000649                       1382 _gray_pal:
    00000649 FF 7F                 1383 	.dw #0x7fff
    0000064B B5 56                 1384 	.dw #0x56b5
    0000064D 4A 29                 1385 	.dw #0x294a
    0000064F 00 00                 1386 	.dw #0x0000
    00000651                       1387 _pink_pal:
    00000651 FF 7F                 1388 	.dw #0x7fff
    00000653 1F 7C                 1389 	.dw #0x7c1f
    00000655 15 54                 1390 	.dw #0x5415
    00000657 0A 28                 1391 	.dw #0x280a
    00000659                       1392 _cyan_pal:
    00000659 FF 7F                 1393 	.dw #0x7fff
    0000065B EA 7F                 1394 	.dw #0x7fea
    0000065D A0 56                 1395 	.dw #0x56a0
    0000065F 40 29                 1396 	.dw #0x2940
    00000661                       1397 _green_pal:
    00000661 FF 7F                 1398 	.dw #0x7fff
    00000663 F5 57                 1399 	.dw #0x57f5
    00000665 A0 02                 1400 	.dw #0x02a0
    00000667 40 01                 1401 	.dw #0x0140
                                   1402 	.area _CODE
                                   1403 	.area _INITIALIZER
    00000000                       1404 __xinit__joyp:
    00000000 00                    1405 	.db #0x00	; 0
    00000001                       1406 __xinit__old_joyp:
    00000001 00                    1407 	.db #0x00	; 0
                                   1408 	.area _CABS (ABS)
