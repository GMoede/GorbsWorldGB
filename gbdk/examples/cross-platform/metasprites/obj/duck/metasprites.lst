                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module metasprites
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _load_and_duplicate_sprite_tile_data
                                     12 	.globl _get_tile_offset
                                     13 	.globl _set_tile
                                     14 	.globl _hide_sprites_range
                                     15 	.globl _fill_bkg_rect
                                     16 	.globl _set_sprite_data
                                     17 	.globl _set_bkg_data
                                     18 	.globl _display_off
                                     19 	.globl _vsync
                                     20 	.globl _joypad
                                     21 	.globl _old_joyp
                                     22 	.globl _joyp
                                     23 	.globl _num_tiles
                                     24 	.globl _flipped_data
                                     25 	.globl _rot
                                     26 	.globl _idx
                                     27 	.globl _PosF
                                     28 	.globl _SpdY
                                     29 	.globl _SpdX
                                     30 	.globl _PosY
                                     31 	.globl _PosX
                                     32 	.globl _green_pal
                                     33 	.globl _cyan_pal
                                     34 	.globl _pink_pal
                                     35 	.globl _gray_pal
                                     36 	.globl _reverse_bits
                                     37 	.globl _pattern
                                     38 ;--------------------------------------------------------
                                     39 ; special function registers
                                     40 ;--------------------------------------------------------
                                     41 ;--------------------------------------------------------
                                     42 ; ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area _DATA
    00000000                         45 _PosX::
    00000000                         46 	.ds 2
    00000002                         47 _PosY::
    00000002                         48 	.ds 2
    00000004                         49 _SpdX::
    00000004                         50 	.ds 2
    00000006                         51 _SpdY::
    00000006                         52 	.ds 2
    00000008                         53 _PosF::
    00000008                         54 	.ds 1
    00000009                         55 _idx::
    00000009                         56 	.ds 1
    0000000A                         57 _rot::
    0000000A                         58 	.ds 1
    0000000B                         59 _flipped_data::
    0000000B                         60 	.ds 16
    0000001B                         61 _num_tiles::
    0000001B                         62 	.ds 2
                                     63 ;--------------------------------------------------------
                                     64 ; ram data
                                     65 ;--------------------------------------------------------
                                     66 	.area _INITIALIZED
    00000000                         67 _joyp::
    00000000                         68 	.ds 1
    00000001                         69 _old_joyp::
    00000001                         70 	.ds 1
                                     71 ;--------------------------------------------------------
                                     72 ; absolute external ram data
                                     73 ;--------------------------------------------------------
                                     74 	.area _DABS (ABS)
                                     75 ;--------------------------------------------------------
                                     76 ; global & static initialisations
                                     77 ;--------------------------------------------------------
                                     78 	.area _HOME
                                     79 	.area _GSINIT
                                     80 	.area _GSFINAL
                                     81 	.area _GSINIT
                                     82 ;--------------------------------------------------------
                                     83 ; Home
                                     84 ;--------------------------------------------------------
                                     85 	.area _HOME
                                     86 	.area _HOME
                                     87 ;--------------------------------------------------------
                                     88 ; code
                                     89 ;--------------------------------------------------------
                                     90 	.area _CODE
                                     91 ;src/metasprites.c:94: void set_tile(uint8_t tile_idx, uint8_t* data, uint8_t flip_x, uint8_t flip_y)
                                     92 ;	---------------------------------
                                     93 ; Function set_tile
                                     94 ; ---------------------------------
    00000000                         95 _set_tile::
    00000000 E8 F6            [16]   96 	add	sp, #-10
    00000002 F8 07            [12]   97 	ldhl	sp,	#7
    00000004 32               [ 8]   98 	ld	(hl-), a
    00000005 2B               [ 8]   99 	dec	hl
    00000006 7B               [ 4]  100 	ld	a, e
    00000007 22               [ 8]  101 	ld	(hl+), a
                                    102 ;src/metasprites.c:97: for(i = 0; i < TILE_HEIGHT; i++)
    00000008 7A               [ 4]  103 	ld	a, d
    00000009 22               [ 8]  104 	ld	(hl+), a
    0000000A 23               [ 8]  105 	inc	hl
    0000000B AF               [ 4]  106 	xor	a, a
    0000000C 22               [ 8]  107 	ld	(hl+), a
    0000000D 77               [ 8]  108 	ld	(hl), a
    0000000E                        109 00102$:
                                    110 ;src/metasprites.c:99: size_t y = flip_y ? (TILE_HEIGHT-1-i) : i; 
    0000000E F8 0D            [12]  111 	ldhl	sp,	#13
    00000010 7E               [ 8]  112 	ld	a, (hl)
    00000011 B7               [ 4]  113 	or	a, a
    00000012 28 13            [12]  114 	jr	Z, 00106$
    00000014 11 07 00         [12]  115 	ld	de, #0x0007
    00000017 F8 08            [12]  116 	ldhl	sp,	#8
    00000019 2A               [ 8]  117 	ld	a,	(hl+)
    0000001A 66               [ 8]  118 	ld	h, (hl)
    0000001B 6F               [ 4]  119 	ld	l, a
    0000001C 7B               [ 4]  120 	ld	a, e
    0000001D 95               [ 4]  121 	sub	a, l
    0000001E 5F               [ 4]  122 	ld	e, a
    0000001F 7A               [ 4]  123 	ld	a, d
    00000020 9C               [ 4]  124 	sbc	a, h
    00000021 F8 04            [12]  125 	ldhl	sp,	#4
    00000023 32               [ 8]  126 	ld	(hl-), a
    00000024 73               [ 8]  127 	ld	(hl), e
    00000025 18 08            [12]  128 	jr	00107$
    00000027                        129 00106$:
    00000027 F8 08            [12]  130 	ldhl	sp,	#8
    00000029 7E               [ 8]  131 	ld	a, (hl)
    0000002A F8 03            [12]  132 	ldhl	sp,	#3
    0000002C 22               [ 8]  133 	ld	(hl+), a
    0000002D 36 00            [12]  134 	ld	(hl), #0x00
    0000002F                        135 00107$:
    0000002F F8 03            [12]  136 	ldhl	sp,	#3
    00000031 4E               [ 8]  137 	ld	c, (hl)
    00000032 06 00            [ 8]  138 	ld	b, #0x00
                                    139 ;src/metasprites.c:100: flipped_data[2*i] = flip_x ? reverse_bits[data[2*y]] : data[2*y];
    00000034 F8 08            [12]  140 	ldhl	sp,	#8
    00000036 7E               [ 8]  141 	ld	a, (hl)
    00000037 87               [ 4]  142 	add	a, a
    00000038 F8 00            [12]  143 	ldhl	sp,	#0
    0000003A 77               [ 8]  144 	ld	(hl), a
    0000003B 5E               [ 8]  145 	ld	e, (hl)
    0000003C 16 00            [ 8]  146 	ld	d, #0x00
    0000003E 21r0Br00         [12]  147 	ld	hl, #_flipped_data
    00000041 19               [ 8]  148 	add	hl, de
    00000042 E5               [16]  149 	push	hl
    00000043 7D               [ 4]  150 	ld	a, l
    00000044 F8 03            [12]  151 	ldhl	sp,	#3
    00000046 77               [ 8]  152 	ld	(hl), a
    00000047 E1               [12]  153 	pop	hl
    00000048 7C               [ 4]  154 	ld	a, h
    00000049 F8 02            [12]  155 	ldhl	sp,	#2
    0000004B 22               [ 8]  156 	ld	(hl+), a
    0000004C CB 21            [ 8]  157 	sla	c
    0000004E CB 10            [ 8]  158 	rl	b
    00000050 79               [ 4]  159 	ld	a, c
    00000051 22               [ 8]  160 	ld	(hl+), a
    00000052 78               [ 4]  161 	ld	a, b
    00000053 32               [ 8]  162 	ld	(hl-), a
    00000054 2A               [ 8]  163 	ld	a, (hl+)
    00000055 5F               [ 4]  164 	ld	e, a
    00000056 2A               [ 8]  165 	ld	a, (hl+)
    00000057 57               [ 4]  166 	ld	d, a
    00000058 2A               [ 8]  167 	ld	a,	(hl+)
    00000059 66               [ 8]  168 	ld	h, (hl)
    0000005A 6F               [ 4]  169 	ld	l, a
    0000005B 19               [ 8]  170 	add	hl, de
    0000005C 4D               [ 4]  171 	ld	c, l
    0000005D 44               [ 4]  172 	ld	b, h
    0000005E 0A               [ 8]  173 	ld	a, (bc)
    0000005F 4F               [ 4]  174 	ld	c, a
    00000060 F8 0C            [12]  175 	ldhl	sp,	#12
    00000062 7E               [ 8]  176 	ld	a, (hl)
    00000063 B7               [ 4]  177 	or	a, a
    00000064 28 07            [12]  178 	jr	Z, 00108$
    00000066 21rD4r00         [12]  179 	ld	hl, #_reverse_bits
    00000069 06 00            [ 8]  180 	ld	b, #0x00
    0000006B 09               [ 8]  181 	add	hl, bc
    0000006C 4E               [ 8]  182 	ld	c, (hl)
    0000006D                        183 00108$:
    0000006D F8 01            [12]  184 	ldhl	sp,	#1
    0000006F 2A               [ 8]  185 	ld	a, (hl+)
    00000070 66               [ 8]  186 	ld	h, (hl)
    00000071 6F               [ 4]  187 	ld	l, a
    00000072 71               [ 8]  188 	ld	(hl), c
                                    189 ;src/metasprites.c:101: flipped_data[2*i+1] = flip_x ? reverse_bits[data[2*y+1]] : data[2*y+1];
    00000073 F8 00            [12]  190 	ldhl	sp,	#0
    00000075 7E               [ 8]  191 	ld	a, (hl)
    00000076 3C               [ 4]  192 	inc	a
    00000077 C6r0B            [ 8]  193 	add	a, #<(_flipped_data)
    00000079 4F               [ 4]  194 	ld	c, a
    0000007A 3E 00            [ 8]  195 	ld	a, #0x00
    0000007C CEs00            [ 8]  196 	adc	a, #>(_flipped_data)
    0000007E 47               [ 4]  197 	ld	b, a
    0000007F F8 03            [12]  198 	ldhl	sp,	#3
    00000081 2A               [ 8]  199 	ld	a, (hl+)
    00000082 23               [ 8]  200 	inc	hl
    00000083 5F               [ 4]  201 	ld	e, a
    00000084 16 00            [ 8]  202 	ld	d, #0x00
    00000086 13               [ 8]  203 	inc	de
    00000087 2A               [ 8]  204 	ld	a,	(hl+)
    00000088 66               [ 8]  205 	ld	h, (hl)
    00000089 6F               [ 4]  206 	ld	l, a
    0000008A 19               [ 8]  207 	add	hl, de
    0000008B 5D               [ 4]  208 	ld	e, l
    0000008C 54               [ 4]  209 	ld	d, h
    0000008D 1A               [ 8]  210 	ld	a, (de)
    0000008E 5F               [ 4]  211 	ld	e, a
    0000008F F8 0C            [12]  212 	ldhl	sp,	#12
    00000091 7E               [ 8]  213 	ld	a, (hl)
    00000092 B7               [ 4]  214 	or	a, a
    00000093 28 0A            [12]  215 	jr	Z, 00110$
    00000095 6B               [ 4]  216 	ld	l, e
    00000096 26 00            [ 8]  217 	ld	h, #0x00
    00000098 11rD4r00         [12]  218 	ld	de, #_reverse_bits
    0000009B 19               [ 8]  219 	add	hl, de
    0000009C 7E               [ 8]  220 	ld	a, (hl)
    0000009D 18 01            [12]  221 	jr	00111$
    0000009F                        222 00110$:
    0000009F 7B               [ 4]  223 	ld	a, e
    000000A0                        224 00111$:
    000000A0 02               [ 8]  225 	ld	(bc), a
                                    226 ;src/metasprites.c:97: for(i = 0; i < TILE_HEIGHT; i++)
    000000A1 F8 08            [12]  227 	ldhl	sp,	#8
    000000A3 34               [12]  228 	inc	(hl)
    000000A4 F8 08            [12]  229 	ldhl	sp,	#8
    000000A6 2A               [ 8]  230 	ld	a, (hl+)
    000000A7 D6 08            [ 8]  231 	sub	a, #0x08
    000000A9 7E               [ 8]  232 	ld	a, (hl)
    000000AA DE 00            [ 8]  233 	sbc	a, #0x00
    000000AC DAr0Er00         [16]  234 	jp	C, 00102$
                                    235 ;src/metasprites.c:103: set_sprite_data(tile_idx, 1, flipped_data);
    000000AF 2B               [ 8]  236 	dec	hl
    000000B0 2B               [ 8]  237 	dec	hl
    000000B1 11r0Br00         [12]  238 	ld	de, #_flipped_data
    000000B4 D5               [16]  239 	push	de
    000000B5 3E 01            [ 8]  240 	ld	a, #0x01
    000000B7 F5               [16]  241 	push	af
    000000B8 33               [ 8]  242 	inc	sp
    000000B9 7E               [ 8]  243 	ld	a, (hl)
    000000BA F5               [16]  244 	push	af
    000000BB 33               [ 8]  245 	inc	sp
    000000BC CDr00r00         [24]  246 	call	_set_sprite_data
                                    247 ;src/metasprites.c:104: }
    000000BF E8 0E            [16]  248 	add	sp, #14
    000000C1 E1               [12]  249 	pop	hl
    000000C2 F1               [12]  250 	pop	af
    000000C3 E9               [ 4]  251 	jp	(hl)
    000000C4                        252 _pattern:
    000000C4 80                     253 	.db #0x80	; 128
    000000C5 80                     254 	.db #0x80	; 128
    000000C6 40                     255 	.db #0x40	; 64
    000000C7 40                     256 	.db #0x40	; 64
    000000C8 20                     257 	.db #0x20	; 32
    000000C9 20                     258 	.db #0x20	; 32
    000000CA 10                     259 	.db #0x10	; 16
    000000CB 10                     260 	.db #0x10	; 16
    000000CC 08                     261 	.db #0x08	; 8
    000000CD 08                     262 	.db #0x08	; 8
    000000CE 04                     263 	.db #0x04	; 4
    000000CF 04                     264 	.db #0x04	; 4
    000000D0 02                     265 	.db #0x02	; 2
    000000D1 02                     266 	.db #0x02	; 2
    000000D2 01                     267 	.db #0x01	; 1
    000000D3 01                     268 	.db #0x01	; 1
    000000D4                        269 _reverse_bits:
    000000D4 00                     270 	.db #0x00	; 0
    000000D5 80                     271 	.db #0x80	; 128
    000000D6 40                     272 	.db #0x40	; 64
    000000D7 C0                     273 	.db #0xc0	; 192
    000000D8 20                     274 	.db #0x20	; 32
    000000D9 A0                     275 	.db #0xa0	; 160
    000000DA 60                     276 	.db #0x60	; 96
    000000DB E0                     277 	.db #0xe0	; 224
    000000DC 10                     278 	.db #0x10	; 16
    000000DD 90                     279 	.db #0x90	; 144
    000000DE 50                     280 	.db #0x50	; 80	'P'
    000000DF D0                     281 	.db #0xd0	; 208
    000000E0 30                     282 	.db #0x30	; 48	'0'
    000000E1 B0                     283 	.db #0xb0	; 176
    000000E2 70                     284 	.db #0x70	; 112	'p'
    000000E3 F0                     285 	.db #0xf0	; 240
    000000E4 08                     286 	.db #0x08	; 8
    000000E5 88                     287 	.db #0x88	; 136
    000000E6 48                     288 	.db #0x48	; 72	'H'
    000000E7 C8                     289 	.db #0xc8	; 200
    000000E8 28                     290 	.db #0x28	; 40
    000000E9 A8                     291 	.db #0xa8	; 168
    000000EA 68                     292 	.db #0x68	; 104	'h'
    000000EB E8                     293 	.db #0xe8	; 232
    000000EC 18                     294 	.db #0x18	; 24
    000000ED 98                     295 	.db #0x98	; 152
    000000EE 58                     296 	.db #0x58	; 88	'X'
    000000EF D8                     297 	.db #0xd8	; 216
    000000F0 38                     298 	.db #0x38	; 56	'8'
    000000F1 B8                     299 	.db #0xb8	; 184
    000000F2 78                     300 	.db #0x78	; 120	'x'
    000000F3 F8                     301 	.db #0xf8	; 248
    000000F4 04                     302 	.db #0x04	; 4
    000000F5 84                     303 	.db #0x84	; 132
    000000F6 44                     304 	.db #0x44	; 68	'D'
    000000F7 C4                     305 	.db #0xc4	; 196
    000000F8 24                     306 	.db #0x24	; 36
    000000F9 A4                     307 	.db #0xa4	; 164
    000000FA 64                     308 	.db #0x64	; 100	'd'
    000000FB E4                     309 	.db #0xe4	; 228
    000000FC 14                     310 	.db #0x14	; 20
    000000FD 94                     311 	.db #0x94	; 148
    000000FE 54                     312 	.db #0x54	; 84	'T'
    000000FF D4                     313 	.db #0xd4	; 212
    00000100 34                     314 	.db #0x34	; 52	'4'
    00000101 B4                     315 	.db #0xb4	; 180
    00000102 74                     316 	.db #0x74	; 116	't'
    00000103 F4                     317 	.db #0xf4	; 244
    00000104 0C                     318 	.db #0x0c	; 12
    00000105 8C                     319 	.db #0x8c	; 140
    00000106 4C                     320 	.db #0x4c	; 76	'L'
    00000107 CC                     321 	.db #0xcc	; 204
    00000108 2C                     322 	.db #0x2c	; 44
    00000109 AC                     323 	.db #0xac	; 172
    0000010A 6C                     324 	.db #0x6c	; 108	'l'
    0000010B EC                     325 	.db #0xec	; 236
    0000010C 1C                     326 	.db #0x1c	; 28
    0000010D 9C                     327 	.db #0x9c	; 156
    0000010E 5C                     328 	.db #0x5c	; 92
    0000010F DC                     329 	.db #0xdc	; 220
    00000110 3C                     330 	.db #0x3c	; 60
    00000111 BC                     331 	.db #0xbc	; 188
    00000112 7C                     332 	.db #0x7c	; 124
    00000113 FC                     333 	.db #0xfc	; 252
    00000114 02                     334 	.db #0x02	; 2
    00000115 82                     335 	.db #0x82	; 130
    00000116 42                     336 	.db #0x42	; 66	'B'
    00000117 C2                     337 	.db #0xc2	; 194
    00000118 22                     338 	.db #0x22	; 34
    00000119 A2                     339 	.db #0xa2	; 162
    0000011A 62                     340 	.db #0x62	; 98	'b'
    0000011B E2                     341 	.db #0xe2	; 226
    0000011C 12                     342 	.db #0x12	; 18
    0000011D 92                     343 	.db #0x92	; 146
    0000011E 52                     344 	.db #0x52	; 82	'R'
    0000011F D2                     345 	.db #0xd2	; 210
    00000120 32                     346 	.db #0x32	; 50	'2'
    00000121 B2                     347 	.db #0xb2	; 178
    00000122 72                     348 	.db #0x72	; 114	'r'
    00000123 F2                     349 	.db #0xf2	; 242
    00000124 0A                     350 	.db #0x0a	; 10
    00000125 8A                     351 	.db #0x8a	; 138
    00000126 4A                     352 	.db #0x4a	; 74	'J'
    00000127 CA                     353 	.db #0xca	; 202
    00000128 2A                     354 	.db #0x2a	; 42
    00000129 AA                     355 	.db #0xaa	; 170
    0000012A 6A                     356 	.db #0x6a	; 106	'j'
    0000012B EA                     357 	.db #0xea	; 234
    0000012C 1A                     358 	.db #0x1a	; 26
    0000012D 9A                     359 	.db #0x9a	; 154
    0000012E 5A                     360 	.db #0x5a	; 90	'Z'
    0000012F DA                     361 	.db #0xda	; 218
    00000130 3A                     362 	.db #0x3a	; 58
    00000131 BA                     363 	.db #0xba	; 186
    00000132 7A                     364 	.db #0x7a	; 122	'z'
    00000133 FA                     365 	.db #0xfa	; 250
    00000134 06                     366 	.db #0x06	; 6
    00000135 86                     367 	.db #0x86	; 134
    00000136 46                     368 	.db #0x46	; 70	'F'
    00000137 C6                     369 	.db #0xc6	; 198
    00000138 26                     370 	.db #0x26	; 38
    00000139 A6                     371 	.db #0xa6	; 166
    0000013A 66                     372 	.db #0x66	; 102	'f'
    0000013B E6                     373 	.db #0xe6	; 230
    0000013C 16                     374 	.db #0x16	; 22
    0000013D 96                     375 	.db #0x96	; 150
    0000013E 56                     376 	.db #0x56	; 86	'V'
    0000013F D6                     377 	.db #0xd6	; 214
    00000140 36                     378 	.db #0x36	; 54	'6'
    00000141 B6                     379 	.db #0xb6	; 182
    00000142 76                     380 	.db #0x76	; 118	'v'
    00000143 F6                     381 	.db #0xf6	; 246
    00000144 0E                     382 	.db #0x0e	; 14
    00000145 8E                     383 	.db #0x8e	; 142
    00000146 4E                     384 	.db #0x4e	; 78	'N'
    00000147 CE                     385 	.db #0xce	; 206
    00000148 2E                     386 	.db #0x2e	; 46
    00000149 AE                     387 	.db #0xae	; 174
    0000014A 6E                     388 	.db #0x6e	; 110	'n'
    0000014B EE                     389 	.db #0xee	; 238
    0000014C 1E                     390 	.db #0x1e	; 30
    0000014D 9E                     391 	.db #0x9e	; 158
    0000014E 5E                     392 	.db #0x5e	; 94
    0000014F DE                     393 	.db #0xde	; 222
    00000150 3E                     394 	.db #0x3e	; 62
    00000151 BE                     395 	.db #0xbe	; 190
    00000152 7E                     396 	.db #0x7e	; 126
    00000153 FE                     397 	.db #0xfe	; 254
    00000154 01                     398 	.db #0x01	; 1
    00000155 81                     399 	.db #0x81	; 129
    00000156 41                     400 	.db #0x41	; 65	'A'
    00000157 C1                     401 	.db #0xc1	; 193
    00000158 21                     402 	.db #0x21	; 33
    00000159 A1                     403 	.db #0xa1	; 161
    0000015A 61                     404 	.db #0x61	; 97	'a'
    0000015B E1                     405 	.db #0xe1	; 225
    0000015C 11                     406 	.db #0x11	; 17
    0000015D 91                     407 	.db #0x91	; 145
    0000015E 51                     408 	.db #0x51	; 81	'Q'
    0000015F D1                     409 	.db #0xd1	; 209
    00000160 31                     410 	.db #0x31	; 49	'1'
    00000161 B1                     411 	.db #0xb1	; 177
    00000162 71                     412 	.db #0x71	; 113	'q'
    00000163 F1                     413 	.db #0xf1	; 241
    00000164 09                     414 	.db #0x09	; 9
    00000165 89                     415 	.db #0x89	; 137
    00000166 49                     416 	.db #0x49	; 73	'I'
    00000167 C9                     417 	.db #0xc9	; 201
    00000168 29                     418 	.db #0x29	; 41
    00000169 A9                     419 	.db #0xa9	; 169
    0000016A 69                     420 	.db #0x69	; 105	'i'
    0000016B E9                     421 	.db #0xe9	; 233
    0000016C 19                     422 	.db #0x19	; 25
    0000016D 99                     423 	.db #0x99	; 153
    0000016E 59                     424 	.db #0x59	; 89	'Y'
    0000016F D9                     425 	.db #0xd9	; 217
    00000170 39                     426 	.db #0x39	; 57	'9'
    00000171 B9                     427 	.db #0xb9	; 185
    00000172 79                     428 	.db #0x79	; 121	'y'
    00000173 F9                     429 	.db #0xf9	; 249
    00000174 05                     430 	.db #0x05	; 5
    00000175 85                     431 	.db #0x85	; 133
    00000176 45                     432 	.db #0x45	; 69	'E'
    00000177 C5                     433 	.db #0xc5	; 197
    00000178 25                     434 	.db #0x25	; 37
    00000179 A5                     435 	.db #0xa5	; 165
    0000017A 65                     436 	.db #0x65	; 101	'e'
    0000017B E5                     437 	.db #0xe5	; 229
    0000017C 15                     438 	.db #0x15	; 21
    0000017D 95                     439 	.db #0x95	; 149
    0000017E 55                     440 	.db #0x55	; 85	'U'
    0000017F D5                     441 	.db #0xd5	; 213
    00000180 35                     442 	.db #0x35	; 53	'5'
    00000181 B5                     443 	.db #0xb5	; 181
    00000182 75                     444 	.db #0x75	; 117	'u'
    00000183 F5                     445 	.db #0xf5	; 245
    00000184 0D                     446 	.db #0x0d	; 13
    00000185 8D                     447 	.db #0x8d	; 141
    00000186 4D                     448 	.db #0x4d	; 77	'M'
    00000187 CD                     449 	.db #0xcd	; 205
    00000188 2D                     450 	.db #0x2d	; 45
    00000189 AD                     451 	.db #0xad	; 173
    0000018A 6D                     452 	.db #0x6d	; 109	'm'
    0000018B ED                     453 	.db #0xed	; 237
    0000018C 1D                     454 	.db #0x1d	; 29
    0000018D 9D                     455 	.db #0x9d	; 157
    0000018E 5D                     456 	.db #0x5d	; 93
    0000018F DD                     457 	.db #0xdd	; 221
    00000190 3D                     458 	.db #0x3d	; 61
    00000191 BD                     459 	.db #0xbd	; 189
    00000192 7D                     460 	.db #0x7d	; 125
    00000193 FD                     461 	.db #0xfd	; 253
    00000194 03                     462 	.db #0x03	; 3
    00000195 83                     463 	.db #0x83	; 131
    00000196 43                     464 	.db #0x43	; 67	'C'
    00000197 C3                     465 	.db #0xc3	; 195
    00000198 23                     466 	.db #0x23	; 35
    00000199 A3                     467 	.db #0xa3	; 163
    0000019A 63                     468 	.db #0x63	; 99	'c'
    0000019B E3                     469 	.db #0xe3	; 227
    0000019C 13                     470 	.db #0x13	; 19
    0000019D 93                     471 	.db #0x93	; 147
    0000019E 53                     472 	.db #0x53	; 83	'S'
    0000019F D3                     473 	.db #0xd3	; 211
    000001A0 33                     474 	.db #0x33	; 51	'3'
    000001A1 B3                     475 	.db #0xb3	; 179
    000001A2 73                     476 	.db #0x73	; 115	's'
    000001A3 F3                     477 	.db #0xf3	; 243
    000001A4 0B                     478 	.db #0x0b	; 11
    000001A5 8B                     479 	.db #0x8b	; 139
    000001A6 4B                     480 	.db #0x4b	; 75	'K'
    000001A7 CB                     481 	.db #0xcb	; 203
    000001A8 2B                     482 	.db #0x2b	; 43
    000001A9 AB                     483 	.db #0xab	; 171
    000001AA 6B                     484 	.db #0x6b	; 107	'k'
    000001AB EB                     485 	.db #0xeb	; 235
    000001AC 1B                     486 	.db #0x1b	; 27
    000001AD 9B                     487 	.db #0x9b	; 155
    000001AE 5B                     488 	.db #0x5b	; 91
    000001AF DB                     489 	.db #0xdb	; 219
    000001B0 3B                     490 	.db #0x3b	; 59
    000001B1 BB                     491 	.db #0xbb	; 187
    000001B2 7B                     492 	.db #0x7b	; 123
    000001B3 FB                     493 	.db #0xfb	; 251
    000001B4 07                     494 	.db #0x07	; 7
    000001B5 87                     495 	.db #0x87	; 135
    000001B6 47                     496 	.db #0x47	; 71	'G'
    000001B7 C7                     497 	.db #0xc7	; 199
    000001B8 27                     498 	.db #0x27	; 39
    000001B9 A7                     499 	.db #0xa7	; 167
    000001BA 67                     500 	.db #0x67	; 103	'g'
    000001BB E7                     501 	.db #0xe7	; 231
    000001BC 17                     502 	.db #0x17	; 23
    000001BD 97                     503 	.db #0x97	; 151
    000001BE 57                     504 	.db #0x57	; 87	'W'
    000001BF D7                     505 	.db #0xd7	; 215
    000001C0 37                     506 	.db #0x37	; 55	'7'
    000001C1 B7                     507 	.db #0xb7	; 183
    000001C2 77                     508 	.db #0x77	; 119	'w'
    000001C3 F7                     509 	.db #0xf7	; 247
    000001C4 0F                     510 	.db #0x0f	; 15
    000001C5 8F                     511 	.db #0x8f	; 143
    000001C6 4F                     512 	.db #0x4f	; 79	'O'
    000001C7 CF                     513 	.db #0xcf	; 207
    000001C8 2F                     514 	.db #0x2f	; 47
    000001C9 AF                     515 	.db #0xaf	; 175
    000001CA 6F                     516 	.db #0x6f	; 111	'o'
    000001CB EF                     517 	.db #0xef	; 239
    000001CC 1F                     518 	.db #0x1f	; 31
    000001CD 9F                     519 	.db #0x9f	; 159
    000001CE 5F                     520 	.db #0x5f	; 95
    000001CF DF                     521 	.db #0xdf	; 223
    000001D0 3F                     522 	.db #0x3f	; 63
    000001D1 BF                     523 	.db #0xbf	; 191
    000001D2 7F                     524 	.db #0x7f	; 127
    000001D3 FF                     525 	.db #0xff	; 255
                                    526 ;src/metasprites.c:106: uint8_t get_tile_offset(uint8_t flipx, uint8_t flipy)
                                    527 ;	---------------------------------
                                    528 ; Function get_tile_offset
                                    529 ; ---------------------------------
    000001D4                        530 _get_tile_offset::
                                    531 ;src/metasprites.c:117: return offset;
    000001D4 AF               [ 4]  532 	xor	a, a
                                    533 ;src/metasprites.c:118: }
    000001D5 C9               [16]  534 	ret
                                    535 ;src/metasprites.c:123: void load_and_duplicate_sprite_tile_data(void)
                                    536 ;	---------------------------------
                                    537 ; Function load_and_duplicate_sprite_tile_data
                                    538 ; ---------------------------------
    000001D6                        539 _load_and_duplicate_sprite_tile_data::
                                    540 ;src/metasprites.c:126: num_tiles = sizeof(sprite_tiles) >> 4;
    000001D6 21r1Br00         [12]  541 	ld	hl, #_num_tiles
    000001D9 3E 30            [ 8]  542 	ld	a, #0x30
    000001DB 22               [ 8]  543 	ld	(hl+), a
    000001DC AF               [ 4]  544 	xor	a, a
    000001DD 77               [ 8]  545 	ld	(hl), a
                                    546 ;src/metasprites.c:127: for(i = 0; i < num_tiles; i++)
    000001DE 01 00 00         [12]  547 	ld	bc, #0x0000
    000001E1                        548 00103$:
    000001E1 21r1Br00         [12]  549 	ld	hl, #_num_tiles
    000001E4 79               [ 4]  550 	ld	a, c
    000001E5 96               [ 8]  551 	sub	a, (hl)
    000001E6 23               [ 8]  552 	inc	hl
    000001E7 78               [ 4]  553 	ld	a, b
    000001E8 9E               [ 8]  554 	sbc	a, (hl)
    000001E9 D0               [20]  555 	ret	NC
                                    556 ;src/metasprites.c:129: set_tile(i + get_tile_offset(0, 0), sprite_tiles + (i << 4), 0, 0);
    000001EA 69               [ 4]  557 	ld	l, c
    000001EB 60               [ 4]  558 	ld	h, b
    000001EC 29               [ 8]  559 	add	hl, hl
    000001ED 29               [ 8]  560 	add	hl, hl
    000001EE 29               [ 8]  561 	add	hl, hl
    000001EF 29               [ 8]  562 	add	hl, hl
    000001F0 11r00r00         [12]  563 	ld	de, #_sprite_tiles
    000001F3 19               [ 8]  564 	add	hl, de
    000001F4 5D               [ 4]  565 	ld	e, l
    000001F5 54               [ 4]  566 	ld	d, h
    000001F6 69               [ 4]  567 	ld	l, c
    000001F7 E5               [16]  568 	push	hl
    000001F8 C5               [16]  569 	push	bc
    000001F9 D5               [16]  570 	push	de
    000001FA AF               [ 4]  571 	xor	a, a
    000001FB 5F               [ 4]  572 	ld	e, a
    000001FC CDrD4r01         [24]  573 	call	_get_tile_offset
    000001FF D1               [12]  574 	pop	de
    00000200 C1               [12]  575 	pop	bc
    00000201 E1               [12]  576 	pop	hl
    00000202 85               [ 4]  577 	add	a, l
    00000203 C5               [16]  578 	push	bc
    00000204 26 00            [ 8]  579 	ld	h, #0x00
    00000206 E5               [16]  580 	push	hl
    00000207 33               [ 8]  581 	inc	sp
    00000208 26 00            [ 8]  582 	ld	h, #0x00
    0000020A E5               [16]  583 	push	hl
    0000020B 33               [ 8]  584 	inc	sp
    0000020C CDr00r00         [24]  585 	call	_set_tile
    0000020F C1               [12]  586 	pop	bc
                                    587 ;src/metasprites.c:127: for(i = 0; i < num_tiles; i++)
    00000210 03               [ 8]  588 	inc	bc
                                    589 ;src/metasprites.c:140: }
    00000211 18 CE            [12]  590 	jr	00103$
                                    591 ;src/metasprites.c:160: void main(void) {
                                    592 ;	---------------------------------
                                    593 ; Function main
                                    594 ; ---------------------------------
    00000213                        595 _main::
    00000213 E8 FA            [16]  596 	add	sp, #-6
                                    597 ;src/metasprites.c:161: DISPLAY_OFF;
    00000215 CDr00r00         [24]  598 	call	_display_off
                                    599 ;src/metasprites.c:177: fill_bkg_rect(0, 0, DEVICE_SCREEN_WIDTH, DEVICE_SCREEN_HEIGHT, 0);
    00000218 AF               [ 4]  600 	xor	a, a
    00000219 67               [ 4]  601 	ld	h, a
    0000021A 2E 12            [ 8]  602 	ld	l, #0x12
    0000021C E5               [16]  603 	push	hl
    0000021D 3E 14            [ 8]  604 	ld	a, #0x14
    0000021F F5               [16]  605 	push	af
    00000220 33               [ 8]  606 	inc	sp
    00000221 AF               [ 4]  607 	xor	a, a
    00000222 0F               [ 4]  608 	rrca
    00000223 F5               [16]  609 	push	af
    00000224 CDr00r00         [24]  610 	call	_fill_bkg_rect
    00000227 E8 05            [16]  611 	add	sp, #5
                                    612 ;src/metasprites.c:180: set_bkg_data(0, 1, pattern);
    00000229 11rC4r00         [12]  613 	ld	de, #_pattern
    0000022C D5               [16]  614 	push	de
    0000022D AF               [ 4]  615 	xor	a, a
    0000022E 3C               [ 4]  616 	inc	a
    0000022F F5               [16]  617 	push	af
    00000230 CDr00r00         [24]  618 	call	_set_bkg_data
    00000233 E8 04            [16]  619 	add	sp, #4
                                    620 ;src/metasprites.c:183: load_and_duplicate_sprite_tile_data();
    00000235 CDrD6r01         [24]  621 	call	_load_and_duplicate_sprite_tile_data
                                    622 ;src/metasprites.c:186: SHOW_BKG; SHOW_SPRITES;
    00000238 F0r00            [12]  623 	ldh	a, (_LCDC_REG + 0)
    0000023A F6 40            [ 8]  624 	or	a, #0x40
    0000023C E0r00            [12]  625 	ldh	(_LCDC_REG + 0), a
    0000023E F0r00            [12]  626 	ldh	a, (_LCDC_REG + 0)
    00000240 F6 01            [ 8]  627 	or	a, #0x01
    00000242 E0r00            [12]  628 	ldh	(_LCDC_REG + 0), a
                                    629 ;src/metasprites.c:192: SPRITES_8x8;
    00000244 F0r00            [12]  630 	ldh	a, (_LCDC_REG + 0)
    00000246 E6 FD            [ 8]  631 	and	a, #0xfd
    00000248 E0r00            [12]  632 	ldh	(_LCDC_REG + 0), a
                                    633 ;src/metasprites.c:194: DISPLAY_ON;
    0000024A F0r00            [12]  634 	ldh	a, (_LCDC_REG + 0)
    0000024C F6 80            [ 8]  635 	or	a, #0x80
    0000024E E0r00            [12]  636 	ldh	(_LCDC_REG + 0), a
                                    637 ;src/metasprites.c:197: PosX = (DEVICE_SCREEN_PX_WIDTH / 2) << 4;
    00000250 21r00r00         [12]  638 	ld	hl, #_PosX
    00000253 AF               [ 4]  639 	xor	a, a
    00000254 22               [ 8]  640 	ld	(hl+), a
    00000255 36 05            [12]  641 	ld	(hl), #0x05
                                    642 ;src/metasprites.c:198: PosY = (DEVICE_SCREEN_PX_HEIGHT / 2) << 4;
    00000257 21r02r00         [12]  643 	ld	hl, #_PosY
    0000025A 3E 80            [ 8]  644 	ld	a, #0x80
    0000025C 22               [ 8]  645 	ld	(hl+), a
    0000025D 36 04            [12]  646 	ld	(hl), #0x04
                                    647 ;src/metasprites.c:199: SpdX = SpdY = 0;
    0000025F AF               [ 4]  648 	xor	a, a
    00000260 21r06r00         [12]  649 	ld	hl, #_SpdY
    00000263 22               [ 8]  650 	ld	(hl+), a
    00000264 77               [ 8]  651 	ld	(hl), a
    00000265 AF               [ 4]  652 	xor	a, a
    00000266 21r04r00         [12]  653 	ld	hl, #_SpdX
    00000269 22               [ 8]  654 	ld	(hl+), a
    0000026A 77               [ 8]  655 	ld	(hl), a
                                    656 ;src/metasprites.c:201: idx = 0; rot = 0;
    0000026B AF               [ 4]  657 	xor	a, a
    0000026C EAr09r00         [16]  658 	ld	(#_idx), a
    0000026F EAr0Ar00         [16]  659 	ld	(#_rot),a
                                    660 ;src/metasprites.c:203: while(TRUE) {        
    00000272                        661 00145$:
                                    662 ;src/metasprites.c:205: KEY_INPUT;
    00000272 FAr00r00         [16]  663 	ld	a, (#_joyp)
    00000275 EAr01r00         [16]  664 	ld	(#_old_joyp),a
    00000278 CDr00r00         [24]  665 	call	_joypad
    0000027B EAr00r00         [16]  666 	ld	(#_joyp),a
                                    667 ;src/metasprites.c:207: PosF = 0;
    0000027E AF               [ 4]  668 	xor	a, a
    0000027F EAr08r00         [16]  669 	ld	(#_PosF),a
                                    670 ;src/metasprites.c:209: if (KEY_DOWN(J_UP)) {
    00000282 FAr00r00         [16]  671 	ld	a, (#_joyp)
    00000285 F8 04            [12]  672 	ldhl	sp,	#4
    00000287 77               [ 8]  673 	ld	(hl), a
                                    674 ;src/metasprites.c:210: SpdY -= 2;
    00000288 FAr06r00         [16]  675 	ld	a, (_SpdY)
    0000028B 4F               [ 4]  676 	ld	c, a
    0000028C 21r07r00         [12]  677 	ld	hl, #_SpdY + 1
    0000028F 46               [ 8]  678 	ld	b, (hl)
                                    679 ;src/metasprites.c:212: PosF |= ACC_Y;
    00000290 FAr08r00         [16]  680 	ld	a, (#_PosF)
    00000293 F6 02            [ 8]  681 	or	a, #0x02
    00000295 F8 05            [12]  682 	ldhl	sp,	#5
    00000297 77               [ 8]  683 	ld	(hl), a
                                    684 ;src/metasprites.c:209: if (KEY_DOWN(J_UP)) {
    00000298 E5               [16]  685 	push	hl
    00000299 2B               [ 8]  686 	dec	hl
    0000029A CB 56            [12]  687 	bit	2, (hl)
    0000029C E1               [12]  688 	pop	hl
    0000029D 28 34            [12]  689 	jr	Z, 00108$
                                    690 ;src/metasprites.c:210: SpdY -= 2;
    0000029F 0B               [ 8]  691 	dec	bc
    000002A0 0B               [ 8]  692 	dec	bc
    000002A1 21r06r00         [12]  693 	ld	hl, #_SpdY
    000002A4 79               [ 4]  694 	ld	a, c
    000002A5 22               [ 8]  695 	ld	(hl+), a
                                    696 ;src/metasprites.c:211: if (SpdY < -32) SpdY = -32;
    000002A6 78               [ 4]  697 	ld	a, b
    000002A7 32               [ 8]  698 	ld	(hl-), a
    000002A8 2A               [ 8]  699 	ld	a, (hl+)
    000002A9 D6 E0            [ 8]  700 	sub	a, #0xe0
    000002AB 7E               [ 8]  701 	ld	a, (hl)
    000002AC DE FF            [ 8]  702 	sbc	a, #0xff
    000002AE 56               [ 8]  703 	ld	d, (hl)
    000002AF 3E FF            [ 8]  704 	ld	a, #0xff
    000002B1 CB 7F            [ 8]  705 	bit	7,a
    000002B3 28 07            [12]  706 	jr	Z, 00319$
    000002B5 CB 7A            [ 8]  707 	bit	7, d
    000002B7 20 08            [12]  708 	jr	NZ, 00320$
    000002B9 BF               [ 4]  709 	cp	a, a
    000002BA 18 05            [12]  710 	jr	00320$
    000002BC                        711 00319$:
    000002BC CB 7A            [ 8]  712 	bit	7, d
    000002BE 28 01            [12]  713 	jr	Z, 00320$
    000002C0 37               [ 4]  714 	scf
    000002C1                        715 00320$:
    000002C1 30 08            [12]  716 	jr	NC, 00102$
    000002C3 21r06r00         [12]  717 	ld	hl, #_SpdY
    000002C6 3E E0            [ 8]  718 	ld	a, #0xe0
    000002C8 22               [ 8]  719 	ld	(hl+), a
    000002C9 36 FF            [12]  720 	ld	(hl), #0xff
    000002CB                        721 00102$:
                                    722 ;src/metasprites.c:212: PosF |= ACC_Y;
    000002CB F8 05            [12]  723 	ldhl	sp,	#5
    000002CD 7E               [ 8]  724 	ld	a, (hl)
    000002CE EAr08r00         [16]  725 	ld	(#_PosF),a
    000002D1 18 3D            [12]  726 	jr	00109$
    000002D3                        727 00108$:
                                    728 ;src/metasprites.c:213: } else if (KEY_DOWN(J_DOWN)) {
    000002D3 E5               [16]  729 	push	hl
    000002D4 F8 06            [12]  730 	ldhl	sp,	#6
    000002D6 CB 5E            [12]  731 	bit	3, (hl)
    000002D8 E1               [12]  732 	pop	hl
    000002D9 28 35            [12]  733 	jr	Z, 00109$
                                    734 ;src/metasprites.c:214: SpdY += 2;
    000002DB 03               [ 8]  735 	inc	bc
    000002DC 03               [ 8]  736 	inc	bc
    000002DD 21r06r00         [12]  737 	ld	hl, #_SpdY
    000002E0 79               [ 4]  738 	ld	a, c
    000002E1 22               [ 8]  739 	ld	(hl+), a
                                    740 ;src/metasprites.c:215: if (SpdY > 32) SpdY = 32;
    000002E2 78               [ 4]  741 	ld	a, b
    000002E3 32               [ 8]  742 	ld	(hl-), a
    000002E4 2A               [ 8]  743 	ld	a, (hl+)
    000002E5 4F               [ 4]  744 	ld	c, a
    000002E6 46               [ 8]  745 	ld	b, (hl)
    000002E7 58               [ 4]  746 	ld	e, b
    000002E8 16 00            [ 8]  747 	ld	d, #0x00
    000002EA 3E 20            [ 8]  748 	ld	a, #0x20
    000002EC B9               [ 4]  749 	cp	a, c
    000002ED 3E 00            [ 8]  750 	ld	a, #0x00
    000002EF 98               [ 4]  751 	sbc	a, b
    000002F0 CB 7B            [ 8]  752 	bit	7, e
    000002F2 28 07            [12]  753 	jr	Z, 00322$
    000002F4 CB 7A            [ 8]  754 	bit	7, d
    000002F6 20 08            [12]  755 	jr	NZ, 00323$
    000002F8 BF               [ 4]  756 	cp	a, a
    000002F9 18 05            [12]  757 	jr	00323$
    000002FB                        758 00322$:
    000002FB CB 7A            [ 8]  759 	bit	7, d
    000002FD 28 01            [12]  760 	jr	Z, 00323$
    000002FF 37               [ 4]  761 	scf
    00000300                        762 00323$:
    00000300 30 08            [12]  763 	jr	NC, 00104$
    00000302 21r06r00         [12]  764 	ld	hl, #_SpdY
    00000305 3E 20            [ 8]  765 	ld	a, #0x20
    00000307 22               [ 8]  766 	ld	(hl+), a
    00000308 AF               [ 4]  767 	xor	a, a
    00000309 77               [ 8]  768 	ld	(hl), a
    0000030A                        769 00104$:
                                    770 ;src/metasprites.c:216: PosF |= ACC_Y;
    0000030A F8 05            [12]  771 	ldhl	sp,	#5
    0000030C 7E               [ 8]  772 	ld	a, (hl)
    0000030D EAr08r00         [16]  773 	ld	(#_PosF),a
    00000310                        774 00109$:
                                    775 ;src/metasprites.c:220: SpdX -= 2;
    00000310 FAr04r00         [16]  776 	ld	a, (_SpdX)
    00000313 5F               [ 4]  777 	ld	e, a
    00000314 21r05r00         [12]  778 	ld	hl, #_SpdX + 1
    00000317 56               [ 8]  779 	ld	d, (hl)
                                    780 ;src/metasprites.c:222: PosF |= ACC_X;
    00000318 FAr08r00         [16]  781 	ld	a, (#_PosF)
    0000031B F6 01            [ 8]  782 	or	a, #0x01
    0000031D F8 05            [12]  783 	ldhl	sp,	#5
    0000031F 77               [ 8]  784 	ld	(hl), a
                                    785 ;src/metasprites.c:219: if (KEY_DOWN(J_LEFT)) {
    00000320 E5               [16]  786 	push	hl
    00000321 2B               [ 8]  787 	dec	hl
    00000322 CB 4E            [12]  788 	bit	1, (hl)
    00000324 E1               [12]  789 	pop	hl
    00000325 28 34            [12]  790 	jr	Z, 00117$
                                    791 ;src/metasprites.c:220: SpdX -= 2;
    00000327 1B               [ 8]  792 	dec	de
    00000328 1B               [ 8]  793 	dec	de
    00000329 21r04r00         [12]  794 	ld	hl, #_SpdX
    0000032C 7B               [ 4]  795 	ld	a, e
    0000032D 22               [ 8]  796 	ld	(hl+), a
                                    797 ;src/metasprites.c:221: if (SpdX < -32) SpdX = -32;
    0000032E 7A               [ 4]  798 	ld	a, d
    0000032F 32               [ 8]  799 	ld	(hl-), a
    00000330 2A               [ 8]  800 	ld	a, (hl+)
    00000331 D6 E0            [ 8]  801 	sub	a, #0xe0
    00000333 7E               [ 8]  802 	ld	a, (hl)
    00000334 DE FF            [ 8]  803 	sbc	a, #0xff
    00000336 56               [ 8]  804 	ld	d, (hl)
    00000337 3E FF            [ 8]  805 	ld	a, #0xff
    00000339 CB 7F            [ 8]  806 	bit	7,a
    0000033B 28 07            [12]  807 	jr	Z, 00325$
    0000033D CB 7A            [ 8]  808 	bit	7, d
    0000033F 20 08            [12]  809 	jr	NZ, 00326$
    00000341 BF               [ 4]  810 	cp	a, a
    00000342 18 05            [12]  811 	jr	00326$
    00000344                        812 00325$:
    00000344 CB 7A            [ 8]  813 	bit	7, d
    00000346 28 01            [12]  814 	jr	Z, 00326$
    00000348 37               [ 4]  815 	scf
    00000349                        816 00326$:
    00000349 30 08            [12]  817 	jr	NC, 00111$
    0000034B 21r04r00         [12]  818 	ld	hl, #_SpdX
    0000034E 3E E0            [ 8]  819 	ld	a, #0xe0
    00000350 22               [ 8]  820 	ld	(hl+), a
    00000351 36 FF            [12]  821 	ld	(hl), #0xff
    00000353                        822 00111$:
                                    823 ;src/metasprites.c:222: PosF |= ACC_X;
    00000353 F8 05            [12]  824 	ldhl	sp,	#5
    00000355 7E               [ 8]  825 	ld	a, (hl)
    00000356 EAr08r00         [16]  826 	ld	(#_PosF),a
    00000359 18 3D            [12]  827 	jr	00118$
    0000035B                        828 00117$:
                                    829 ;src/metasprites.c:223: } else if (KEY_DOWN(J_RIGHT)) {
    0000035B E5               [16]  830 	push	hl
    0000035C F8 06            [12]  831 	ldhl	sp,	#6
    0000035E CB 46            [12]  832 	bit	0, (hl)
    00000360 E1               [12]  833 	pop	hl
    00000361 28 35            [12]  834 	jr	Z, 00118$
                                    835 ;src/metasprites.c:224: SpdX += 2;
    00000363 13               [ 8]  836 	inc	de
    00000364 13               [ 8]  837 	inc	de
    00000365 21r04r00         [12]  838 	ld	hl, #_SpdX
    00000368 7B               [ 4]  839 	ld	a, e
    00000369 22               [ 8]  840 	ld	(hl+), a
                                    841 ;src/metasprites.c:225: if (SpdX > 32) SpdX = 32;
    0000036A 7A               [ 4]  842 	ld	a, d
    0000036B 32               [ 8]  843 	ld	(hl-), a
    0000036C 2A               [ 8]  844 	ld	a, (hl+)
    0000036D 4F               [ 4]  845 	ld	c, a
    0000036E 46               [ 8]  846 	ld	b, (hl)
    0000036F 58               [ 4]  847 	ld	e, b
    00000370 16 00            [ 8]  848 	ld	d, #0x00
    00000372 3E 20            [ 8]  849 	ld	a, #0x20
    00000374 B9               [ 4]  850 	cp	a, c
    00000375 3E 00            [ 8]  851 	ld	a, #0x00
    00000377 98               [ 4]  852 	sbc	a, b
    00000378 CB 7B            [ 8]  853 	bit	7, e
    0000037A 28 07            [12]  854 	jr	Z, 00328$
    0000037C CB 7A            [ 8]  855 	bit	7, d
    0000037E 20 08            [12]  856 	jr	NZ, 00329$
    00000380 BF               [ 4]  857 	cp	a, a
    00000381 18 05            [12]  858 	jr	00329$
    00000383                        859 00328$:
    00000383 CB 7A            [ 8]  860 	bit	7, d
    00000385 28 01            [12]  861 	jr	Z, 00329$
    00000387 37               [ 4]  862 	scf
    00000388                        863 00329$:
    00000388 30 08            [12]  864 	jr	NC, 00113$
    0000038A 21r04r00         [12]  865 	ld	hl, #_SpdX
    0000038D 3E 20            [ 8]  866 	ld	a, #0x20
    0000038F 22               [ 8]  867 	ld	(hl+), a
    00000390 AF               [ 4]  868 	xor	a, a
    00000391 77               [ 8]  869 	ld	(hl), a
    00000392                        870 00113$:
                                    871 ;src/metasprites.c:226: PosF |= ACC_X;
    00000392 F8 05            [12]  872 	ldhl	sp,	#5
    00000394 7E               [ 8]  873 	ld	a, (hl)
    00000395 EAr08r00         [16]  874 	ld	(#_PosF),a
    00000398                        875 00118$:
                                    876 ;src/metasprites.c:230: if (KEY_PRESSED(J_B)) {
    00000398 FAr00r00         [16]  877 	ld	a, (#_joyp)
    0000039B 21r01r00         [12]  878 	ld	hl, #_old_joyp
    0000039E AE               [ 8]  879 	xor	a, (hl)
    0000039F 21r00r00         [12]  880 	ld	hl, #_joyp
    000003A2 A6               [ 8]  881 	and	a, (hl)
    000003A3 4F               [ 4]  882 	ld	c, a
    000003A4 CB 69            [ 8]  883 	bit	5, c
    000003A6 28 0B            [12]  884 	jr	Z, 00122$
                                    885 ;src/metasprites.c:231: idx++; if (idx >= (sizeof(sprite_metasprites) >> 1)) idx = 0;
    000003A8 21r09r00         [12]  886 	ld	hl, #_idx
    000003AB 34               [12]  887 	inc	(hl)
    000003AC 7E               [ 8]  888 	ld	a, (hl)
    000003AD D6 05            [ 8]  889 	sub	a, #0x05
    000003AF 38 02            [12]  890 	jr	C, 00122$
    000003B1 36 00            [12]  891 	ld	(hl), #0x00
    000003B3                        892 00122$:
                                    893 ;src/metasprites.c:235: if (KEY_PRESSED(J_A)) {
    000003B3 CB 61            [ 8]  894 	bit	4, c
    000003B5 28 08            [12]  895 	jr	Z, 00124$
                                    896 ;src/metasprites.c:236: rot++; rot &= 0xF;
    000003B7 21r0Ar00         [12]  897 	ld	hl, #_rot
    000003BA 34               [12]  898 	inc	(hl)
    000003BB 7E               [ 8]  899 	ld	a, (hl)
    000003BC E6 0F            [ 8]  900 	and	a, #0x0f
    000003BE 77               [ 8]  901 	ld	(hl), a
    000003BF                        902 00124$:
                                    903 ;src/metasprites.c:239: PosX += SpdX, PosY += SpdY; 
    000003BF FAr00r00         [16]  904 	ld	a, (#_PosX)
    000003C2 21r04r00         [12]  905 	ld	hl, #_SpdX
    000003C5 86               [ 8]  906 	add	a, (hl)
    000003C6 21r00r00         [12]  907 	ld	hl, #_PosX
    000003C9 22               [ 8]  908 	ld	(hl+), a
    000003CA 7E               [ 8]  909 	ld	a, (hl)
    000003CB 21r05r00         [12]  910 	ld	hl, #_SpdX + 1
    000003CE 8E               [ 8]  911 	adc	a, (hl)
    000003CF EAr01r00         [16]  912 	ld	(#_PosX + 1),a
    000003D2 FAr02r00         [16]  913 	ld	a, (#_PosY)
    000003D5 21r06r00         [12]  914 	ld	hl, #_SpdY
    000003D8 86               [ 8]  915 	add	a, (hl)
    000003D9 21r02r00         [12]  916 	ld	hl, #_PosY
    000003DC 22               [ 8]  917 	ld	(hl+), a
    000003DD 7E               [ 8]  918 	ld	a, (hl)
    000003DE 21r07r00         [12]  919 	ld	hl, #_SpdY + 1
    000003E1 8E               [ 8]  920 	adc	a, (hl)
    000003E2 EAr03r00         [16]  921 	ld	(#_PosY + 1),a
                                    922 ;src/metasprites.c:250: uint8_t subpal = rot >> 2;
    000003E5 FAr0Ar00         [16]  923 	ld	a, (#_rot)
    000003E8 0F               [ 4]  924 	rrca
    000003E9 0F               [ 4]  925 	rrca
    000003EA E6 3F            [ 8]  926 	and	a, #0x3f
    000003EC F8 05            [12]  927 	ldhl	sp,	#5
    000003EE 77               [ 8]  928 	ld	(hl), a
                                    929 ;src/metasprites.c:251: switch (rot & 0x3) {
    000003EF FAr0Ar00         [16]  930 	ld	a, (_rot)
    000003F2 E6 03            [ 8]  931 	and	a, #0x03
    000003F4 F8 02            [12]  932 	ldhl	sp,	#2
    000003F6 77               [ 8]  933 	ld	(hl), a
                                    934 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    000003F7 21r02r00         [12]  935 	ld	hl, #_PosY
    000003FA 2A               [ 8]  936 	ld	a, (hl+)
    000003FB 5F               [ 4]  937 	ld	e, a
    000003FC 56               [ 8]  938 	ld	d, (hl)
    000003FD CB 2A            [ 8]  939 	sra	d
    000003FF CB 1B            [ 8]  940 	rr	e
    00000401 CB 2A            [ 8]  941 	sra	d
    00000403 CB 1B            [ 8]  942 	rr	e
    00000405 CB 2A            [ 8]  943 	sra	d
    00000407 CB 1B            [ 8]  944 	rr	e
    00000409 CB 2A            [ 8]  945 	sra	d
    0000040B CB 1B            [ 8]  946 	rr	e
                                    947 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    0000040D 21r00r00         [12]  948 	ld	hl, #_PosX
    00000410 2A               [ 8]  949 	ld	a, (hl+)
    00000411 4F               [ 4]  950 	ld	c, a
    00000412 46               [ 8]  951 	ld	b, (hl)
    00000413 CB 28            [ 8]  952 	sra	b
    00000415 CB 19            [ 8]  953 	rr	c
    00000417 CB 28            [ 8]  954 	sra	b
    00000419 CB 19            [ 8]  955 	rr	c
    0000041B CB 28            [ 8]  956 	sra	b
    0000041D CB 19            [ 8]  957 	rr	c
    0000041F CB 28            [ 8]  958 	sra	b
    00000421 CB 19            [ 8]  959 	rr	c
                                    960 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000423 7B               [ 4]  961 	ld	a, e
                                    962 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                    963 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000424 C6 10            [ 8]  964 	add	a, #0x10
    00000426 F8 03            [12]  965 	ldhl	sp,	#3
                                    966 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    00000428 22               [ 8]  967 	ld	(hl+), a
    00000429 79               [ 4]  968 	ld	a, c
    0000042A C6 08            [ 8]  969 	add	a, #0x08
                                    970 ;src/metasprites.c:251: switch (rot & 0x3) {
    0000042C 32               [ 8]  971 	ld	(hl-), a
    0000042D 2B               [ 8]  972 	dec	hl
    0000042E 7E               [ 8]  973 	ld	a, (hl)
    0000042F 3D               [ 4]  974 	dec	a
    00000430 28 12            [12]  975 	jr	Z, 00125$
    00000432 F8 02            [12]  976 	ldhl	sp,	#2
    00000434 7E               [ 8]  977 	ld	a, (hl)
    00000435 D6 02            [ 8]  978 	sub	a, #0x02
    00000437 28 4F            [12]  979 	jr	Z, 00126$
    00000439 F8 02            [12]  980 	ldhl	sp,	#2
    0000043B 7E               [ 8]  981 	ld	a, (hl)
    0000043C D6 03            [ 8]  982 	sub	a, #0x03
    0000043E CArD1r04         [16]  983 	jp	Z, 00127$
    00000441 C3r0Br05         [16]  984 	jp	00128$
                                    985 ;src/metasprites.c:252: case 1:
    00000444                        986 00125$:
                                    987 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                    988 ;src/metasprites.c:257: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                    989 ;src/metasprites.c:254: TILE_NUM_START + get_tile_offset(0, 1),
    00000444 1E 01            [ 8]  990 	ld	e, #0x01
    00000446 AF               [ 4]  991 	xor	a, a
    00000447 CDrD4r01         [24]  992 	call	_get_tile_offset
    0000044A 4F               [ 4]  993 	ld	c, a
                                    994 ;src/metasprites.c:253: hiwater += move_metasprite_flipy( sprite_metasprites[idx],
    0000044B 11r00r00         [12]  995 	ld	de, #_sprite_metasprites+0
    0000044E FAr09r00         [16]  996 	ld	a, (_idx)
    00000451 6F               [ 4]  997 	ld	l, a
    00000452 26 00            [ 8]  998 	ld	h, #0x00
    00000454 29               [ 8]  999 	add	hl, hl
    00000455 19               [ 8] 1000 	add	hl, de
    00000456 2A               [ 8] 1001 	ld	a, (hl+)
    00000457 46               [ 8] 1002 	ld	b, (hl)
                                   1003 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000458 F8 04            [12] 1004 	ldhl	sp,	#4
    0000045A 5E               [ 8] 1005 	ld	e, (hl)
                                   1006 ;../../../include/gb/metasprites.h:241: __current_metasprite = metasprite;
    0000045B 21r00r00         [12] 1007 	ld	hl, #___current_metasprite
    0000045E 22               [ 8] 1008 	ld	(hl+), a
    0000045F 70               [ 8] 1009 	ld	(hl), b
                                   1010 ;../../../include/gb/metasprites.h:242: __current_base_tile = base_tile;
    00000460 21r00r00         [12] 1011 	ld	hl, #___current_base_tile
    00000463 71               [ 8] 1012 	ld	(hl), c
                                   1013 ;../../../include/gb/metasprites.h:243: __current_base_prop = base_prop;
    00000464 F8 05            [12] 1014 	ldhl	sp,	#5
    00000466 7E               [ 8] 1015 	ld	a, (hl)
    00000467 EAr00r00         [16] 1016 	ld	(#___current_base_prop),a
                                   1017 ;../../../include/gb/metasprites.h:244: return __move_metasprite_flipy(base_sprite, ((y - ((LCDC_REG & LCDCF_OBJ16) ? 16u : 8u)) << 8) | x);
    0000046A F8 03            [12] 1018 	ldhl	sp,	#3
    0000046C 6E               [ 8] 1019 	ld	l, (hl)
    0000046D F0r00            [12] 1020 	ldh	a, (_LCDC_REG + 0)
    0000046F CB 4F            [ 8] 1021 	bit	1, a
    00000471 28 05            [12] 1022 	jr	Z, 00153$
    00000473 01 10 00         [12] 1023 	ld	bc, #0x0010
    00000476 18 03            [12] 1024 	jr	00154$
    00000478                       1025 00153$:
    00000478 01 08 00         [12] 1026 	ld	bc, #0x0008
    0000047B                       1027 00154$:
    0000047B 7D               [ 4] 1028 	ld	a, l
    0000047C 91               [ 4] 1029 	sub	a, c
    0000047D 57               [ 4] 1030 	ld	d, a
    0000047E AF               [ 4] 1031 	xor	a, a
    0000047F CDr00r00         [24] 1032 	call	___move_metasprite_flipy
                                   1033 ;src/metasprites.c:258: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    00000482 F8 05            [12] 1034 	ldhl	sp,	#5
    00000484 77               [ 8] 1035 	ld	(hl), a
                                   1036 ;src/metasprites.c:259: break;
    00000485 C3r8Ar05         [16] 1037 	jp	00129$
                                   1038 ;src/metasprites.c:260: case 2:
    00000488                       1039 00126$:
                                   1040 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1041 ;src/metasprites.c:265: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1042 ;src/metasprites.c:262: TILE_NUM_START + get_tile_offset(1, 1),
    00000488 3E 01            [ 8] 1043 	ld	a,#0x01
    0000048A 5F               [ 4] 1044 	ld	e,a
    0000048B CDrD4r01         [24] 1045 	call	_get_tile_offset
    0000048E 4F               [ 4] 1046 	ld	c, a
                                   1047 ;src/metasprites.c:261: hiwater += move_metasprite_flipxy(sprite_metasprites[idx],
    0000048F 11r00r00         [12] 1048 	ld	de, #_sprite_metasprites+0
    00000492 FAr09r00         [16] 1049 	ld	a, (_idx)
    00000495 6F               [ 4] 1050 	ld	l, a
    00000496 26 00            [ 8] 1051 	ld	h, #0x00
    00000498 29               [ 8] 1052 	add	hl, hl
    00000499 19               [ 8] 1053 	add	hl, de
    0000049A 2A               [ 8] 1054 	ld	a, (hl+)
    0000049B 46               [ 8] 1055 	ld	b, (hl)
                                   1056 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000049C F8 04            [12] 1057 	ldhl	sp,	#4
    0000049E 5E               [ 8] 1058 	ld	e, (hl)
                                   1059 ;../../../include/gb/metasprites.h:281: __current_metasprite = metasprite;
    0000049F 21r00r00         [12] 1060 	ld	hl, #___current_metasprite
    000004A2 22               [ 8] 1061 	ld	(hl+), a
    000004A3 70               [ 8] 1062 	ld	(hl), b
                                   1063 ;../../../include/gb/metasprites.h:282: __current_base_tile = base_tile;
    000004A4 21r00r00         [12] 1064 	ld	hl, #___current_base_tile
    000004A7 71               [ 8] 1065 	ld	(hl), c
                                   1066 ;../../../include/gb/metasprites.h:283: __current_base_prop = base_prop;
    000004A8 F8 05            [12] 1067 	ldhl	sp,	#5
    000004AA 7E               [ 8] 1068 	ld	a, (hl)
    000004AB EAr00r00         [16] 1069 	ld	(#___current_base_prop),a
                                   1070 ;../../../include/gb/metasprites.h:284: return __move_metasprite_flipxy(base_sprite, ((y - ((LCDC_REG & LCDCF_OBJ16) ? 16u : 8u)) << 8) | (uint8_t)(x - 8));
    000004AE F8 03            [12] 1071 	ldhl	sp,	#3
    000004B0 56               [ 8] 1072 	ld	d, (hl)
    000004B1 F0r00            [12] 1073 	ldh	a, (_LCDC_REG + 0)
    000004B3 CB 4F            [ 8] 1074 	bit	1, a
    000004B5 28 05            [12] 1075 	jr	Z, 00155$
    000004B7 01 10 00         [12] 1076 	ld	bc, #0x0010
    000004BA 18 03            [12] 1077 	jr	00156$
    000004BC                       1078 00155$:
    000004BC 01 08 00         [12] 1079 	ld	bc, #0x0008
    000004BF                       1080 00156$:
    000004BF 7A               [ 4] 1081 	ld	a, d
    000004C0 91               [ 4] 1082 	sub	a, c
    000004C1 47               [ 4] 1083 	ld	b, a
    000004C2 7B               [ 4] 1084 	ld	a, e
    000004C3 C6 F8            [ 8] 1085 	add	a, #0xf8
    000004C5 5F               [ 4] 1086 	ld	e, a
    000004C6 50               [ 4] 1087 	ld	d, b
    000004C7 AF               [ 4] 1088 	xor	a, a
    000004C8 CDr00r00         [24] 1089 	call	___move_metasprite_flipxy
                                   1090 ;src/metasprites.c:266: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    000004CB F8 05            [12] 1091 	ldhl	sp,	#5
    000004CD 77               [ 8] 1092 	ld	(hl), a
                                   1093 ;src/metasprites.c:267: break;
    000004CE C3r8Ar05         [16] 1094 	jp	00129$
                                   1095 ;src/metasprites.c:268: case 3:
    000004D1                       1096 00127$:
                                   1097 ;src/metasprites.c:274: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
                                   1098 ;src/metasprites.c:273: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
                                   1099 ;src/metasprites.c:270: TILE_NUM_START + get_tile_offset(1, 0),
    000004D1 1E 00            [ 8] 1100 	ld	e, #0x00
    000004D3 3E 01            [ 8] 1101 	ld	a, #0x01
    000004D5 CDrD4r01         [24] 1102 	call	_get_tile_offset
    000004D8 4F               [ 4] 1103 	ld	c, a
                                   1104 ;src/metasprites.c:269: hiwater += move_metasprite_flipx( sprite_metasprites[idx],
    000004D9 FAr09r00         [16] 1105 	ld	a, (_idx)
    000004DC 26 00            [ 8] 1106 	ld	h, #0x00
    000004DE 6F               [ 4] 1107 	ld	l, a
    000004DF 29               [ 8] 1108 	add	hl, hl
    000004E0 11r00r00         [12] 1109 	ld	de, #_sprite_metasprites
    000004E3 19               [ 8] 1110 	add	hl, de
    000004E4 2A               [ 8] 1111 	ld	a,	(hl+)
    000004E5 66               [ 8] 1112 	ld	h, (hl)
                                   1113 ;../../../include/gb/metasprites.h:200: __current_metasprite = metasprite;
    000004E6 5F               [ 4] 1114 	ld	e, a
    000004E7 54               [ 4] 1115 	ld	d, h
    000004E8 21r00r00         [12] 1116 	ld	hl, #___current_metasprite
    000004EB 7B               [ 4] 1117 	ld	a, e
    000004EC 22               [ 8] 1118 	ld	(hl+), a
    000004ED 72               [ 8] 1119 	ld	(hl), d
                                   1120 ;../../../include/gb/metasprites.h:201: __current_base_tile = base_tile;
    000004EE 21r00r00         [12] 1121 	ld	hl, #___current_base_tile
    000004F1 71               [ 8] 1122 	ld	(hl), c
                                   1123 ;../../../include/gb/metasprites.h:202: __current_base_prop = base_prop;
    000004F2 F8 05            [12] 1124 	ldhl	sp,	#5
    000004F4 7E               [ 8] 1125 	ld	a, (hl)
    000004F5 EAr00r00         [16] 1126 	ld	(#___current_base_prop),a
                                   1127 ;../../../include/gb/metasprites.h:203: return __move_metasprite_flipx(base_sprite, (y << 8) | (uint8_t)(x - 8u));
    000004F8 F8 03            [12] 1128 	ldhl	sp,	#3
    000004FA 2A               [ 8] 1129 	ld	a, (hl+)
    000004FB 47               [ 4] 1130 	ld	b, a
    000004FC 7E               [ 8] 1131 	ld	a, (hl)
    000004FD C6 F8            [ 8] 1132 	add	a, #0xf8
    000004FF 5F               [ 4] 1133 	ld	e, a
    00000500 50               [ 4] 1134 	ld	d, b
    00000501 AF               [ 4] 1135 	xor	a, a
    00000502 CDr00r00         [24] 1136 	call	___move_metasprite_flipx
    00000505 F8 05            [12] 1137 	ldhl	sp,	#5
    00000507 77               [ 8] 1138 	ld	(hl), a
                                   1139 ;src/metasprites.c:275: break;
    00000508 C3r8Ar05         [16] 1140 	jp	00129$
                                   1141 ;src/metasprites.c:276: default:
    0000050B                       1142 00128$:
                                   1143 ;src/metasprites.c:282: DEVICE_SPRITE_PX_OFFSET_Y + (PosY >> 4));
    0000050B F8 03            [12] 1144 	ldhl	sp,	#3
    0000050D 7E               [ 8] 1145 	ld	a, (hl)
    0000050E F8 00            [12] 1146 	ldhl	sp,	#0
    00000510 77               [ 8] 1147 	ld	(hl), a
                                   1148 ;src/metasprites.c:281: DEVICE_SPRITE_PX_OFFSET_X + (PosX >> 4),
    00000511 F8 04            [12] 1149 	ldhl	sp,	#4
    00000513 7E               [ 8] 1150 	ld	a, (hl)
    00000514 F8 01            [12] 1151 	ldhl	sp,	#1
    00000516 77               [ 8] 1152 	ld	(hl), a
    00000517 F8 05            [12] 1153 	ldhl	sp,	#5
    00000519 7E               [ 8] 1154 	ld	a, (hl)
    0000051A F8 02            [12] 1155 	ldhl	sp,	#2
    0000051C 77               [ 8] 1156 	ld	(hl), a
                                   1157 ;src/metasprites.c:278: TILE_NUM_START + get_tile_offset(0, 0),
    0000051D AF               [ 4] 1158 	xor	a, a
    0000051E 5F               [ 4] 1159 	ld	e, a
    0000051F CDrD4r01         [24] 1160 	call	_get_tile_offset
    00000522 F8 03            [12] 1161 	ldhl	sp,	#3
    00000524 77               [ 8] 1162 	ld	(hl), a
                                   1163 ;src/metasprites.c:277: hiwater += move_metasprite_ex(    sprite_metasprites[idx],
    00000525 FAr09r00         [16] 1164 	ld	a, (_idx)
    00000528 16 00            [ 8] 1165 	ld	d, #0x00
    0000052A 87               [ 4] 1166 	add	a, a
    0000052B CB 12            [ 8] 1167 	rl	d
    0000052D 5F               [ 4] 1168 	ld	e, a
    0000052E 21r00r00         [12] 1169 	ld	hl, #_sprite_metasprites
    00000531 19               [ 8] 1170 	add	hl, de
    00000532 E5               [16] 1171 	push	hl
    00000533 7D               [ 4] 1172 	ld	a, l
    00000534 F8 06            [12] 1173 	ldhl	sp,	#6
    00000536 77               [ 8] 1174 	ld	(hl), a
    00000537 E1               [12] 1175 	pop	hl
    00000538 7C               [ 4] 1176 	ld	a, h
    00000539 F8 05            [12] 1177 	ldhl	sp,	#5
    0000053B 32               [ 8] 1178 	ld	(hl-), a
    0000053C 2A               [ 8] 1179 	ld	a, (hl+)
    0000053D 5F               [ 4] 1180 	ld	e, a
    0000053E 3A               [ 8] 1181 	ld	a, (hl-)
    0000053F 57               [ 4] 1182 	ld	d, a
    00000540 1A               [ 8] 1183 	ld	a, (de)
    00000541 22               [ 8] 1184 	ld	(hl+), a
    00000542 13               [ 8] 1185 	inc	de
    00000543 1A               [ 8] 1186 	ld	a, (de)
                                   1187 ;../../../include/gb/metasprites.h:160: __current_metasprite = metasprite;
    00000544 32               [ 8] 1188 	ld	(hl-), a
    00000545 7E               [ 8] 1189 	ld	a, (hl)
    00000546 EAr00r00         [16] 1190 	ld	(#___current_metasprite),a
    00000549 F8 05            [12] 1191 	ldhl	sp,	#5
    0000054B 7E               [ 8] 1192 	ld	a, (hl)
    0000054C EAr01r00         [16] 1193 	ld	(#___current_metasprite + 1),a
                                   1194 ;../../../include/gb/metasprites.h:161: __current_base_tile = base_tile;
    0000054F F8 03            [12] 1195 	ldhl	sp,	#3
    00000551 7E               [ 8] 1196 	ld	a, (hl)
    00000552 EAr00r00         [16] 1197 	ld	(#___current_base_tile),a
                                   1198 ;../../../include/gb/metasprites.h:162: __current_base_prop = base_prop;
    00000555 F8 02            [12] 1199 	ldhl	sp,	#2
    00000557 7E               [ 8] 1200 	ld	a, (hl)
    00000558 EAr00r00         [16] 1201 	ld	(#___current_base_prop),a
                                   1202 ;../../../include/gb/metasprites.h:163: return __move_metasprite(base_sprite, (y << 8) | (uint8_t)x);
    0000055B F8 00            [12] 1203 	ldhl	sp,	#0
    0000055D 7E               [ 8] 1204 	ld	a, (hl)
    0000055E F8 04            [12] 1205 	ldhl	sp,	#4
    00000560 22               [ 8] 1206 	ld	(hl+), a
    00000561 AF               [ 4] 1207 	xor	a, a
    00000562 32               [ 8] 1208 	ld	(hl-), a
    00000563 2A               [ 8] 1209 	ld	a, (hl+)
    00000564 32               [ 8] 1210 	ld	(hl-), a
    00000565 36 00            [12] 1211 	ld	(hl), #0x00
    00000567 F8 01            [12] 1212 	ldhl	sp,	#1
    00000569 2A               [ 8] 1213 	ld	a, (hl+)
    0000056A 22               [ 8] 1214 	ld	(hl+), a
    0000056B AF               [ 4] 1215 	xor	a, a
    0000056C 32               [ 8] 1216 	ld	(hl-), a
    0000056D 3A               [ 8] 1217 	ld	a, (hl-)
    0000056E 2B               [ 8] 1218 	dec	hl
    0000056F 77               [ 8] 1219 	ld	(hl), a
    00000570 F8 05            [12] 1220 	ldhl	sp,	#5
    00000572 7E               [ 8] 1221 	ld	a, (hl)
    00000573 F8 01            [12] 1222 	ldhl	sp,	#1
    00000575 32               [ 8] 1223 	ld	(hl-), a
    00000576 7E               [ 8] 1224 	ld	a, (hl)
    00000577 F8 04            [12] 1225 	ldhl	sp,	#4
    00000579 77               [ 8] 1226 	ld	(hl), a
    0000057A F8 01            [12] 1227 	ldhl	sp,	#1
    0000057C 7E               [ 8] 1228 	ld	a, (hl)
    0000057D F8 05            [12] 1229 	ldhl	sp,	#5
    0000057F 32               [ 8] 1230 	ld	(hl-), a
    00000580 2A               [ 8] 1231 	ld	a, (hl+)
    00000581 5F               [ 4] 1232 	ld	e, a
    00000582 56               [ 8] 1233 	ld	d, (hl)
    00000583 AF               [ 4] 1234 	xor	a, a
    00000584 CDr00r00         [24] 1235 	call	___move_metasprite
    00000587 F8 05            [12] 1236 	ldhl	sp,	#5
    00000589 77               [ 8] 1237 	ld	(hl), a
                                   1238 ;src/metasprites.c:284: }
    0000058A                       1239 00129$:
                                   1240 ;src/metasprites.c:287: hide_sprites_range(hiwater, MAX_HARDWARE_SPRITES);        
    0000058A 1E 28            [ 8] 1241 	ld	e, #0x28
    0000058C F8 05            [12] 1242 	ldhl	sp,	#5
    0000058E 7E               [ 8] 1243 	ld	a, (hl)
    0000058F CDr00r00         [24] 1244 	call	_hide_sprites_range
                                   1245 ;src/metasprites.c:290: if (!(PosF & ACC_Y)) {
    00000592 FAr08r00         [16] 1246 	ld	a, (_PosF)
    00000595 4F               [ 4] 1247 	ld	c, a
    00000596 CB 49            [ 8] 1248 	bit	1, c
    00000598 20 36            [12] 1249 	jr	NZ, 00136$
                                   1250 ;src/metasprites.c:291: if (SpdY != 0) {
    0000059A 21r07r00         [12] 1251 	ld	hl, #_SpdY + 1
    0000059D 3A               [ 8] 1252 	ld	a, (hl-)
    0000059E B6               [ 8] 1253 	or	a, (hl)
    0000059F 28 2F            [12] 1254 	jr	Z, 00136$
                                   1255 ;src/metasprites.c:292: if (SpdY > 0) SpdY--;
    000005A1 2A               [ 8] 1256 	ld	a, (hl+)
    000005A2 47               [ 4] 1257 	ld	b, a
    000005A3 6E               [ 8] 1258 	ld	l, (hl)
    000005A4 5D               [ 4] 1259 	ld	e, l
    000005A5 AF               [ 4] 1260 	xor	a, a
    000005A6 57               [ 4] 1261 	ld	d, a
    000005A7 B8               [ 4] 1262 	cp	a, b
    000005A8 9D               [ 4] 1263 	sbc	a, l
    000005A9 CB 7B            [ 8] 1264 	bit	7, e
    000005AB 28 07            [12] 1265 	jr	Z, 00340$
    000005AD CB 7A            [ 8] 1266 	bit	7, d
    000005AF 20 08            [12] 1267 	jr	NZ, 00341$
    000005B1 BF               [ 4] 1268 	cp	a, a
    000005B2 18 05            [12] 1269 	jr	00341$
    000005B4                       1270 00340$:
    000005B4 CB 7A            [ 8] 1271 	bit	7, d
    000005B6 28 01            [12] 1272 	jr	Z, 00341$
    000005B8 37               [ 4] 1273 	scf
    000005B9                       1274 00341$:
    000005B9 30 0D            [12] 1275 	jr	NC, 00131$
    000005BB 21r06r00         [12] 1276 	ld	hl, #_SpdY
    000005BE 2A               [ 8] 1277 	ld	a, (hl+)
    000005BF 5F               [ 4] 1278 	ld	e, a
    000005C0 3A               [ 8] 1279 	ld	a, (hl-)
    000005C1 57               [ 4] 1280 	ld	d, a
    000005C2 1B               [ 8] 1281 	dec	de
    000005C3 7B               [ 4] 1282 	ld	a, e
    000005C4 22               [ 8] 1283 	ld	(hl+), a
    000005C5 72               [ 8] 1284 	ld	(hl), d
    000005C6 18 08            [12] 1285 	jr	00136$
    000005C8                       1286 00131$:
                                   1287 ;src/metasprites.c:293: else SpdY ++;
    000005C8 21r06r00         [12] 1288 	ld	hl, #_SpdY
    000005CB 34               [12] 1289 	inc	(hl)
    000005CC 20 02            [12] 1290 	jr	NZ, 00342$
    000005CE 23               [ 8] 1291 	inc	hl
    000005CF 34               [12] 1292 	inc	(hl)
    000005D0                       1293 00342$:
    000005D0                       1294 00136$:
                                   1295 ;src/metasprites.c:298: if (!(PosF & ACC_X)) {
    000005D0 CB 41            [ 8] 1296 	bit	0, c
    000005D2 20 36            [12] 1297 	jr	NZ, 00143$
                                   1298 ;src/metasprites.c:299: if (SpdX != 0) {
    000005D4 21r05r00         [12] 1299 	ld	hl, #_SpdX + 1
    000005D7 3A               [ 8] 1300 	ld	a, (hl-)
    000005D8 B6               [ 8] 1301 	or	a, (hl)
    000005D9 28 2F            [12] 1302 	jr	Z, 00143$
                                   1303 ;src/metasprites.c:300: if (SpdX > 0) SpdX--;
    000005DB 2A               [ 8] 1304 	ld	a, (hl+)
    000005DC 4F               [ 4] 1305 	ld	c, a
    000005DD 46               [ 8] 1306 	ld	b, (hl)
    000005DE 58               [ 4] 1307 	ld	e, b
    000005DF AF               [ 4] 1308 	xor	a, a
    000005E0 57               [ 4] 1309 	ld	d, a
    000005E1 B9               [ 4] 1310 	cp	a, c
    000005E2 98               [ 4] 1311 	sbc	a, b
    000005E3 CB 7B            [ 8] 1312 	bit	7, e
    000005E5 28 07            [12] 1313 	jr	Z, 00345$
    000005E7 CB 7A            [ 8] 1314 	bit	7, d
    000005E9 20 08            [12] 1315 	jr	NZ, 00346$
    000005EB BF               [ 4] 1316 	cp	a, a
    000005EC 18 05            [12] 1317 	jr	00346$
    000005EE                       1318 00345$:
    000005EE CB 7A            [ 8] 1319 	bit	7, d
    000005F0 28 01            [12] 1320 	jr	Z, 00346$
    000005F2 37               [ 4] 1321 	scf
    000005F3                       1322 00346$:
    000005F3 30 0D            [12] 1323 	jr	NC, 00138$
    000005F5 21r04r00         [12] 1324 	ld	hl, #_SpdX
    000005F8 2A               [ 8] 1325 	ld	a, (hl+)
    000005F9 5F               [ 4] 1326 	ld	e, a
    000005FA 3A               [ 8] 1327 	ld	a, (hl-)
    000005FB 57               [ 4] 1328 	ld	d, a
    000005FC 1B               [ 8] 1329 	dec	de
    000005FD 7B               [ 4] 1330 	ld	a, e
    000005FE 22               [ 8] 1331 	ld	(hl+), a
    000005FF 72               [ 8] 1332 	ld	(hl), d
    00000600 18 08            [12] 1333 	jr	00143$
    00000602                       1334 00138$:
                                   1335 ;src/metasprites.c:301: else SpdX ++;
    00000602 21r04r00         [12] 1336 	ld	hl, #_SpdX
    00000605 34               [12] 1337 	inc	(hl)
    00000606 20 02            [12] 1338 	jr	NZ, 00347$
    00000608 23               [ 8] 1339 	inc	hl
    00000609 34               [12] 1340 	inc	(hl)
    0000060A                       1341 00347$:
    0000060A                       1342 00143$:
                                   1343 ;src/metasprites.c:307: vsync();
    0000060A CDr00r00         [24] 1344 	call	_vsync
    0000060D C3r72r02         [16] 1345 	jp	00145$
                                   1346 ;src/metasprites.c:309: }
    00000610 E8 06            [16] 1347 	add	sp, #6
    00000612 C9               [16] 1348 	ret
    00000613                       1349 _gray_pal:
    00000613 FF 7F                 1350 	.dw #0x7fff
    00000615 B5 56                 1351 	.dw #0x56b5
    00000617 4A 29                 1352 	.dw #0x294a
    00000619 00 00                 1353 	.dw #0x0000
    0000061B                       1354 _pink_pal:
    0000061B FF 7F                 1355 	.dw #0x7fff
    0000061D 1F 7C                 1356 	.dw #0x7c1f
    0000061F 15 54                 1357 	.dw #0x5415
    00000621 0A 28                 1358 	.dw #0x280a
    00000623                       1359 _cyan_pal:
    00000623 FF 7F                 1360 	.dw #0x7fff
    00000625 EA 7F                 1361 	.dw #0x7fea
    00000627 A0 56                 1362 	.dw #0x56a0
    00000629 40 29                 1363 	.dw #0x2940
    0000062B                       1364 _green_pal:
    0000062B FF 7F                 1365 	.dw #0x7fff
    0000062D F5 57                 1366 	.dw #0x57f5
    0000062F A0 02                 1367 	.dw #0x02a0
    00000631 40 01                 1368 	.dw #0x0140
                                   1369 	.area _CODE
                                   1370 	.area _INITIALIZER
    00000000                       1371 __xinit__joyp:
    00000000 00                    1372 	.db #0x00	; 0
    00000001                       1373 __xinit__old_joyp:
    00000001 00                    1374 	.db #0x00	; 0
                                   1375 	.area _CABS (ABS)
