                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _DrawText
                                     12 	.globl _GetCharacterVRamTile
                                     13 	.globl _fill_bkg_rect
                                     14 	.globl _set_bkg_data
                                     15 	.globl _get_bkg_xy_addr
                                     16 	.globl _set_vram_byte
                                     17 	.globl _vsync
                                     18 ;--------------------------------------------------------
                                     19 ; special function registers
                                     20 ;--------------------------------------------------------
                                     21 ;--------------------------------------------------------
                                     22 ; ram data
                                     23 ;--------------------------------------------------------
                                     24 	.area _DATA
                                     25 ;--------------------------------------------------------
                                     26 ; ram data
                                     27 ;--------------------------------------------------------
                                     28 	.area _INITIALIZED
                                     29 ;--------------------------------------------------------
                                     30 ; absolute external ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area _DABS (ABS)
                                     33 ;--------------------------------------------------------
                                     34 ; global & static initialisations
                                     35 ;--------------------------------------------------------
                                     36 	.area _HOME
                                     37 	.area _GSINIT
                                     38 	.area _GSFINAL
                                     39 	.area _GSINIT
                                     40 ;--------------------------------------------------------
                                     41 ; Home
                                     42 ;--------------------------------------------------------
                                     43 	.area _HOME
                                     44 	.area _HOME
                                     45 ;--------------------------------------------------------
                                     46 ; code
                                     47 ;--------------------------------------------------------
                                     48 	.area _CODE
                                     49 ;src/main.c:7: uint8_t GetCharacterVRamTile(char character) {
                                     50 ;	---------------------------------
                                     51 ; Function GetCharacterVRamTile
                                     52 ; ---------------------------------
    00000000                         53 _GetCharacterVRamTile::
    00000000 47               [ 4]   54 	ld	b, a
                                     55 ;src/main.c:9: uint8_t vramTile=0;
    00000001 0E 00            [ 8]   56 	ld	c, #0x00
                                     57 ;src/main.c:15: if      (character >= 'a' && character <= 'z') vramTile = (character - 'a') + 1;
    00000003 78               [ 4]   58 	ld	a, b
    00000004 EE 80            [ 8]   59 	xor	a, #0x80
    00000006 D6 E1            [ 8]   60 	sub	a, #0xe1
    00000008 38 1E            [12]   61 	jr	C, 00120$
    0000000A 58               [ 4]   62 	ld	e, b
    0000000B 3E 7A            [ 8]   63 	ld	a,#0x7a
    0000000D 57               [ 4]   64 	ld	d,a
    0000000E 90               [ 4]   65 	sub	a, b
    0000000F CB 7B            [ 8]   66 	bit	7, e
    00000011 28 07            [12]   67 	jr	Z, 00230$
    00000013 CB 7A            [ 8]   68 	bit	7, d
    00000015 20 08            [12]   69 	jr	NZ, 00231$
    00000017 BF               [ 4]   70 	cp	a, a
    00000018 18 05            [12]   71 	jr	00231$
    0000001A                         72 00230$:
    0000001A CB 7A            [ 8]   73 	bit	7, d
    0000001C 28 01            [12]   74 	jr	Z, 00231$
    0000001E 37               [ 4]   75 	scf
    0000001F                         76 00231$:
    0000001F 38 07            [12]   77 	jr	C, 00120$
    00000021 78               [ 4]   78 	ld	a, b
    00000022 C6 A0            [ 8]   79 	add	a, #0xa0
    00000024 4F               [ 4]   80 	ld	c, a
    00000025 C3rB9r00         [16]   81 	jp	00121$
    00000028                         82 00120$:
                                     83 ;src/main.c:16: else if (character >= 'A' && character <= 'Z') vramTile = (character - 'A') + 1;
    00000028 78               [ 4]   84 	ld	a, b
    00000029 EE 80            [ 8]   85 	xor	a, #0x80
    0000002B D6 C1            [ 8]   86 	sub	a, #0xc1
    0000002D 38 1D            [12]   87 	jr	C, 00116$
    0000002F 58               [ 4]   88 	ld	e, b
    00000030 3E 5A            [ 8]   89 	ld	a,#0x5a
    00000032 57               [ 4]   90 	ld	d,a
    00000033 90               [ 4]   91 	sub	a, b
    00000034 CB 7B            [ 8]   92 	bit	7, e
    00000036 28 07            [12]   93 	jr	Z, 00232$
    00000038 CB 7A            [ 8]   94 	bit	7, d
    0000003A 20 08            [12]   95 	jr	NZ, 00233$
    0000003C BF               [ 4]   96 	cp	a, a
    0000003D 18 05            [12]   97 	jr	00233$
    0000003F                         98 00232$:
    0000003F CB 7A            [ 8]   99 	bit	7, d
    00000041 28 01            [12]  100 	jr	Z, 00233$
    00000043 37               [ 4]  101 	scf
    00000044                        102 00233$:
    00000044 38 06            [12]  103 	jr	C, 00116$
    00000046 78               [ 4]  104 	ld	a, b
    00000047 C6 C0            [ 8]  105 	add	a, #0xc0
    00000049 4F               [ 4]  106 	ld	c, a
    0000004A 18 6D            [12]  107 	jr	00121$
    0000004C                        108 00116$:
                                    109 ;src/main.c:17: else if (character >= '0' && character <= '9') vramTile = (character - '0') + 27;
    0000004C 78               [ 4]  110 	ld	a, b
    0000004D EE 80            [ 8]  111 	xor	a, #0x80
    0000004F D6 B0            [ 8]  112 	sub	a, #0xb0
    00000051 38 1D            [12]  113 	jr	C, 00112$
    00000053 58               [ 4]  114 	ld	e, b
    00000054 3E 39            [ 8]  115 	ld	a,#0x39
    00000056 57               [ 4]  116 	ld	d,a
    00000057 90               [ 4]  117 	sub	a, b
    00000058 CB 7B            [ 8]  118 	bit	7, e
    0000005A 28 07            [12]  119 	jr	Z, 00234$
    0000005C CB 7A            [ 8]  120 	bit	7, d
    0000005E 20 08            [12]  121 	jr	NZ, 00235$
    00000060 BF               [ 4]  122 	cp	a, a
    00000061 18 05            [12]  123 	jr	00235$
    00000063                        124 00234$:
    00000063 CB 7A            [ 8]  125 	bit	7, d
    00000065 28 01            [12]  126 	jr	Z, 00235$
    00000067 37               [ 4]  127 	scf
    00000068                        128 00235$:
    00000068 38 06            [12]  129 	jr	C, 00112$
    0000006A 78               [ 4]  130 	ld	a, b
    0000006B C6 EB            [ 8]  131 	add	a, #0xeb
    0000006D 4F               [ 4]  132 	ld	c, a
    0000006E 18 49            [12]  133 	jr	00121$
    00000070                        134 00112$:
                                    135 ;src/main.c:19: switch(character) {
    00000070 78               [ 4]  136 	ld	a,b
    00000071 FE 21            [ 8]  137 	cp	a,#0x21
    00000073 28 22            [12]  138 	jr	Z, 00101$
    00000075 FE 2C            [ 8]  139 	cp	a,#0x2c
    00000077 28 32            [12]  140 	jr	Z, 00106$
    00000079 FE 2E            [ 8]  141 	cp	a,#0x2e
    0000007B 28 32            [12]  142 	jr	Z, 00107$
    0000007D FE 2F            [ 8]  143 	cp	a,#0x2f
    0000007F 28 22            [12]  144 	jr	Z, 00104$
    00000081 FE 3A            [ 8]  145 	cp	a,#0x3a
    00000083 28 16            [12]  146 	jr	Z, 00102$
    00000085 FE 3C            [ 8]  147 	cp	a,#0x3c
    00000087 28 2A            [12]  148 	jr	Z, 00108$
    00000089 FE 3D            [ 8]  149 	cp	a,#0x3d
    0000008B 28 1A            [12]  150 	jr	Z, 00105$
    0000008D FE 3E            [ 8]  151 	cp	a,#0x3e
    0000008F 28 26            [12]  152 	jr	Z, 00109$
    00000091 D6 3F            [ 8]  153 	sub	a, #0x3f
    00000093 28 0A            [12]  154 	jr	Z, 00103$
    00000095 18 22            [12]  155 	jr	00121$
                                    156 ;src/main.c:20: case '!': vramTile = 37; break;
    00000097                        157 00101$:
    00000097 0E 25            [ 8]  158 	ld	c, #0x25
    00000099 18 1E            [12]  159 	jr	00121$
                                    160 ;src/main.c:21: case ':': vramTile = 38; break;
    0000009B                        161 00102$:
    0000009B 0E 26            [ 8]  162 	ld	c, #0x26
    0000009D 18 1A            [12]  163 	jr	00121$
                                    164 ;src/main.c:22: case '?': vramTile = 39; break;
    0000009F                        165 00103$:
    0000009F 0E 27            [ 8]  166 	ld	c, #0x27
    000000A1 18 16            [12]  167 	jr	00121$
                                    168 ;src/main.c:23: case '/': vramTile = 40; break;
    000000A3                        169 00104$:
    000000A3 0E 28            [ 8]  170 	ld	c, #0x28
    000000A5 18 12            [12]  171 	jr	00121$
                                    172 ;src/main.c:24: case '=': vramTile = 41; break;
    000000A7                        173 00105$:
    000000A7 0E 29            [ 8]  174 	ld	c, #0x29
    000000A9 18 0E            [12]  175 	jr	00121$
                                    176 ;src/main.c:25: case ',': vramTile = 42; break;
    000000AB                        177 00106$:
    000000AB 0E 2A            [ 8]  178 	ld	c, #0x2a
    000000AD 18 0A            [12]  179 	jr	00121$
                                    180 ;src/main.c:26: case '.': vramTile = 43; break;
    000000AF                        181 00107$:
    000000AF 0E 2B            [ 8]  182 	ld	c, #0x2b
    000000B1 18 06            [12]  183 	jr	00121$
                                    184 ;src/main.c:27: case '<': vramTile = 44; break;
    000000B3                        185 00108$:
    000000B3 0E 2C            [ 8]  186 	ld	c, #0x2c
    000000B5 18 02            [12]  187 	jr	00121$
                                    188 ;src/main.c:28: case '>': vramTile = 45; break;
    000000B7                        189 00109$:
    000000B7 0E 2D            [ 8]  190 	ld	c, #0x2d
                                    191 ;src/main.c:29: }
    000000B9                        192 00121$:
                                    193 ;src/main.c:32: return vramTile;
    000000B9 79               [ 4]  194 	ld	a, c
                                    195 ;src/main.c:34: }
    000000BA C9               [16]  196 	ret
                                    197 ;src/main.c:36: void DrawText( char* text,uint8_t typewriterDelay){
                                    198 ;	---------------------------------
                                    199 ; Function DrawText
                                    200 ; ---------------------------------
    000000BB                        201 _DrawText::
    000000BB E8 F4            [16]  202 	add	sp, #-12
    000000BD F8 04            [12]  203 	ldhl	sp,	#4
    000000BF 73               [ 8]  204 	ld	(hl), e
    000000C0 23               [ 8]  205 	inc	hl
    000000C1 72               [ 8]  206 	ld	(hl), d
    000000C2 2B               [ 8]  207 	dec	hl
    000000C3 2B               [ 8]  208 	dec	hl
    000000C4 77               [ 8]  209 	ld	(hl), a
                                    210 ;src/main.c:42: uint8_t* vramAddress = get_bkg_xy_addr(column,row);
    000000C5 AF               [ 4]  211 	xor	a, a
    000000C6 0F               [ 4]  212 	rrca
    000000C7 F5               [16]  213 	push	af
    000000C8 CDr00r00         [24]  214 	call	_get_bkg_xy_addr
    000000CB E1               [12]  215 	pop	hl
    000000CC F8 06            [12]  216 	ldhl	sp,	#6
    000000CE 7B               [ 4]  217 	ld	a, e
    000000CF 22               [ 8]  218 	ld	(hl+), a
    000000D0 72               [ 8]  219 	ld	(hl), d
                                    220 ;src/main.c:45: uint8_t columnIndex=0;
    000000D1 F8 08            [12]  221 	ldhl	sp,	#8
                                    222 ;src/main.c:47: while(text[index]!='\0'){
    000000D3 AF               [ 4]  223 	xor	a, a
    000000D4 22               [ 8]  224 	ld	(hl+), a
    000000D5 22               [ 8]  225 	ld	(hl+), a
    000000D6 AF               [ 4]  226 	xor	a, a
    000000D7 22               [ 8]  227 	ld	(hl+), a
    000000D8 77               [ 8]  228 	ld	(hl), a
    000000D9                        229 00106$:
    000000D9 F8 0A            [12]  230 	ldhl	sp,#10
    000000DB 2A               [ 8]  231 	ld	a, (hl+)
    000000DC 5F               [ 4]  232 	ld	e, a
    000000DD 56               [ 8]  233 	ld	d, (hl)
    000000DE F8 04            [12]  234 	ldhl	sp,	#4
    000000E0 2A               [ 8]  235 	ld	a,	(hl+)
    000000E1 66               [ 8]  236 	ld	h, (hl)
    000000E2 6F               [ 4]  237 	ld	l, a
    000000E3 19               [ 8]  238 	add	hl, de
    000000E4 E5               [16]  239 	push	hl
    000000E5 7D               [ 4]  240 	ld	a, l
    000000E6 F8 03            [12]  241 	ldhl	sp,	#3
    000000E8 77               [ 8]  242 	ld	(hl), a
    000000E9 E1               [12]  243 	pop	hl
    000000EA 7C               [ 4]  244 	ld	a, h
    000000EB F8 02            [12]  245 	ldhl	sp,	#2
    000000ED 32               [ 8]  246 	ld	(hl-), a
    000000EE 2A               [ 8]  247 	ld	a, (hl+)
    000000EF 5F               [ 4]  248 	ld	e, a
    000000F0 56               [ 8]  249 	ld	d, (hl)
    000000F1 1A               [ 8]  250 	ld	a, (de)
                                    251 ;src/main.c:49: char character = text[index];
                                    252 ;src/main.c:52: uint8_t vramTile = GetCharacterVRamTile(character);
    000000F2 77               [ 8]  253 	ld	(hl),a
    000000F3 B7               [ 4]  254 	or	a,a
    000000F4 28 58            [12]  255 	jr	Z, 00112$
    000000F6 CDr00r00         [24]  256 	call	_GetCharacterVRamTile
    000000F9 F8 00            [12]  257 	ldhl	sp,	#0
    000000FB 77               [ 8]  258 	ld	(hl), a
                                    259 ;src/main.c:54: set_vram_byte(vramAddress++,vramTile);
    000000FC F8 06            [12]  260 	ldhl	sp,	#6
    000000FE 7E               [ 8]  261 	ld	a, (hl)
    000000FF F8 01            [12]  262 	ldhl	sp,	#1
    00000101 77               [ 8]  263 	ld	(hl), a
    00000102 F8 07            [12]  264 	ldhl	sp,	#7
    00000104 7E               [ 8]  265 	ld	a, (hl)
    00000105 F8 02            [12]  266 	ldhl	sp,	#2
    00000107 77               [ 8]  267 	ld	(hl), a
    00000108 F8 06            [12]  268 	ldhl	sp,	#6
    0000010A 34               [12]  269 	inc	(hl)
    0000010B 20 02            [12]  270 	jr	NZ, 00157$
    0000010D 23               [ 8]  271 	inc	hl
    0000010E 34               [12]  272 	inc	(hl)
    0000010F                        273 00157$:
    0000010F F8 00            [12]  274 	ldhl	sp,	#0
    00000111 2A               [ 8]  275 	ld	a, (hl+)
    00000112 5E               [ 8]  276 	ld	e, (hl)
    00000113 23               [ 8]  277 	inc	hl
    00000114 56               [ 8]  278 	ld	d, (hl)
    00000115 CDr00r00         [24]  279 	call	_set_vram_byte
                                    280 ;src/main.c:60: index++;
    00000118 F8 0A            [12]  281 	ldhl	sp,	#10
    0000011A 34               [12]  282 	inc	(hl)
    0000011B 20 02            [12]  283 	jr	NZ, 00158$
    0000011D 23               [ 8]  284 	inc	hl
    0000011E 34               [12]  285 	inc	(hl)
    0000011F                        286 00158$:
                                    287 ;src/main.c:61: columnIndex++;
    0000011F F8 08            [12]  288 	ldhl	sp,	#8
    00000121 34               [12]  289 	inc	(hl)
                                    290 ;src/main.c:64: if(columnIndex>=DEVICE_SCREEN_WIDTH){
    00000122 7E               [ 8]  291 	ld	a, (hl)
    00000123 D6 14            [ 8]  292 	sub	a, #0x14
    00000125 38 13            [12]  293 	jr	C, 00102$
                                    294 ;src/main.c:67: vramAddress = get_bkg_xy_addr(column,++row);
    00000127 23               [ 8]  295 	inc	hl
    00000128 34               [12]  296 	inc	(hl)
    00000129 66               [ 8]  297 	ld	h, (hl)
    0000012A 2E 00            [ 8]  298 	ld	l, #0x00
    0000012C E5               [16]  299 	push	hl
    0000012D CDr00r00         [24]  300 	call	_get_bkg_xy_addr
    00000130 E1               [12]  301 	pop	hl
    00000131 F8 06            [12]  302 	ldhl	sp,	#6
    00000133 7B               [ 4]  303 	ld	a, e
    00000134 22               [ 8]  304 	ld	(hl+), a
    00000135 72               [ 8]  305 	ld	(hl), d
                                    306 ;src/main.c:69: columnIndex=0;
    00000136 F8 08            [12]  307 	ldhl	sp,	#8
    00000138 36 00            [12]  308 	ld	(hl), #0x00
    0000013A                        309 00102$:
                                    310 ;src/main.c:72: if(typewriterDelay>0){
    0000013A F8 03            [12]  311 	ldhl	sp,	#3
    0000013C 7E               [ 8]  312 	ld	a, (hl)
    0000013D B7               [ 4]  313 	or	a, a
    0000013E 28 99            [12]  314 	jr	Z, 00106$
                                    315 ;src/main.c:76: for(uint8_t i=0;i<typewriterDelay;i++){
    00000140 0E 00            [ 8]  316 	ld	c, #0x00
    00000142                        317 00110$:
    00000142 79               [ 4]  318 	ld	a, c
    00000143 F8 03            [12]  319 	ldhl	sp,	#3
    00000145 96               [ 8]  320 	sub	a, (hl)
    00000146 30 91            [12]  321 	jr	NC, 00106$
                                    322 ;src/main.c:78: vsync();
    00000148 CDr00r00         [24]  323 	call	_vsync
                                    324 ;src/main.c:76: for(uint8_t i=0;i<typewriterDelay;i++){
    0000014B 0C               [ 4]  325 	inc	c
    0000014C 18 F4            [12]  326 	jr	00110$
    0000014E                        327 00112$:
                                    328 ;src/main.c:83: }
    0000014E E8 0C            [16]  329 	add	sp, #12
    00000150 C9               [16]  330 	ret
                                    331 ;src/main.c:85: void main(void)
                                    332 ;	---------------------------------
                                    333 ; Function main
                                    334 ; ---------------------------------
    00000151                        335 _main::
                                    336 ;src/main.c:87: SHOW_BKG;
    00000151 F0r00            [12]  337 	ldh	a, (_LCDC_REG + 0)
    00000153 F6 80            [ 8]  338 	or	a, #0x80
    00000155 E0r00            [12]  339 	ldh	(_LCDC_REG + 0), a
                                    340 ;src/main.c:89: set_native_tile_data(0,Font_TILE_COUNT,Font_tiles);
                                    341 ;../../../include/gb/gb.h:2146: set_bkg_data(first_tile, nb_tiles, data);
    00000157 11r00r00         [12]  342 	ld	de, #_Font_tiles
    0000015A D5               [16]  343 	push	de
    0000015B 21 00 2E         [12]  344 	ld	hl, #0x2e00
    0000015E E5               [16]  345 	push	hl
    0000015F CDr00r00         [24]  346 	call	_set_bkg_data
    00000162 E8 04            [16]  347 	add	sp, #4
                                    348 ;src/main.c:91: fill_bkg_rect(0,0,DEVICE_SCREEN_WIDTH,DEVICE_SCREEN_HEIGHT,0);
    00000164 AF               [ 4]  349 	xor	a, a
    00000165 67               [ 4]  350 	ld	h, a
    00000166 2E 12            [ 8]  351 	ld	l, #0x12
    00000168 E5               [16]  352 	push	hl
    00000169 3E 14            [ 8]  353 	ld	a, #0x14
    0000016B F5               [16]  354 	push	af
    0000016C 33               [ 8]  355 	inc	sp
    0000016D AF               [ 4]  356 	xor	a, a
    0000016E 0F               [ 4]  357 	rrca
    0000016F F5               [16]  358 	push	af
    00000170 CDr00r00         [24]  359 	call	_fill_bkg_rect
    00000173 E8 05            [16]  360 	add	sp, #5
                                    361 ;src/main.c:94: DrawText("This is a way to draw text on the screen in GBDK. The code will automatically jump to a new line, when it reaches the end of the row.",THREE_FRAMES);
    00000175 3E 03            [ 8]  362 	ld	a, #0x03
    00000177 11r7Dr01         [12]  363 	ld	de, #___str_0
                                    364 ;src/main.c:95: }
    0000017A C3rBBr00         [16]  365 	jp	_DrawText
    0000017D                        366 ___str_0:
    0000017D 54 68 69 73 20 69 73   367 	.ascii "This is a way to draw text on the screen in GBDK. The code w"
             20 61 20 77 61 79 20
             74 6F 20 64 72 61 77
             20 74 65 78 74 20 6F
             6E 20 74 68 65 20 73
             63 72 65 65 6E 20 69
             6E 20 47 42 44 4B 2E
             20 54 68 65 20 63 6F
             64 65 20 77
    000001B9 69 6C 6C 20 61 75 74   368 	.ascii "ill automatically jump to a new line, when it reaches the en"
             6F 6D 61 74 69 63 61
             6C 6C 79 20 6A 75 6D
             70 20 74 6F 20 61 20
             6E 65 77 20 6C 69 6E
             65 2C 20 77 68 65 6E
             20 69 74 20 72 65 61
             63 68 65 73 20 74 68
             65 20 65 6E
    000001F5 64 20 6F 66 20 74 68   369 	.ascii "d of the row."
             65 20 72 6F 77 2E
    00000202 00                     370 	.db 0x00
                                    371 	.area _CODE
                                    372 	.area _INITIALIZER
                                    373 	.area _CABS (ABS)
