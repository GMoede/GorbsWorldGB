                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _DrawText
                                     12 	.globl _GetCharacterVRamTile
                                     13 	.globl _get_bkg_xy_addr
                                     14 	.globl _set_vram_byte
                                     15 	.globl _fill_rect_compat
                                     16 	.globl _set_native_tile_data
                                     17 	.globl _vsync
                                     18 ;--------------------------------------------------------
                                     19 ; special function registers
                                     20 ;--------------------------------------------------------
                         00000000    21 _GG_STATE	=	0x0000
                         00000001    22 _GG_EXT_7BIT	=	0x0001
                         00000002    23 _GG_EXT_CTL	=	0x0002
                         00000003    24 _GG_SIO_SEND	=	0x0003
                         00000004    25 _GG_SIO_RECV	=	0x0004
                         00000005    26 _GG_SIO_CTL	=	0x0005
                         00000006    27 _GG_SOUND_PAN	=	0x0006
                         0000003E    28 _MEMORY_CTL	=	0x003e
                         0000003F    29 _JOY_CTL	=	0x003f
                         0000007E    30 _VCOUNTER	=	0x007e
                         0000007F    31 _PSG	=	0x007f
                         0000007F    32 _HCOUNTER	=	0x007f
                         000000BE    33 _VDP_DATA	=	0x00be
                         000000BF    34 _VDP_CMD	=	0x00bf
                         000000BF    35 _VDP_STATUS	=	0x00bf
                         000000DC    36 _JOY_PORT1	=	0x00dc
                         000000DD    37 _JOY_PORT2	=	0x00dd
                         000000F0    38 _FMADDRESS	=	0x00f0
                         000000F1    39 _FMDATA	=	0x00f1
                         000000F2    40 _AUDIOCTRL	=	0x00f2
                                     41 ;--------------------------------------------------------
                                     42 ; ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area _DATA
                         0000FFFC    45 _RAM_CONTROL	=	0xfffc
                         0000FFF8    46 _GLASSES_3D	=	0xfff8
                         0000FFFD    47 _MAP_FRAME0	=	0xfffd
                         0000FFFE    48 _MAP_FRAME1	=	0xfffe
                         0000FFFF    49 _MAP_FRAME2	=	0xffff
                                     50 ;--------------------------------------------------------
                                     51 ; ram data
                                     52 ;--------------------------------------------------------
                                     53 	.area _INITIALIZED
                                     54 ;--------------------------------------------------------
                                     55 ; absolute external ram data
                                     56 ;--------------------------------------------------------
                                     57 	.area _DABS (ABS)
                                     58 ;--------------------------------------------------------
                                     59 ; global & static initialisations
                                     60 ;--------------------------------------------------------
                                     61 	.area _HOME
                                     62 	.area _GSINIT
                                     63 	.area _GSFINAL
                                     64 	.area _GSINIT
                                     65 ;--------------------------------------------------------
                                     66 ; Home
                                     67 ;--------------------------------------------------------
                                     68 	.area _HOME
                                     69 	.area _HOME
                                     70 ;--------------------------------------------------------
                                     71 ; code
                                     72 ;--------------------------------------------------------
                                     73 	.area _CODE
                                     74 ;src/main.c:7: uint8_t GetCharacterVRamTile(char character) {
                                     75 ;	---------------------------------
                                     76 ; Function GetCharacterVRamTile
                                     77 ; ---------------------------------
    00000000                         78 _GetCharacterVRamTile::
    00000000 47               [ 4]   79 	ld	b, a
                                     80 ;src/main.c:9: uint8_t vramTile=0;
    00000001 0E 00            [ 7]   81 	ld	c, #0x00
                                     82 ;src/main.c:15: if      (character >= 'a' && character <= 'z') vramTile = (character - 'a') + 1;
    00000003 78               [ 4]   83 	ld	a, b
    00000004 EE 80            [ 7]   84 	xor	a, #0x80
    00000006 D6 E1            [ 7]   85 	sub	a, #0xe1
    00000008 38 11            [12]   86 	jr	C, 00120$
    0000000A 3E 7A            [ 7]   87 	ld	a, #0x7a
    0000000C 90               [ 4]   88 	sub	a, b
    0000000D E2r12r00         [10]   89 	jp	PO, 00230$
    00000010 EE 80            [ 7]   90 	xor	a, #0x80
    00000012                         91 00230$:
    00000012 FAr1Br00         [10]   92 	jp	M, 00120$
    00000015 78               [ 4]   93 	ld	a, b
    00000016 C6 A0            [ 7]   94 	add	a, #0xa0
    00000018 4F               [ 4]   95 	ld	c, a
    00000019 18 79            [12]   96 	jr	00121$
    0000001B                         97 00120$:
                                     98 ;src/main.c:16: else if (character >= 'A' && character <= 'Z') vramTile = (character - 'A') + 1;
    0000001B 78               [ 4]   99 	ld	a, b
    0000001C EE 80            [ 7]  100 	xor	a, #0x80
    0000001E D6 C1            [ 7]  101 	sub	a, #0xc1
    00000020 38 11            [12]  102 	jr	C, 00116$
    00000022 3E 5A            [ 7]  103 	ld	a, #0x5a
    00000024 90               [ 4]  104 	sub	a, b
    00000025 E2r2Ar00         [10]  105 	jp	PO, 00231$
    00000028 EE 80            [ 7]  106 	xor	a, #0x80
    0000002A                        107 00231$:
    0000002A FAr33r00         [10]  108 	jp	M, 00116$
    0000002D 78               [ 4]  109 	ld	a, b
    0000002E C6 C0            [ 7]  110 	add	a, #0xc0
    00000030 4F               [ 4]  111 	ld	c, a
    00000031 18 61            [12]  112 	jr	00121$
    00000033                        113 00116$:
                                    114 ;src/main.c:17: else if (character >= '0' && character <= '9') vramTile = (character - '0') + 27;
    00000033 78               [ 4]  115 	ld	a, b
    00000034 EE 80            [ 7]  116 	xor	a, #0x80
    00000036 D6 B0            [ 7]  117 	sub	a, #0xb0
    00000038 38 11            [12]  118 	jr	C, 00112$
    0000003A 3E 39            [ 7]  119 	ld	a, #0x39
    0000003C 90               [ 4]  120 	sub	a, b
    0000003D E2r42r00         [10]  121 	jp	PO, 00232$
    00000040 EE 80            [ 7]  122 	xor	a, #0x80
    00000042                        123 00232$:
    00000042 FAr4Br00         [10]  124 	jp	M, 00112$
    00000045 78               [ 4]  125 	ld	a, b
    00000046 C6 EB            [ 7]  126 	add	a, #0xeb
    00000048 4F               [ 4]  127 	ld	c, a
    00000049 18 49            [12]  128 	jr	00121$
    0000004B                        129 00112$:
                                    130 ;src/main.c:19: switch(character) {
    0000004B 78               [ 4]  131 	ld	a,b
    0000004C FE 21            [ 7]  132 	cp	a,#0x21
    0000004E 28 22            [12]  133 	jr	Z, 00101$
    00000050 FE 2C            [ 7]  134 	cp	a,#0x2c
    00000052 28 32            [12]  135 	jr	Z, 00106$
    00000054 FE 2E            [ 7]  136 	cp	a,#0x2e
    00000056 28 32            [12]  137 	jr	Z, 00107$
    00000058 FE 2F            [ 7]  138 	cp	a,#0x2f
    0000005A 28 22            [12]  139 	jr	Z, 00104$
    0000005C FE 3A            [ 7]  140 	cp	a,#0x3a
    0000005E 28 16            [12]  141 	jr	Z, 00102$
    00000060 FE 3C            [ 7]  142 	cp	a,#0x3c
    00000062 28 2A            [12]  143 	jr	Z, 00108$
    00000064 FE 3D            [ 7]  144 	cp	a,#0x3d
    00000066 28 1A            [12]  145 	jr	Z, 00105$
    00000068 FE 3E            [ 7]  146 	cp	a,#0x3e
    0000006A 28 26            [12]  147 	jr	Z, 00109$
    0000006C D6 3F            [ 7]  148 	sub	a, #0x3f
    0000006E 28 0A            [12]  149 	jr	Z, 00103$
    00000070 18 22            [12]  150 	jr	00121$
                                    151 ;src/main.c:20: case '!': vramTile = 37; break;
    00000072                        152 00101$:
    00000072 0E 25            [ 7]  153 	ld	c, #0x25
    00000074 18 1E            [12]  154 	jr	00121$
                                    155 ;src/main.c:21: case ':': vramTile = 38; break;
    00000076                        156 00102$:
    00000076 0E 26            [ 7]  157 	ld	c, #0x26
    00000078 18 1A            [12]  158 	jr	00121$
                                    159 ;src/main.c:22: case '?': vramTile = 39; break;
    0000007A                        160 00103$:
    0000007A 0E 27            [ 7]  161 	ld	c, #0x27
    0000007C 18 16            [12]  162 	jr	00121$
                                    163 ;src/main.c:23: case '/': vramTile = 40; break;
    0000007E                        164 00104$:
    0000007E 0E 28            [ 7]  165 	ld	c, #0x28
    00000080 18 12            [12]  166 	jr	00121$
                                    167 ;src/main.c:24: case '=': vramTile = 41; break;
    00000082                        168 00105$:
    00000082 0E 29            [ 7]  169 	ld	c, #0x29
    00000084 18 0E            [12]  170 	jr	00121$
                                    171 ;src/main.c:25: case ',': vramTile = 42; break;
    00000086                        172 00106$:
    00000086 0E 2A            [ 7]  173 	ld	c, #0x2a
    00000088 18 0A            [12]  174 	jr	00121$
                                    175 ;src/main.c:26: case '.': vramTile = 43; break;
    0000008A                        176 00107$:
    0000008A 0E 2B            [ 7]  177 	ld	c, #0x2b
    0000008C 18 06            [12]  178 	jr	00121$
                                    179 ;src/main.c:27: case '<': vramTile = 44; break;
    0000008E                        180 00108$:
    0000008E 0E 2C            [ 7]  181 	ld	c, #0x2c
    00000090 18 02            [12]  182 	jr	00121$
                                    183 ;src/main.c:28: case '>': vramTile = 45; break;
    00000092                        184 00109$:
    00000092 0E 2D            [ 7]  185 	ld	c, #0x2d
                                    186 ;src/main.c:29: }
    00000094                        187 00121$:
                                    188 ;src/main.c:32: return vramTile;
    00000094 79               [ 4]  189 	ld	a, c
                                    190 ;src/main.c:34: }
    00000095 C9               [10]  191 	ret
                                    192 ;src/main.c:36: void DrawText( char* text,uint8_t typewriterDelay){
                                    193 ;	---------------------------------
                                    194 ; Function DrawText
                                    195 ; ---------------------------------
    00000096                        196 _DrawText::
    00000096 DD E5            [15]  197 	push	ix
    00000098 DD 21 00 00      [14]  198 	ld	ix,#0
    0000009C DD 39            [15]  199 	add	ix,sp
    0000009E FD 21 F3 FF      [14]  200 	ld	iy, #-13
    000000A2 FD 39            [15]  201 	add	iy, sp
    000000A4 FD F9            [10]  202 	ld	sp, iy
    000000A6 DD 75 FA         [19]  203 	ld	-6 (ix), l
    000000A9 DD 74 FB         [19]  204 	ld	-5 (ix), h
                                    205 ;src/main.c:42: uint8_t* vramAddress = get_bkg_xy_addr(column,row);
    000000AC 21 00 00         [10]  206 	ld	hl, #0x00
    000000AF E5               [11]  207 	push	hl
    000000B0 CDr00r00         [17]  208 	call	_get_bkg_xy_addr
    000000B3 E3               [19]  209 	ex	(sp), hl
                                    210 ;src/main.c:45: uint8_t columnIndex=0;
    000000B4 DD 36 FC 00      [19]  211 	ld	-4 (ix), #0x00
                                    212 ;src/main.c:47: while(text[index]!='\0'){
    000000B8 DD 36 FD 00      [19]  213 	ld	-3 (ix), #0x00
    000000BC AF               [ 4]  214 	xor	a, a
    000000BD DD 77 FE         [19]  215 	ld	-2 (ix), a
    000000C0 DD 77 FF         [19]  216 	ld	-1 (ix), a
    000000C3                        217 00106$:
    000000C3 DD 7E FA         [19]  218 	ld	a, -6 (ix)
    000000C6 DD 86 FE         [19]  219 	add	a, -2 (ix)
    000000C9 DD 77 F8         [19]  220 	ld	-8 (ix), a
    000000CC DD 7E FB         [19]  221 	ld	a, -5 (ix)
    000000CF DD 8E FF         [19]  222 	adc	a, -1 (ix)
    000000D2 DD 77 F9         [19]  223 	ld	-7 (ix), a
    000000D5 DD 6E F8         [19]  224 	ld	l, -8 (ix)
    000000D8 DD 66 F9         [19]  225 	ld	h, -7 (ix)
    000000DB 7E               [ 7]  226 	ld	a, (hl)
    000000DC DD 77 F9         [19]  227 	ld	-7 (ix), a
    000000DF B7               [ 4]  228 	or	a, a
    000000E0 CAr6Dr01         [10]  229 	jp	Z, 00112$
                                    230 ;src/main.c:49: char character = text[index];
                                    231 ;src/main.c:52: uint8_t vramTile = GetCharacterVRamTile(character);
    000000E3 DD 7E F9         [19]  232 	ld	a, -7 (ix)
    000000E6 CDr00r00         [17]  233 	call	_GetCharacterVRamTile
    000000E9 DD 77 F5         [19]  234 	ld	-11 (ix), a
                                    235 ;src/main.c:54: set_vram_byte(vramAddress++,vramTile);
    000000EC DD 7E F3         [19]  236 	ld	a, -13 (ix)
    000000EF DD 77 F6         [19]  237 	ld	-10 (ix), a
    000000F2 DD 7E F4         [19]  238 	ld	a, -12 (ix)
    000000F5 DD 77 F7         [19]  239 	ld	-9 (ix), a
    000000F8 DD 7E F3         [19]  240 	ld	a, -13 (ix)
    000000FB C6 01            [ 7]  241 	add	a, #0x01
    000000FD DD 77 F8         [19]  242 	ld	-8 (ix), a
    00000100 DD 7E F4         [19]  243 	ld	a, -12 (ix)
    00000103 CE 00            [ 7]  244 	adc	a, #0x00
    00000105 DD 77 F9         [19]  245 	ld	-7 (ix), a
    00000108 DD 7E F5         [19]  246 	ld	a, -11 (ix)
    0000010B F5               [11]  247 	push	af
    0000010C 33               [ 6]  248 	inc	sp
    0000010D DD 6E F6         [19]  249 	ld	l, -10 (ix)
    00000110 DD 66 F7         [19]  250 	ld	h, -9 (ix)
    00000113 E5               [11]  251 	push	hl
    00000114 CDr00r00         [17]  252 	call	_set_vram_byte
                                    253 ;src/main.c:57: set_vram_byte(vramAddress++,0);
    00000117 DD 4E F8         [19]  254 	ld	c, -8 (ix)
    0000011A DD 46 F9         [19]  255 	ld	b, -7 (ix)
    0000011D DD 7E F8         [19]  256 	ld	a, -8 (ix)
    00000120 C6 01            [ 7]  257 	add	a, #0x01
    00000122 DD 77 F3         [19]  258 	ld	-13 (ix), a
    00000125 DD 7E F9         [19]  259 	ld	a, -7 (ix)
    00000128 CE 00            [ 7]  260 	adc	a, #0x00
    0000012A DD 77 F4         [19]  261 	ld	-12 (ix), a
    0000012D AF               [ 4]  262 	xor	a, a
    0000012E F5               [11]  263 	push	af
    0000012F 33               [ 6]  264 	inc	sp
    00000130 C5               [11]  265 	push	bc
    00000131 CDr00r00         [17]  266 	call	_set_vram_byte
                                    267 ;src/main.c:60: index++;
    00000134 DD 34 FE         [23]  268 	inc	-2 (ix)
    00000137 20 03            [12]  269 	jr	NZ, 00157$
    00000139 DD 34 FF         [23]  270 	inc	-1 (ix)
    0000013C                        271 00157$:
                                    272 ;src/main.c:61: columnIndex++;
    0000013C DD 34 FC         [23]  273 	inc	-4 (ix)
                                    274 ;src/main.c:64: if(columnIndex>=DEVICE_SCREEN_WIDTH){
    0000013F DD 7E FC         [19]  275 	ld	a, -4 (ix)
    00000142 D6 20            [ 7]  276 	sub	a, #0x20
    00000144 38 11            [12]  277 	jr	C, 00102$
                                    278 ;src/main.c:67: vramAddress = get_bkg_xy_addr(column,++row);
    00000146 DD 34 FD         [23]  279 	inc	-3 (ix)
    00000149 DD 66 FD         [19]  280 	ld	h, -3 (ix)
    0000014C 2E 00            [ 7]  281 	ld	l, #0x00
    0000014E E5               [11]  282 	push	hl
    0000014F CDr00r00         [17]  283 	call	_get_bkg_xy_addr
    00000152 E3               [19]  284 	ex	(sp), hl
                                    285 ;src/main.c:69: columnIndex=0;
    00000153 DD 36 FC 00      [19]  286 	ld	-4 (ix), #0x00
    00000157                        287 00102$:
                                    288 ;src/main.c:72: if(typewriterDelay>0){
    00000157 DD 7E 04         [19]  289 	ld	a, 4 (ix)
    0000015A B7               [ 4]  290 	or	a, a
    0000015B CArC3r00         [10]  291 	jp	Z, 00106$
                                    292 ;src/main.c:76: for(uint8_t i=0;i<typewriterDelay;i++){
    0000015E 0E 00            [ 7]  293 	ld	c, #0x00
    00000160                        294 00110$:
    00000160 79               [ 4]  295 	ld	a, c
    00000161 DD 96 04         [19]  296 	sub	a, 4 (ix)
    00000164 D2rC3r00         [10]  297 	jp	NC, 00106$
                                    298 ;src/main.c:78: vsync();
    00000167 CDr00r00         [17]  299 	call	_vsync
                                    300 ;src/main.c:76: for(uint8_t i=0;i<typewriterDelay;i++){
    0000016A 0C               [ 4]  301 	inc	c
    0000016B 18 F3            [12]  302 	jr	00110$
    0000016D                        303 00112$:
                                    304 ;src/main.c:83: }
    0000016D DD F9            [10]  305 	ld	sp, ix
    0000016F DD E1            [14]  306 	pop	ix
    00000171 E1               [10]  307 	pop	hl
    00000172 33               [ 6]  308 	inc	sp
    00000173 E9               [ 4]  309 	jp	(hl)
                                    310 ;src/main.c:85: void main(void)
                                    311 ;	---------------------------------
                                    312 ; Function main
                                    313 ; ---------------------------------
    00000174                        314 _main::
                                    315 ;src/main.c:89: set_native_tile_data(0,Font_TILE_COUNT,Font_tiles);
    00000174 21r00r00         [10]  316 	ld	hl, #_Font_tiles
    00000177 E5               [11]  317 	push	hl
    00000178 11 2E 00         [10]  318 	ld	de, #0x002e
    0000017B 21 00 00         [10]  319 	ld	hl, #0x0000
    0000017E CDr00r00         [17]  320 	call	_set_native_tile_data
                                    321 ;src/main.c:91: fill_bkg_rect(0,0,DEVICE_SCREEN_WIDTH,DEVICE_SCREEN_HEIGHT,0);
    00000181 21 00 00         [10]  322 	ld	hl, #0x0000
    00000184 E5               [11]  323 	push	hl
    00000185 21 20 18         [10]  324 	ld	hl, #0x1820
    00000188 E5               [11]  325 	push	hl
    00000189 21 00 00         [10]  326 	ld	hl, #0x00
    0000018C E5               [11]  327 	push	hl
    0000018D CDr00r00         [17]  328 	call	_fill_rect_compat
                                    329 ;src/main.c:94: DrawText("This is a way to draw text on the screen in GBDK. The code will automatically jump to a new line, when it reaches the end of the row.",THREE_FRAMES);
    00000190 3E 03            [ 7]  330 	ld	a, #0x03
    00000192 F5               [11]  331 	push	af
    00000193 33               [ 6]  332 	inc	sp
    00000194 21r9Br01         [10]  333 	ld	hl, #___str_0
    00000197 CDr96r00         [17]  334 	call	_DrawText
                                    335 ;src/main.c:95: }
    0000019A C9               [10]  336 	ret
    0000019B                        337 ___str_0:
    0000019B 54 68 69 73 20 69 73   338 	.ascii "This is a way to draw text on the screen in GBDK. The code w"
             20 61 20 77 61 79 20
             74 6F 20 64 72 61 77
             20 74 65 78 74 20 6F
             6E 20 74 68 65 20 73
             63 72 65 65 6E 20 69
             6E 20 47 42 44 4B 2E
             20 54 68 65 20 63 6F
             64 65 20 77
    000001D7 69 6C 6C 20 61 75 74   339 	.ascii "ill automatically jump to a new line, when it reaches the en"
             6F 6D 61 74 69 63 61
             6C 6C 79 20 6A 75 6D
             70 20 74 6F 20 61 20
             6E 65 77 20 6C 69 6E
             65 2C 20 77 68 65 6E
             20 69 74 20 72 65 61
             63 68 65 73 20 74 68
             65 20 65 6E
    00000213 64 20 6F 66 20 74 68   340 	.ascii "d of the row."
             65 20 72 6F 77 2E
    00000220 00                     341 	.db 0x00
                                    342 	.area _CODE
                                    343 	.area _INITIALIZER
                                    344 	.area _CABS (ABS)
