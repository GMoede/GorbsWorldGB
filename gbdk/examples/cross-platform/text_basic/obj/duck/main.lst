                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _DrawText
                                     12 	.globl _GetCharacterVRamTile
                                     13 	.globl _fill_bkg_rect
                                     14 	.globl _set_bkg_data
                                     15 	.globl _get_bkg_xy_addr
                                     16 	.globl _set_vram_byte
                                     17 ;--------------------------------------------------------
                                     18 ; special function registers
                                     19 ;--------------------------------------------------------
                                     20 ;--------------------------------------------------------
                                     21 ; ram data
                                     22 ;--------------------------------------------------------
                                     23 	.area _DATA
                                     24 ;--------------------------------------------------------
                                     25 ; ram data
                                     26 ;--------------------------------------------------------
                                     27 	.area _INITIALIZED
                                     28 ;--------------------------------------------------------
                                     29 ; absolute external ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area _DABS (ABS)
                                     32 ;--------------------------------------------------------
                                     33 ; global & static initialisations
                                     34 ;--------------------------------------------------------
                                     35 	.area _HOME
                                     36 	.area _GSINIT
                                     37 	.area _GSFINAL
                                     38 	.area _GSINIT
                                     39 ;--------------------------------------------------------
                                     40 ; Home
                                     41 ;--------------------------------------------------------
                                     42 	.area _HOME
                                     43 	.area _HOME
                                     44 ;--------------------------------------------------------
                                     45 ; code
                                     46 ;--------------------------------------------------------
                                     47 	.area _CODE
                                     48 ;src/main.c:6: uint8_t GetCharacterVRamTile(char character) {
                                     49 ;	---------------------------------
                                     50 ; Function GetCharacterVRamTile
                                     51 ; ---------------------------------
    00000000                         52 _GetCharacterVRamTile::
    00000000 47               [ 4]   53 	ld	b, a
                                     54 ;src/main.c:8: uint8_t vramTile=0;
    00000001 0E 00            [ 8]   55 	ld	c, #0x00
                                     56 ;src/main.c:14: if      (character >= 'a' && character <= 'z') vramTile = (character - 'a') + 1;
    00000003 78               [ 4]   57 	ld	a, b
    00000004 EE 80            [ 8]   58 	xor	a, #0x80
    00000006 D6 E1            [ 8]   59 	sub	a, #0xe1
    00000008 38 1E            [12]   60 	jr	C, 00120$
    0000000A 58               [ 4]   61 	ld	e, b
    0000000B 3E 7A            [ 8]   62 	ld	a,#0x7a
    0000000D 57               [ 4]   63 	ld	d,a
    0000000E 90               [ 4]   64 	sub	a, b
    0000000F CB 7B            [ 8]   65 	bit	7, e
    00000011 28 07            [12]   66 	jr	Z, 00230$
    00000013 CB 7A            [ 8]   67 	bit	7, d
    00000015 20 08            [12]   68 	jr	NZ, 00231$
    00000017 BF               [ 4]   69 	cp	a, a
    00000018 18 05            [12]   70 	jr	00231$
    0000001A                         71 00230$:
    0000001A CB 7A            [ 8]   72 	bit	7, d
    0000001C 28 01            [12]   73 	jr	Z, 00231$
    0000001E 37               [ 4]   74 	scf
    0000001F                         75 00231$:
    0000001F 38 07            [12]   76 	jr	C, 00120$
    00000021 78               [ 4]   77 	ld	a, b
    00000022 C6 A0            [ 8]   78 	add	a, #0xa0
    00000024 4F               [ 4]   79 	ld	c, a
    00000025 C3rB9r00         [16]   80 	jp	00121$
    00000028                         81 00120$:
                                     82 ;src/main.c:15: else if (character >= 'A' && character <= 'Z') vramTile = (character - 'A') + 1;
    00000028 78               [ 4]   83 	ld	a, b
    00000029 EE 80            [ 8]   84 	xor	a, #0x80
    0000002B D6 C1            [ 8]   85 	sub	a, #0xc1
    0000002D 38 1D            [12]   86 	jr	C, 00116$
    0000002F 58               [ 4]   87 	ld	e, b
    00000030 3E 5A            [ 8]   88 	ld	a,#0x5a
    00000032 57               [ 4]   89 	ld	d,a
    00000033 90               [ 4]   90 	sub	a, b
    00000034 CB 7B            [ 8]   91 	bit	7, e
    00000036 28 07            [12]   92 	jr	Z, 00232$
    00000038 CB 7A            [ 8]   93 	bit	7, d
    0000003A 20 08            [12]   94 	jr	NZ, 00233$
    0000003C BF               [ 4]   95 	cp	a, a
    0000003D 18 05            [12]   96 	jr	00233$
    0000003F                         97 00232$:
    0000003F CB 7A            [ 8]   98 	bit	7, d
    00000041 28 01            [12]   99 	jr	Z, 00233$
    00000043 37               [ 4]  100 	scf
    00000044                        101 00233$:
    00000044 38 06            [12]  102 	jr	C, 00116$
    00000046 78               [ 4]  103 	ld	a, b
    00000047 C6 C0            [ 8]  104 	add	a, #0xc0
    00000049 4F               [ 4]  105 	ld	c, a
    0000004A 18 6D            [12]  106 	jr	00121$
    0000004C                        107 00116$:
                                    108 ;src/main.c:16: else if (character >= '0' && character <= '9') vramTile = (character - '0') + 27;
    0000004C 78               [ 4]  109 	ld	a, b
    0000004D EE 80            [ 8]  110 	xor	a, #0x80
    0000004F D6 B0            [ 8]  111 	sub	a, #0xb0
    00000051 38 1D            [12]  112 	jr	C, 00112$
    00000053 58               [ 4]  113 	ld	e, b
    00000054 3E 39            [ 8]  114 	ld	a,#0x39
    00000056 57               [ 4]  115 	ld	d,a
    00000057 90               [ 4]  116 	sub	a, b
    00000058 CB 7B            [ 8]  117 	bit	7, e
    0000005A 28 07            [12]  118 	jr	Z, 00234$
    0000005C CB 7A            [ 8]  119 	bit	7, d
    0000005E 20 08            [12]  120 	jr	NZ, 00235$
    00000060 BF               [ 4]  121 	cp	a, a
    00000061 18 05            [12]  122 	jr	00235$
    00000063                        123 00234$:
    00000063 CB 7A            [ 8]  124 	bit	7, d
    00000065 28 01            [12]  125 	jr	Z, 00235$
    00000067 37               [ 4]  126 	scf
    00000068                        127 00235$:
    00000068 38 06            [12]  128 	jr	C, 00112$
    0000006A 78               [ 4]  129 	ld	a, b
    0000006B C6 EB            [ 8]  130 	add	a, #0xeb
    0000006D 4F               [ 4]  131 	ld	c, a
    0000006E 18 49            [12]  132 	jr	00121$
    00000070                        133 00112$:
                                    134 ;src/main.c:18: switch(character) {
    00000070 78               [ 4]  135 	ld	a,b
    00000071 FE 21            [ 8]  136 	cp	a,#0x21
    00000073 28 22            [12]  137 	jr	Z, 00101$
    00000075 FE 2C            [ 8]  138 	cp	a,#0x2c
    00000077 28 32            [12]  139 	jr	Z, 00106$
    00000079 FE 2E            [ 8]  140 	cp	a,#0x2e
    0000007B 28 32            [12]  141 	jr	Z, 00107$
    0000007D FE 2F            [ 8]  142 	cp	a,#0x2f
    0000007F 28 22            [12]  143 	jr	Z, 00104$
    00000081 FE 3A            [ 8]  144 	cp	a,#0x3a
    00000083 28 16            [12]  145 	jr	Z, 00102$
    00000085 FE 3C            [ 8]  146 	cp	a,#0x3c
    00000087 28 2A            [12]  147 	jr	Z, 00108$
    00000089 FE 3D            [ 8]  148 	cp	a,#0x3d
    0000008B 28 1A            [12]  149 	jr	Z, 00105$
    0000008D FE 3E            [ 8]  150 	cp	a,#0x3e
    0000008F 28 26            [12]  151 	jr	Z, 00109$
    00000091 D6 3F            [ 8]  152 	sub	a, #0x3f
    00000093 28 0A            [12]  153 	jr	Z, 00103$
    00000095 18 22            [12]  154 	jr	00121$
                                    155 ;src/main.c:19: case '!': vramTile = 37; break;
    00000097                        156 00101$:
    00000097 0E 25            [ 8]  157 	ld	c, #0x25
    00000099 18 1E            [12]  158 	jr	00121$
                                    159 ;src/main.c:20: case ':': vramTile = 38; break;
    0000009B                        160 00102$:
    0000009B 0E 26            [ 8]  161 	ld	c, #0x26
    0000009D 18 1A            [12]  162 	jr	00121$
                                    163 ;src/main.c:21: case '?': vramTile = 39; break;
    0000009F                        164 00103$:
    0000009F 0E 27            [ 8]  165 	ld	c, #0x27
    000000A1 18 16            [12]  166 	jr	00121$
                                    167 ;src/main.c:22: case '/': vramTile = 40; break;
    000000A3                        168 00104$:
    000000A3 0E 28            [ 8]  169 	ld	c, #0x28
    000000A5 18 12            [12]  170 	jr	00121$
                                    171 ;src/main.c:23: case '=': vramTile = 41; break;
    000000A7                        172 00105$:
    000000A7 0E 29            [ 8]  173 	ld	c, #0x29
    000000A9 18 0E            [12]  174 	jr	00121$
                                    175 ;src/main.c:24: case ',': vramTile = 42; break;
    000000AB                        176 00106$:
    000000AB 0E 2A            [ 8]  177 	ld	c, #0x2a
    000000AD 18 0A            [12]  178 	jr	00121$
                                    179 ;src/main.c:25: case '.': vramTile = 43; break;
    000000AF                        180 00107$:
    000000AF 0E 2B            [ 8]  181 	ld	c, #0x2b
    000000B1 18 06            [12]  182 	jr	00121$
                                    183 ;src/main.c:26: case '<': vramTile = 44; break;
    000000B3                        184 00108$:
    000000B3 0E 2C            [ 8]  185 	ld	c, #0x2c
    000000B5 18 02            [12]  186 	jr	00121$
                                    187 ;src/main.c:27: case '>': vramTile = 45; break;
    000000B7                        188 00109$:
    000000B7 0E 2D            [ 8]  189 	ld	c, #0x2d
                                    190 ;src/main.c:28: }
    000000B9                        191 00121$:
                                    192 ;src/main.c:31: return vramTile;
    000000B9 79               [ 4]  193 	ld	a, c
                                    194 ;src/main.c:33: }
    000000BA C9               [16]  195 	ret
                                    196 ;src/main.c:35: void DrawText(uint8_t column, uint8_t row, char* text){
                                    197 ;	---------------------------------
                                    198 ; Function DrawText
                                    199 ; ---------------------------------
    000000BB                        200 _DrawText::
    000000BB 3B               [ 8]  201 	dec	sp
    000000BC 3B               [ 8]  202 	dec	sp
    000000BD 43               [ 4]  203 	ld	b, e
                                    204 ;src/main.c:38: uint8_t* vramAddress = get_bkg_xy_addr(column,row);
    000000BE C5               [16]  205 	push	bc
    000000BF 33               [ 8]  206 	inc	sp
    000000C0 F5               [16]  207 	push	af
    000000C1 33               [ 8]  208 	inc	sp
    000000C2 CDr00r00         [24]  209 	call	_get_bkg_xy_addr
    000000C5 E8 04            [16]  210 	add	sp, #4
    000000C7 D5               [16]  211 	push	de
                                    212 ;src/main.c:42: while(text[index]!='\0'){
    000000C8 01 00 00         [12]  213 	ld	bc, #0x0000
    000000CB                        214 00101$:
    000000CB F8 04            [12]  215 	ldhl	sp,	#4
    000000CD 2A               [ 8]  216 	ld	a,	(hl+)
    000000CE 66               [ 8]  217 	ld	h, (hl)
    000000CF 6F               [ 4]  218 	ld	l, a
    000000D0 09               [ 8]  219 	add	hl, bc
    000000D1 5D               [ 4]  220 	ld	e, l
    000000D2 54               [ 4]  221 	ld	d, h
    000000D3 1A               [ 8]  222 	ld	a, (de)
    000000D4 B7               [ 4]  223 	or	a, a
    000000D5 28 14            [12]  224 	jr	Z, 00104$
                                    225 ;src/main.c:44: char character = text[index];
                                    226 ;src/main.c:48: uint8_t vramTile = GetCharacterVRamTile(character);
    000000D7 C5               [16]  227 	push	bc
    000000D8 CDr00r00         [24]  228 	call	_GetCharacterVRamTile
    000000DB C1               [12]  229 	pop	bc
                                    230 ;src/main.c:50: set_vram_byte(vramAddress++,vramTile);
    000000DC D1               [12]  231 	pop	de
    000000DD D5               [16]  232 	push	de
    000000DE F8 00            [12]  233 	ldhl	sp,	#0
    000000E0 34               [12]  234 	inc	(hl)
    000000E1 20 02            [12]  235 	jr	NZ, 00121$
    000000E3 23               [ 8]  236 	inc	hl
    000000E4 34               [12]  237 	inc	(hl)
    000000E5                        238 00121$:
    000000E5 CDr00r00         [24]  239 	call	_set_vram_byte
                                    240 ;src/main.c:56: index++;
    000000E8 03               [ 8]  241 	inc	bc
    000000E9 18 E0            [12]  242 	jr	00101$
    000000EB                        243 00104$:
                                    244 ;src/main.c:59: }
    000000EB 33               [ 8]  245 	inc	sp
    000000EC 33               [ 8]  246 	inc	sp
    000000ED E1               [12]  247 	pop	hl
    000000EE F1               [12]  248 	pop	af
    000000EF E9               [ 4]  249 	jp	(hl)
                                    250 ;src/main.c:61: void main(void)
                                    251 ;	---------------------------------
                                    252 ; Function main
                                    253 ; ---------------------------------
    000000F0                        254 _main::
                                    255 ;src/main.c:63: SHOW_BKG;
    000000F0 F0r00            [12]  256 	ldh	a, (_LCDC_REG + 0)
    000000F2 F6 40            [ 8]  257 	or	a, #0x40
    000000F4 E0r00            [12]  258 	ldh	(_LCDC_REG + 0), a
                                    259 ;src/main.c:65: set_native_tile_data(0,Font_TILE_COUNT,Font_tiles);
                                    260 ;../../../include/gb/gb.h:2146: set_bkg_data(first_tile, nb_tiles, data);
    000000F6 11r00r00         [12]  261 	ld	de, #_Font_tiles
    000000F9 D5               [16]  262 	push	de
    000000FA 21 00 2E         [12]  263 	ld	hl, #0x2e00
    000000FD E5               [16]  264 	push	hl
    000000FE CDr00r00         [24]  265 	call	_set_bkg_data
    00000101 E8 04            [16]  266 	add	sp, #4
                                    267 ;src/main.c:67: fill_bkg_rect(0,0,DEVICE_SCREEN_WIDTH,DEVICE_SCREEN_HEIGHT,0);
    00000103 AF               [ 4]  268 	xor	a, a
    00000104 67               [ 4]  269 	ld	h, a
    00000105 2E 12            [ 8]  270 	ld	l, #0x12
    00000107 E5               [16]  271 	push	hl
    00000108 3E 14            [ 8]  272 	ld	a, #0x14
    0000010A F5               [16]  273 	push	af
    0000010B 33               [ 8]  274 	inc	sp
    0000010C AF               [ 4]  275 	xor	a, a
    0000010D 0F               [ 4]  276 	rrca
    0000010E F5               [16]  277 	push	af
    0000010F CDr00r00         [24]  278 	call	_fill_bkg_rect
    00000112 E8 05            [16]  279 	add	sp, #5
                                    280 ;src/main.c:70: DrawText(1,1,"GBDK Text Example");
    00000114 11r1Fr01         [12]  281 	ld	de, #___str_0
    00000117 D5               [16]  282 	push	de
    00000118 3E 01            [ 8]  283 	ld	a,#0x01
    0000011A 5F               [ 4]  284 	ld	e,a
    0000011B CDrBBr00         [24]  285 	call	_DrawText
                                    286 ;src/main.c:71: }
    0000011E C9               [16]  287 	ret
    0000011F                        288 ___str_0:
    0000011F 47 42 44 4B 20 54 65   289 	.ascii "GBDK Text Example"
             78 74 20 45 78 61 6D
             70 6C 65
    00000130 00                     290 	.db 0x00
                                    291 	.area _CODE
                                    292 	.area _INITIALIZER
                                    293 	.area _CABS (ABS)
