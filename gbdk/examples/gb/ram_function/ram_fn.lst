                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module ram_fn
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _print_counter
                                     12 	.globl _inc_hiram
                                     13 	.globl _inc_ram
                                     14 	.globl _inc_end
                                     15 	.globl _inc
                                     16 	.globl _memcpy
                                     17 	.globl _puts
                                     18 	.globl _printf
                                     19 	.globl _hiramcpy
                                     20 	.globl _inc_hiram_var
                                     21 	.globl _inc_ram_var
                                     22 	.globl _counter
                                     23 	.globl _hiram_buffer
                                     24 	.globl _ram_buffer
                                     25 ;--------------------------------------------------------
                                     26 ; special function registers
                                     27 ;--------------------------------------------------------
                                     28 ;--------------------------------------------------------
                                     29 ; ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area _DATA
                         0000D000    32 _ram_buffer	=	0xd000
                         0000FFA0    33 _hiram_buffer	=	0xffa0
                                     34 ;--------------------------------------------------------
                                     35 ; ram data
                                     36 ;--------------------------------------------------------
                                     37 	.area _INITIALIZED
    00000000                         38 _counter::
    00000000                         39 	.ds 2
    00000002                         40 _inc_ram_var::
    00000002                         41 	.ds 2
    00000004                         42 _inc_hiram_var::
    00000004                         43 	.ds 2
                                     44 ;--------------------------------------------------------
                                     45 ; absolute external ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area _DABS (ABS)
                                     48 ;--------------------------------------------------------
                                     49 ; global & static initialisations
                                     50 ;--------------------------------------------------------
                                     51 	.area _HOME
                                     52 	.area _GSINIT
                                     53 	.area _GSFINAL
                                     54 	.area _GSINIT
                                     55 ;--------------------------------------------------------
                                     56 ; Home
                                     57 ;--------------------------------------------------------
                                     58 	.area _HOME
                                     59 	.area _HOME
                                     60 ;--------------------------------------------------------
                                     61 ; code
                                     62 ;--------------------------------------------------------
                                     63 	.area _CODE
                                     64 ;ram_fn.c:9: void inc(void) {
                                     65 ;	---------------------------------
                                     66 ; Function inc
                                     67 ; ---------------------------------
    00000000                         68 _inc::
                                     69 ;ram_fn.c:10: counter++;
    00000000 21r00r00         [12]   70 	ld	hl, #_counter
    00000003 34               [12]   71 	inc	(hl)
    00000004 C0               [20]   72 	ret	NZ
    00000005 23               [ 8]   73 	inc	hl
    00000006 34               [12]   74 	inc	(hl)
                                     75 ;ram_fn.c:11: }
    00000007 C9               [16]   76 	ret
                                     77 ;ram_fn.c:13: void inc_end(void) {} 
                                     78 ;	---------------------------------
                                     79 ; Function inc_end
                                     80 ; ---------------------------------
    00000008                         81 _inc_end::
    00000008 C9               [16]   82 	ret
                                     83 ;ram_fn.c:32: void print_counter(void) {
                                     84 ;	---------------------------------
                                     85 ; Function print_counter
                                     86 ; ---------------------------------
    00000009                         87 _print_counter::
                                     88 ;ram_fn.c:33: printf(" Counter is %u\n", counter);
    00000009 FAr00r00         [16]   89 	ld	a, (_counter)
    0000000C 5F               [ 4]   90 	ld	e, a
    0000000D 21r01r00         [12]   91 	ld	hl, #_counter + 1
    00000010 56               [ 8]   92 	ld	d, (hl)
    00000011 D5               [16]   93 	push	de
    00000012 11r1Cr00         [12]   94 	ld	de, #___str_0
    00000015 D5               [16]   95 	push	de
    00000016 CDr00r00         [24]   96 	call	_printf
    00000019 E8 04            [16]   97 	add	sp, #4
                                     98 ;ram_fn.c:34: }
    0000001B C9               [16]   99 	ret
    0000001C                        100 ___str_0:
    0000001C 20 43 6F 75 6E 74 65   101 	.ascii " Counter is %u"
             72 20 69 73 20 25 75
    0000002A 0A                     102 	.db 0x0a
    0000002B 00                     103 	.db 0x00
                                    104 ;ram_fn.c:36: void main(void) {
                                    105 ;	---------------------------------
                                    106 ; Function main
                                    107 ; ---------------------------------
    0000002C                        108 _main::
                                    109 ;ram_fn.c:38: hiramcpy((uint8_t)&hiram_buffer, (void *)&inc, (uint8_t)object_distance(inc, inc_end));
    0000002C 3Er08            [ 8]  110 	ld	a, #<(_inc_end)
    0000002E 01r00r00         [12]  111 	ld	bc, #_inc
    00000031 59               [ 4]  112 	ld	e, c
    00000032 93               [ 4]  113 	sub	a, e
    00000033 57               [ 4]  114 	ld	d, a
    00000034 3Er00            [ 8]  115 	ld	a, #<(_hiram_buffer)
    00000036 D5               [16]  116 	push	de
    00000037 33               [ 8]  117 	inc	sp
    00000038 C5               [16]  118 	push	bc
    00000039 F5               [16]  119 	push	af
    0000003A 33               [ 8]  120 	inc	sp
    0000003B CDr00r00         [24]  121 	call	_hiramcpy
    0000003E E8 04            [16]  122 	add	sp, #4
                                    123 ;ram_fn.c:39: memcpy(&ram_buffer, (void *)&inc, (uint16_t)object_distance(inc, inc_end));
    00000040 3Er08            [ 8]  124 	ld	a, #<(_inc_end)
    00000042 16s00            [ 8]  125 	ld	d, #>(_inc_end)
    00000044 01r00r00         [12]  126 	ld	bc, #_inc
    00000047 91               [ 4]  127 	sub	a, c
    00000048 5F               [ 4]  128 	ld	e, a
    00000049 7A               [ 4]  129 	ld	a, d
    0000004A 98               [ 4]  130 	sbc	a, b
    0000004B 57               [ 4]  131 	ld	d, a
    0000004C D5               [16]  132 	push	de
    0000004D 11r00r00         [12]  133 	ld	de, #_ram_buffer
    00000050 CDr00r00         [24]  134 	call	_memcpy
                                    135 ;ram_fn.c:42: puts("Program Start...");
    00000053 11rAEr00         [12]  136 	ld	de, #___str_1
    00000056 CDr00r00         [24]  137 	call	_puts
                                    138 ;ram_fn.c:43: print_counter();
    00000059 CDr09r00         [24]  139 	call	_print_counter
                                    140 ;ram_fn.c:46: puts("Call ROM");
    0000005C 11rBFr00         [12]  141 	ld	de, #___str_2
    0000005F CDr00r00         [24]  142 	call	_puts
                                    143 ;ram_fn.c:47: inc();
    00000062 CDr00r00         [24]  144 	call	_inc
                                    145 ;ram_fn.c:48: print_counter();
    00000065 CDr09r00         [24]  146 	call	_print_counter
                                    147 ;ram_fn.c:51: puts("Call RAM direct");
    00000068 11rC8r00         [12]  148 	ld	de, #___str_3
    0000006B CDr00r00         [24]  149 	call	_puts
                                    150 ;ram_fn.c:52: inc_ram();
    0000006E CDr00r00         [24]  151 	call	_inc_ram
                                    152 ;ram_fn.c:53: print_counter();
    00000071 CDr09r00         [24]  153 	call	_print_counter
                                    154 ;ram_fn.c:56: puts("Call RAM indirect");
    00000074 11rD8r00         [12]  155 	ld	de, #___str_4
    00000077 CDr00r00         [24]  156 	call	_puts
                                    157 ;ram_fn.c:57: inc_ram_var();
    0000007A FAr02r00         [16]  158 	ld	a, (_inc_ram_var)
    0000007D 6F               [ 4]  159 	ld	l, a
    0000007E FAr03r00         [16]  160 	ld	a, (_inc_ram_var + 1)
    00000081 67               [ 4]  161 	ld	h, a
    00000082 CDr00r00         [24]  162 	call	___sdcc_call_hl
                                    163 ;ram_fn.c:58: print_counter();
    00000085 CDr09r00         [24]  164 	call	_print_counter
                                    165 ;ram_fn.c:61: puts("Call HIRAM direct");
    00000088 11rEAr00         [12]  166 	ld	de, #___str_5
    0000008B CDr00r00         [24]  167 	call	_puts
                                    168 ;ram_fn.c:62: inc_hiram();
    0000008E CDr00r00         [24]  169 	call	_inc_hiram
                                    170 ;ram_fn.c:63: print_counter();
    00000091 CDr09r00         [24]  171 	call	_print_counter
                                    172 ;ram_fn.c:66: puts("Call HIRAM indirect");
    00000094 11rFCr00         [12]  173 	ld	de, #___str_6
    00000097 CDr00r00         [24]  174 	call	_puts
                                    175 ;ram_fn.c:67: inc_hiram_var();
    0000009A FAr04r00         [16]  176 	ld	a, (_inc_hiram_var)
    0000009D 6F               [ 4]  177 	ld	l, a
    0000009E FAr05r00         [16]  178 	ld	a, (_inc_hiram_var + 1)
    000000A1 67               [ 4]  179 	ld	h, a
    000000A2 CDr00r00         [24]  180 	call	___sdcc_call_hl
                                    181 ;ram_fn.c:68: print_counter();
    000000A5 CDr09r00         [24]  182 	call	_print_counter
                                    183 ;ram_fn.c:70: puts("The End...");
    000000A8 11r10r01         [12]  184 	ld	de, #___str_7
                                    185 ;ram_fn.c:71: }
    000000AB C3r00r00         [16]  186 	jp	_puts
    000000AE                        187 ___str_1:
    000000AE 50 72 6F 67 72 61 6D   188 	.ascii "Program Start..."
             20 53 74 61 72 74 2E
             2E 2E
    000000BE 00                     189 	.db 0x00
    000000BF                        190 ___str_2:
    000000BF 43 61 6C 6C 20 52 4F   191 	.ascii "Call ROM"
             4D
    000000C7 00                     192 	.db 0x00
    000000C8                        193 ___str_3:
    000000C8 43 61 6C 6C 20 52 41   194 	.ascii "Call RAM direct"
             4D 20 64 69 72 65 63
             74
    000000D7 00                     195 	.db 0x00
    000000D8                        196 ___str_4:
    000000D8 43 61 6C 6C 20 52 41   197 	.ascii "Call RAM indirect"
             4D 20 69 6E 64 69 72
             65 63 74
    000000E9 00                     198 	.db 0x00
    000000EA                        199 ___str_5:
    000000EA 43 61 6C 6C 20 48 49   200 	.ascii "Call HIRAM direct"
             52 41 4D 20 64 69 72
             65 63 74
    000000FB 00                     201 	.db 0x00
    000000FC                        202 ___str_6:
    000000FC 43 61 6C 6C 20 48 49   203 	.ascii "Call HIRAM indirect"
             52 41 4D 20 69 6E 64
             69 72 65 63 74
    0000010F 00                     204 	.db 0x00
    00000110                        205 ___str_7:
    00000110 54 68 65 20 45 6E 64   206 	.ascii "The End..."
             2E 2E 2E
    0000011A 00                     207 	.db 0x00
                                    208 	.area _CODE
                                    209 	.area _INITIALIZER
    00000000                        210 __xinit__counter:
    00000000 00 00                  211 	.dw #0x0000
    00000002                        212 __xinit__inc_ram_var:
    00000002r00r00                  213 	.dw _ram_buffer
    00000004                        214 __xinit__inc_hiram_var:
    00000004r00r00                  215 	.dw _hiram_buffer
                                    216 	.area _CABS (ABS)
