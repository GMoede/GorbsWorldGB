                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Mac OS X ppc)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _duck_io_send_speech_cmd
                                     12 	.globl _duck_io_send_cmd_and_buffer
                                     13 	.globl _duck_io_laptop_init
                                     14 	.globl _puts
                                     15 	.globl _printf
                                     16 	.globl _gotoxy
                                     17 	.globl _vsync
                                     18 	.globl _waitpadup
                                     19 	.globl _joypad
                                     20 ;--------------------------------------------------------
                                     21 ; special function registers
                                     22 ;--------------------------------------------------------
                                     23 ;--------------------------------------------------------
                                     24 ; ram data
                                     25 ;--------------------------------------------------------
                                     26 	.area _DATA
                                     27 ;--------------------------------------------------------
                                     28 ; ram data
                                     29 ;--------------------------------------------------------
                                     30 	.area _INITIALIZED
                                     31 ;--------------------------------------------------------
                                     32 ; absolute external ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area _DABS (ABS)
                                     35 ;--------------------------------------------------------
                                     36 ; global & static initialisations
                                     37 ;--------------------------------------------------------
                                     38 	.area _HOME
                                     39 	.area _GSINIT
                                     40 	.area _GSFINAL
                                     41 	.area _GSINIT
                                     42 ;--------------------------------------------------------
                                     43 ; Home
                                     44 ;--------------------------------------------------------
                                     45 	.area _HOME
                                     46 	.area _HOME
                                     47 ;--------------------------------------------------------
                                     48 ; code
                                     49 ;--------------------------------------------------------
                                     50 	.area _CODE
                                     51 ;src/main.c:35: bool duck_io_send_speech_cmd(uint8_t speech_sample_num) {
                                     52 ;	---------------------------------
                                     53 ; Function duck_io_send_speech_cmd
                                     54 ; ---------------------------------
    00000000                         55 _duck_io_send_speech_cmd::
    00000000 4F               [ 4]   56 	ld	c, a
                                     57 ;src/main.c:37: duck_io_tx_buf[0] = speech_sample_num;
    00000001 21r00r00         [12]   58 	ld	hl, #_duck_io_tx_buf
    00000004 71               [ 8]   59 	ld	(hl), c
                                     60 ;src/main.c:38: duck_io_tx_buf_len = DUCK_IO_LEN_PLAY_SPEECH;
    00000005 21r00r00         [12]   61 	ld	hl, #_duck_io_tx_buf_len
    00000008 36 01            [12]   62 	ld	(hl), #0x01
                                     63 ;src/main.c:40: if (duck_io_send_cmd_and_buffer(DUCK_IO_CMD_PLAY_SPEECH)) {
    0000000A 3E 05            [ 8]   64 	ld	a, #0x05
    0000000C CDr00r00         [24]   65 	call	_duck_io_send_cmd_and_buffer
    0000000F CB 47            [ 8]   66 	bit	0,a
                                     67 ;src/main.c:41: return true;
                                     68 ;src/main.c:43: return false;
    00000011 3E 01            [ 8]   69 	ld	a, #0x01
    00000013 C0               [20]   70 	ret	NZ
    00000014 AF               [ 4]   71 	xor	a, a
                                     72 ;src/main.c:45: }
    00000015 C9               [16]   73 	ret
                                     74 ;src/main.c:49: void main(void) {
                                     75 ;	---------------------------------
                                     76 ; Function main
                                     77 ; ---------------------------------
    00000016                         78 _main::
    00000016 3B               [ 8]   79 	dec	sp
                                     80 ;src/main.c:52: uint8_t speech_num = 1u;
    00000017 F8 00            [12]   81 	ldhl	sp,	#0
    00000019 36 01            [12]   82 	ld	(hl), #0x01
                                     83 ;src/main.c:54: bool megaduck_laptop_init_ok = duck_io_laptop_init();
    0000001B CDr00r00         [24]   84 	call	_duck_io_laptop_init
    0000001E 4F               [ 4]   85 	ld	c, a
                                     86 ;src/main.c:56: SPRITES_8x8;
    0000001F F0r00            [12]   87 	ldh	a, (_LCDC_REG + 0)
    00000021 E6 FD            [ 8]   88 	and	a, #0xfd
    00000023 E0r00            [12]   89 	ldh	(_LCDC_REG + 0), a
                                     90 ;src/main.c:57: SHOW_SPRITES;
    00000025 F0r00            [12]   91 	ldh	a, (_LCDC_REG + 0)
    00000027 F6 01            [ 8]   92 	or	a, #0x01
    00000029 E0r00            [12]   93 	ldh	(_LCDC_REG + 0), a
                                     94 ;src/main.c:58: SHOW_BKG;
    0000002B F0r00            [12]   95 	ldh	a, (_LCDC_REG + 0)
    0000002D F6 40            [ 8]   96 	or	a, #0x40
    0000002F E0r00            [12]   97 	ldh	(_LCDC_REG + 0), a
                                     98 ;src/main.c:59: printf("Initializing..\n");
    00000031 C5               [16]   99 	push	bc
    00000032 11rF9r00         [12]  100 	ld	de, #___str_1
    00000035 CDr00r00         [24]  101 	call	_puts
    00000038 C1               [12]  102 	pop	bc
                                    103 ;src/main.c:61: if (!megaduck_laptop_init_ok) {
    00000039 CB 41            [ 8]  104 	bit	0, c
    0000003B 20 0D            [12]  105 	jr	NZ, 00105$
                                    106 ;src/main.c:65: "or Failed to Initialize");
    0000003D 11r08r01         [12]  107 	ld	de, #___str_2
    00000040 D5               [16]  108 	push	de
    00000041 CDr00r00         [24]  109 	call	_printf
    00000044 E1               [12]  110 	pop	hl
                                    111 ;src/main.c:66: while(1) {
    00000045                        112 00102$:
                                    113 ;src/main.c:67: vsync();
    00000045 CDr00r00         [24]  114 	call	_vsync
    00000048 18 FB            [12]  115 	jr	00102$
    0000004A                        116 00105$:
                                    117 ;src/main.c:78: "*UP/DOWN change num\n");
    0000004A 11r5Ar01         [12]  118 	ld	de, #___str_12
    0000004D CDr00r00         [24]  119 	call	_puts
                                    120 ;src/main.c:80: gotoxy(0,10); printf("Play Num:%d  ", speech_num);
    00000050 21 00 0A         [12]  121 	ld	hl, #0xa00
    00000053 E5               [16]  122 	push	hl
    00000054 CDr00r00         [24]  123 	call	_gotoxy
    00000057 E1               [12]  124 	pop	hl
    00000058 11 01 00         [12]  125 	ld	de, #0x0001
    0000005B D5               [16]  126 	push	de
    0000005C 11r34r01         [12]  127 	ld	de, #___str_7
    0000005F D5               [16]  128 	push	de
    00000060 CDr00r00         [24]  129 	call	_printf
    00000063 E8 04            [16]  130 	add	sp, #4
                                    131 ;src/main.c:82: while(1) {
    00000065                        132 00122$:
                                    133 ;src/main.c:83: vsync();
    00000065 CDr00r00         [24]  134 	call	_vsync
                                    135 ;src/main.c:84: gamepad = joypad();
    00000068 CDr00r00         [24]  136 	call	_joypad
                                    137 ;src/main.c:90: if (sys_time & 0x01u) {
    0000006B 21r00r00         [12]  138 	ld	hl, #_sys_time
    0000006E 4E               [ 8]  139 	ld	c, (hl)
    0000006F 23               [ 8]  140 	inc	hl
    00000070 46               [ 8]  141 	ld	b, (hl)
    00000071 CB 41            [ 8]  142 	bit	0, c
    00000073 28 F0            [12]  143 	jr	Z, 00122$
                                    144 ;src/main.c:92: if (gamepad) {
    00000075 B7               [ 4]  145 	or	a, a
    00000076 28 ED            [12]  146 	jr	Z, 00122$
                                    147 ;src/main.c:80: gotoxy(0,10); printf("Play Num:%d  ", speech_num);
    00000078 11r34r01         [12]  148 	ld	de, #___str_7
                                    149 ;src/main.c:94: switch (gamepad) {
    0000007B FE 04            [ 8]  150 	cp	a, #0x04
    0000007D 28 0A            [12]  151 	jr	Z, 00106$
    0000007F FE 08            [ 8]  152 	cp	a, #0x08
    00000081 28 26            [12]  153 	jr	Z, 00109$
    00000083 D6 80            [ 8]  154 	sub	a, #0x80
    00000085 28 42            [12]  155 	jr	Z, 00112$
    00000087 18 68            [12]  156 	jr	00116$
                                    157 ;src/main.c:95: case J_UP:
    00000089                        158 00106$:
                                    159 ;src/main.c:96: if (speech_num < DUCK_IO_SPEECH_CMD_MAX) speech_num++;
    00000089 F8 00            [12]  160 	ldhl	sp,	#0
    0000008B 7E               [ 8]  161 	ld	a, (hl)
    0000008C D6 06            [ 8]  162 	sub	a, #0x06
    0000008E 30 01            [12]  163 	jr	NC, 00108$
    00000090 34               [12]  164 	inc	(hl)
    00000091                        165 00108$:
                                    166 ;src/main.c:97: gotoxy(0,10); printf("Play Num:%d  ", speech_num);
    00000091 D5               [16]  167 	push	de
    00000092 21 00 0A         [12]  168 	ld	hl, #0xa00
    00000095 E5               [16]  169 	push	hl
    00000096 CDr00r00         [24]  170 	call	_gotoxy
    00000099 E1               [12]  171 	pop	hl
    0000009A D1               [12]  172 	pop	de
    0000009B F8 00            [12]  173 	ldhl	sp,	#0
    0000009D 4E               [ 8]  174 	ld	c, (hl)
    0000009E AF               [ 4]  175 	xor	a, a
    0000009F 47               [ 4]  176 	ld	b, a
    000000A0 C5               [16]  177 	push	bc
    000000A1 D5               [16]  178 	push	de
    000000A2 CDr00r00         [24]  179 	call	_printf
    000000A5 E8 04            [16]  180 	add	sp, #4
                                    181 ;src/main.c:98: break;
    000000A7 18 48            [12]  182 	jr	00116$
                                    183 ;src/main.c:100: case J_DOWN:
    000000A9                        184 00109$:
                                    185 ;src/main.c:101: if (speech_num > DUCK_IO_SPEECH_CMD_MIN) speech_num--;
    000000A9 3E 01            [ 8]  186 	ld	a, #0x01
    000000AB F8 00            [12]  187 	ldhl	sp,	#0
    000000AD 96               [ 8]  188 	sub	a, (hl)
    000000AE 30 01            [12]  189 	jr	NC, 00111$
    000000B0 35               [12]  190 	dec	(hl)
    000000B1                        191 00111$:
                                    192 ;src/main.c:102: gotoxy(0,10); printf("Play Num:%d  ", speech_num);
    000000B1 D5               [16]  193 	push	de
    000000B2 21 00 0A         [12]  194 	ld	hl, #0xa00
    000000B5 E5               [16]  195 	push	hl
    000000B6 CDr00r00         [24]  196 	call	_gotoxy
    000000B9 E1               [12]  197 	pop	hl
    000000BA D1               [12]  198 	pop	de
    000000BB F8 00            [12]  199 	ldhl	sp,	#0
    000000BD 4E               [ 8]  200 	ld	c, (hl)
    000000BE AF               [ 4]  201 	xor	a, a
    000000BF 47               [ 4]  202 	ld	b, a
    000000C0 C5               [16]  203 	push	bc
    000000C1 D5               [16]  204 	push	de
    000000C2 CDr00r00         [24]  205 	call	_printf
    000000C5 E8 04            [16]  206 	add	sp, #4
                                    207 ;src/main.c:103: break;
    000000C7 18 28            [12]  208 	jr	00116$
                                    209 ;src/main.c:105: case J_START:
    000000C9                        210 00112$:
                                    211 ;src/main.c:106: if (duck_io_send_speech_cmd(speech_num)) {
    000000C9 F8 00            [12]  212 	ldhl	sp,	#0
    000000CB 7E               [ 8]  213 	ld	a, (hl)
    000000CC CDr00r00         [24]  214 	call	_duck_io_send_speech_cmd
    000000CF CB 47            [ 8]  215 	bit	0,a
    000000D1 28 10            [12]  216 	jr	Z, 00114$
                                    217 ;src/main.c:107: gotoxy(0,11);
    000000D3 21 00 0B         [12]  218 	ld	hl, #0xb00
    000000D6 E5               [16]  219 	push	hl
    000000D7 CDr00r00         [24]  220 	call	_gotoxy
    000000DA E1               [12]  221 	pop	hl
                                    222 ;src/main.c:108: printf("Speech OK  \n");
    000000DB 11r42r01         [12]  223 	ld	de, #___str_9
    000000DE CDr00r00         [24]  224 	call	_puts
    000000E1 18 0E            [12]  225 	jr	00116$
    000000E3                        226 00114$:
                                    227 ;src/main.c:110: gotoxy(0,11);
    000000E3 21 00 0B         [12]  228 	ld	hl, #0xb00
    000000E6 E5               [16]  229 	push	hl
    000000E7 CDr00r00         [24]  230 	call	_gotoxy
    000000EA E1               [12]  231 	pop	hl
                                    232 ;src/main.c:111: printf("Speech FAIL\n");
    000000EB 11r4Er01         [12]  233 	ld	de, #___str_11
    000000EE CDr00r00         [24]  234 	call	_puts
                                    235 ;src/main.c:114: }
    000000F1                        236 00116$:
                                    237 ;src/main.c:117: waitpadup();
    000000F1 CDr00r00         [24]  238 	call	_waitpadup
    000000F4 C3r65r00         [16]  239 	jp	00122$
                                    240 ;src/main.c:121: }
    000000F7 33               [ 8]  241 	inc	sp
    000000F8 C9               [16]  242 	ret
    000000F9                        243 ___str_1:
    000000F9 49 6E 69 74 69 61 6C   244 	.ascii "Initializing.."
             69 7A 69 6E 67 2E 2E
    00000107 00                     245 	.db 0x00
    00000108                        246 ___str_2:
    00000108 4C 61 70 74 6F 70 20   247 	.ascii "Laptop not detected"
             6E 6F 74 20 64 65 74
             65 63 74 65 64
    0000011B 0A                     248 	.db 0x0a
    0000011C 6F 72 20 46 61 69 6C   249 	.ascii "or Failed to Initialize"
             65 64 20 74 6F 20 49
             6E 69 74 69 61 6C 69
             7A 65
    00000133 00                     250 	.db 0x00
    00000134                        251 ___str_7:
    00000134 50 6C 61 79 20 4E 75   252 	.ascii "Play Num:%d  "
             6D 3A 25 64 20 20
    00000141 00                     253 	.db 0x00
    00000142                        254 ___str_9:
    00000142 53 70 65 65 63 68 20   255 	.ascii "Speech OK  "
             4F 4B 20 20
    0000014D 00                     256 	.db 0x00
    0000014E                        257 ___str_11:
    0000014E 53 70 65 65 63 68 20   258 	.ascii "Speech FAIL"
             46 41 49 4C
    00000159 00                     259 	.db 0x00
    0000015A                        260 ___str_12:
    0000015A 4C 61 70 74 6F 70 20   261 	.ascii "Laptop Detected!"
             44 65 74 65 63 74 65
             64 21
    0000016A 0A                     262 	.db 0x0a
    0000016B 0A                     263 	.db 0x0a
    0000016C 50 6C 61 79 20 62 75   264 	.ascii "Play built-in speech"
             69 6C 74 2D 69 6E 20
             73 70 65 65 63 68
    00000180 0A                     265 	.db 0x0a
    00000181 0A                     266 	.db 0x0a
    00000182 2A 53 54 41 52 54 3A   267 	.ascii "*START:start speech"
             73 74 61 72 74 20 73
             70 65 65 63 68
    00000195 0A                     268 	.db 0x0a
    00000196 2A 55 50 2F 44 4F 57   269 	.ascii "*UP/DOWN change num"
             4E 20 63 68 61 6E 67
             65 20 6E 75 6D
    000001A9 00                     270 	.db 0x00
                                    271 	.area _CODE
                                    272 	.area _INITIALIZER
                                    273 	.area _CABS (ABS)
